<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>rxjs + react</title>
    <meta name="description" content="Simple online clock that can work as a stopwatch or countdown timer with start, pause and reset functions.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
  </head>
  <style>
    body {
      font-family: monospace;
    }
    #clock {
      font-size: larger;
    }
  </style>
  <body>
    <h3>RX listens here:</h3>
    <input type="text" id="text-input" placeholder="enter text here"/>
    
    <h3>React renders here:</h3>
    <div id="output" style="
        background-color: aquamarine;
        padding: 20px;
        max-width: 200px;
    ">Hello + your text shows up here (up to max characters)</div>
    <div id="container"></div>
  </body>
  <script src="https://unpkg.com/rxjs@beta/bundles/rxjs.umd.js"></script>
  <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

  <script>
    // DOM elements
    const input = document.getElementById('text-input');
    const output = document.getElementById('output');

    const { of, fromEvent, from, range } = rxjs;
    const { Observable } = rxjs;
    const { map, filter } = rxjs.operators;

    const { render } = ReactDOM;

    // const myArray = [1, 2, 3];

    // console.log('Normal');
    // const myNewArray = myArray
    //   .map(o => `${o} !!!`)
    //   .forEach(o => console.log(o));

    // console.log('RxJS');
    // const myObservable = from(myArray)
    //   .pipe(map(o => `${o} !!!`))
    //   .subscribe(o => console.log(o));

    // aHR0cHM6Ly9wLjRjYWNoZS5uZXQvMTMwODA1NzE2NjAyNi5naWYK

    function renderReact(name){
      const HelloComponent = function({name='No Name Provided'}) {
          const attributes = {};
          const innerHTML = `Hello ${name}`;
          return React.createElement(
            "div",
            attributes,
            innerHTML
          );
      };

      render(
        React.createElement(HelloComponent, {name}),
        document.getElementById('output')
      );
    }

    const obs = fromEvent(input, 'input')
      .pipe(
        map(e => e.target.value),
        filter(text => text.length < 10),
      )

    obs.subscribe(o => console.log(o));
    obs.subscribe(o => renderReact(o));

  </script>
</html>