<!--

useDefault: false

-->

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Markdown</title>
	<meta name="description"
		content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="mobile-web-app-capable" content="yes">
	<!-- link rel="stylesheet" href="https://unpkg.com/@asciidoctor/core@2.2.1/dist/css/asciidoctor.css" / -->
	<link rel="stylesheet" href="/shared/css/github-markdown.min.css" />
	<link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.css" />
	<base target="_blank" href="../../">
</head>

<style>
	.aqua{color:#00bfbf}
	.aqua-background{background:#00fafa}
	.black{color:#000}
	.black-background{background:#000}
	.blue{color:#0000bf}
	.blue-background{background:#0000fa}
	.fuchsia{color:#bf00bf}
	.fuchsia-background{background:#fa00fa}
	.gray{color:#606060}
	.gray-background{background:#7d7d7d}
	.green{color:#006000}
	.green-background{background:#007d00}
	.lime{color:#00bf00}
	.lime-background{background:#00fa00}
	.maroon{color:#600000}
	.maroon-background{background:#7d0000}
	.navy{color:#000060}
	.navy-background{background:#00007d}
	.olive{color:#606000}
	.olive-background{background:#7d7d00}
	.purple{color:#600060}
	.purple-background{background:#7d007d}
	.red{color:#bf0000}
	.red-background{background:#fa0000}
	.silver{color:#909090}
	.silver-background{background:#bcbcbc}
	.teal{color:#006060}
	.teal-background{background:#007d7d}
	.white{color:#bfbfbf}
	.white-background{background:#fafafa}
	.yellow{color:#bfbf00}
	.yellow-background{background:#fafa00}
	span.icon>.fa{cursor:default}
	a span.icon>.fa{cursor:inherit}
	.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
	.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
	.admonitionblock td.icon .icon-tip::before{content:"\f0eb";color:rgba(155,155,0,1)}
	.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
	.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
	.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
	
	.markdown-body code,
	.markdown-body pre {
		color: #6d89a0;
	}
	
	.markdown-body table tr {
		background: transparent;
	}
	.markdown-body table tr:nth-child(2n) {
		background-color: #f6f8fa06;
	}

	.no-preview {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 5vw;
		color: #666;
	}

	#markdown-input {
		display: none;
	}

	body:before {
		content: '';
		display: block;
		height: 35px;
		position: absolute;
		left: 0px;
		top: 0px;
		right: 0px;
		z-index: 1;
		background: #1d1d1deb;
	}

	body:after {
		content: '';
		display: block;
		height: 5px;
		position: absolute;
		left: 0px;
		top: 35px;
		right: 0px;
		z-index: 1;
		background: linear-gradient(180deg, #1d1d1deb, transparent);
	}

	body {
		margin: 0px;
		height: calc(100vh - 40px);
		width: calc(100% + 17px);
		overflow: hidden;
		color: #ccc;
		font-family: sans-serif;
		background: #1a1a1a;
	}

	#container {
		height: 100vh;
		width: 100%;
		overflow: auto;
		padding: 30px;
		margin-bottom: 20px;
		padding-top: 40px;
		padding-bottom: 40px;
		overflow-x: hidden;
	}

	#container.markdown-body img {
		width: calc(100% + 60px);
		max-width: calc(100% + 60px);
		max-height: 400px;
		object-fit: cover;
		object-position: center;
		margin-left: -30px;
		background-color: transparent !important;
	}

	#container.markdown-body hr {
		border: 1px dotted #999;
		border-top: 0px;
		margin-left: -30px;
		background-color: transparent;
	}

	#container.markdown-body {
		box-sizing: border-box;
		color: #acb5be;
	}

	#container>*:last-child {
		margin-bottom: 200px !important;
	}

	#container.markdown-body * {
		border-color: #777 !important;
	}

	blockquote {
		margin: 0;
		border-left: 5px solid #7a7a7a;
		font-style: italic;
		padding: 1px 20px;
		text-align: left;
	}

	.selected:after {
		content: '';
		display: block;
		background: #e2961d;
		position: absolute;
		left: -100px;
		right: 0px;
		top: -10px;
		bottom: -10px;
		z-index: -1;
	}

	.selected {
		color: black;
		position: relative;
		width: calc(100% + 30px);
		/*font-size: 35px !important;*/
	}

	li.selected,
	ul.selected,
	h1.selected,
	h2.selected,
	h3.selected,
	h4.selected,
	h5.selected,
	h6.selected {
		zoom: 1.5 !important;
		margin-left: 0.5%;
		margin-top: 10px !important;
		margin-bottom: 10px !important;
	}

	li.selected,
	ul.selected {
		zoom: 2 !important;
	}

	#container.markdown-body input[type=checkbox] {
		visibility: hidden !important;
		position: relative !important;
		color: inherit !important;
	}

	#container.markdown-body input[type=checkbox]:before {
		visibility: visible !important;
		position: absolute !important;
		font-size: 24px !important;
		top: -12px !important;
		left: -3px !important;
		content: '☐' !important;
	}

	#container.markdown-body input[type=checkbox]:checked:before {
		content: '✓' !important;
		color: #8BC34A !important;
	}

	#container.markdown-body .selected input[type=checkbox]:checked:before {
		color: black !important;
	}

	#container.markdown-body .highlight pre,
	#container.markdown-body pre {
		background-color: #ffffff11;
	}
	
	svg.bob {
		filter: invert(1) brightness(0.65);
	}
</style>

<body>
	<div id="container">
		<div class="no-preview">No preview available.</div>
	</div>
</body>

<textarea readonly hidden id="markdown-input">
{{markdown}}
</textarea>

<textarea readonly hidden id="markdown-default">
////

https://asciidoctor.org/docs/asciidoctor.js/

https://asciidoctor.org/docs/asciidoctor-diagram/

////

= The First Asciidoc example: Subtitle
:icons: font
Lars Vogel(c) 2016 vogella GmbH
Version 0.2, 17.12.2015

:sectnums:
:toc:
:toclevels: 4
:toc-title: Example Asciidoc


:description: Example AsciiDoc document
:keywords: AsciiDoc
:imagesdir: ./img

This is the optional preamble (an untitled section body). Useful for
writing simple sectionless documents consisting only of a preamble.

== First section

How to do icons like twitter icon:fire[] ?
	
icon:twitter[role=aqua]

button:[Save]

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test

== First section
Some text

== Second section
More test
</textarea>

<script id="global-functions">
	const delay = ms => new Promise(res => setTimeout(res, ms));
	const alreadyAppended = {};
	const appendScript = (url) => {
			if(alreadyAppended[url]){ return; }
			return new Promise((resolve, reject) => {
					alreadyAppended[url] = true;
					const script = document.createElement('script');
					script.crossOrigin = "anonymous";
					script.onload = resolve;
					script.src = url;
					document.head.appendChild(script);
			});
	};
	const appendStyleSheet = (url) => {
			if(alreadyAppended[url]){ return; }
			return new Promise((resolve, reject) => {
					alreadyAppended[url] = true;
					const style = document.createElement('link');
					style.rel = "stylesheet";
					style.crossOrigin = "anonymous";
					style.onload = resolve;
					style.href = url;
					document.head.appendChild(style);
			});
	};
	const appendCompiledStyleSheet = (url) => {
			if(alreadyAppended[url]) return;
			return new Promise(async (resolve, reject) => {
					alreadyAppended[url] = true;
					const cssBody = await (await fetch(url)).text();
					const style = document.createElement('style');
					style.id = 'foo-'+Math.random().toString().replace('0.','')
					style.textContent = stylus.render(cssBody);
					document.head.appendChild(style);
					resolve();
			});
	};
	window.appendUrls = async (urls=[]) => {
		const queue = Array.isArray(urls)
			? [ ...urls ]
			: [ urls ];

		for(var i=0; i<queue.length; i++){
			const url = queue[i];
			if(["css"].includes(url.split('.').pop()) ){
				await appendStyleSheet(url);
				continue;
			}
			if(["styl"].includes(url.split('.').pop()) ){
				await appendCompiledStyleSheet(url);
				continue;
			}
			if(url.split('.').pop() === "js"){
				await appendScript(url);
				continue;
			}
			console.error('error appendUrl: ' + url);
		}
	}
	window.htmlToElement = function htmlToElement(html) {
		var template = document.createElement('template');
		html = html.trim();
		template.innerHTML = html;
		return template.content.firstChild;
	}
</script>

	<script src="https://unpkg.com/@asciidoctor/core@2.2.1/dist/browser/asciidoctor.min.js"></script>
	
<script>
		const testInput = ``;
		(function () {
			const mdInputEl = document.getElementById('markdown-input');
			let templateInput = mdInputEl.innerHTML
				.trim()
				.replace(/&gt;/g, '>')
				.replace(/&lt;/g, '<');
			mdInputEl.innerHTML = '';
			const comment = document.createComment('\n' + templateInput + '\n');
			mdInputEl.appendChild(comment);

			//console.log({templateInput});

			if (templateInput === ('{{' + 'markdown' + '}}')) {
				templateInput = document.getElementById('markdown-default').value
			}
			if (templateInput.includes('</html>')) {
				console.log(templateInput)
				console.error('markdown should not have an </html> tag in it')
				return;
			}
			const contain = document.getElementById('container')
			if (!contain) {
				return;
			}
			contain.classList.add('markdown-body');
			
			const asciiDoctor = new Asciidoctor();
			
			var options = Opal.hash2(['attributes'], {
				'attributes': ['icons=font']
			});
			const output = asciiDoctor
				.convert(templateInput, options)
				.replace(/<a href="#/g, '<a target ="_self" href="' + document.location.pathname + '#')
				.replace(/\?preview/g, '/::preview::/');

			contain.innerHTML = output;

			addEventListener('click', function (ev) {
				if (ev.target.href && ev.target.href.includes('#')) {
					ev.preventDefault();
					function scrollSmoothTo(elementId) {
						var element = document.getElementById(elementId);
						element.parentNode.scrollIntoView({
							block: 'start',
							behavior: 'smooth'
						});
					}
					scrollSmoothTo(ev.target.href.split('#')[1]);
				}
			});
		})();
</script>

</html>