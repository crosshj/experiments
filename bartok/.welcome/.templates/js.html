<!doctype html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
    <base target="_blank" href="../../">
  </head>

  <style>
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #888; }
    ::-webkit-scrollbar-thumb:hover { background: #555; }
    body {
      margin: 3em 1em;
      color: #bbb;
      font-family: sans-serif;
      background: #1d1d1d;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: start;
      max-width: 1010px;
    }
    @media (min-width: 1024px) {
      body {
        margin: 3em auto;
      }
    }
    pre {
      white-space: pre-wrap;
      width: 100%;
      box-sizing: border-box;
      margin: 1em auto;
    }
    pre.info {
      background: #8881;
      padding: 1em;
    }
  </style>

  <code_in>
<!--
{{template_input}}
-->
  </code_in>

  <body></body>

  <script>
      const codeIn = document.querySelector('code_in');
      let codeFromComment = Array.from(codeIn.childNodes)
          .filter(x => x.nodeType === 8)
          .map(x => x.data).join('\n');
      if(codeFromComment.trim() === '{{'+'template_input'+'}}'){
        codeFromComment = `console.log("hello world");`.replace(new RegExp('          ', 'g'), '');
      }
      codeFromComment = `try {\n ${codeFromComment} \n} catch(e){ console.log(e); }`;

      /*
      // https://prismjs.com/
      TODO: use prism for code highlighting aka code('javascript', 'console.log("foo")')
        "https://unpkg.com/browse/prismjs@1.21.0/themes/prism.css"
        "https://unpkg.com/browse/prismjs@1.21.0/components/prism-core.min.js"
        "https://unpkg.com/browse/prismjs@1.21.0/plugins/autoloader/prism-autoloader.min.js"
      */

      console.bak = console.log;
      console.log = (text) => {
        const el = document.createElement('pre');
        el.innerText = text;
        document.body.appendChild(el);
      };

      console.bakInfo = console.info;
      console.info = (text) => {
          const el = document.createElement('pre');
          el.innerText = text;
          el.className = "info";
          document.body.appendChild(el);
      };
      eval(codeFromComment)
  </script>
</html>
