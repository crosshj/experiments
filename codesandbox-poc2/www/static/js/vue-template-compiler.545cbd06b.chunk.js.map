{"version":3,"sources":["webpack:///./src/sandbox/eval/transpilers/vue/template-compiler/modules/transform-require.js","webpack:///./src/sandbox/eval/transpilers/vue/template-compiler/modules/transform-srcset.js","webpack:///./src/sandbox/eval/transpilers/vue/template-compiler/loader.js"],"names":["defaultOptions","img","image","userOptions","loaderContext","options","postTransformNode","node","tag","attrs","attributes","some","attr","rewrite","Array","isArray","forEach","item","transform","name","value","charAt","length","firstChar","slice","rawDependency","addDependency","indexOf","escapedSpaceCharacters","imageCandidates","substr","split","map","s","replace","trim","url","descriptor","require","urlToRequire","code","o","i","a","secondChar","html","emitModule","vueHotReloadAPIRaw","vueOptions","defaultModules","transformRequire","transformSrcset","userModules","compilerModules","compilerOptions","preserveWhitespace","modules","concat","directives","compilerDirectives","scopeId","hasScoped","id","comments","hasComment","compiled","compiler","tips","tip","emitWarning","message","fileName","_module","module","parent","path","lineNumber","columnNumber","source","errors","emitError","Error","line","join","pad","e","bubleOptions","buble","stripWith","transforms","stripWithFunctional","staticRenderFns","fn","toFunction","transpile","render","exportsName","esModule"],"mappings":"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","file":"static/js/vue-template-compiler.545cbd06b.chunk.js","sourcesContent":["/* eslint-disable */\nimport { type LoaderContext } from '../../../../transpiled-module';\n// vue compiler module for transforming `<tag>:<attribute>` to `require`\n\nvar defaultOptions = {\n  img: 'src',\n  image: 'xlink:href',\n};\n\nexport default (userOptions, loaderContext: LoaderContext) => {\n  var options = userOptions\n    ? { ...defaultOptions, userOptions }\n    : defaultOptions;\n\n  return {\n    postTransformNode: node => {\n      transform(node, options, loaderContext);\n    },\n  };\n};\n\nfunction transform(node, options, loaderContext: LoaderContext) {\n  for (var tag in options) {\n    if (node.tag === tag && node.attrs) {\n      var attributes = options[tag];\n      if (typeof attributes === 'string') {\n        node.attrs.some(attr => rewrite(attr, attributes, loaderContext));\n      } else if (Array.isArray(attributes)) {\n        attributes.forEach(item =>\n          node.attrs.some(attr => rewrite(attr, item, loaderContext))\n        );\n      }\n    }\n  }\n}\n\nfunction rewrite(attr, name, loaderContext: LoaderContext) {\n  if (attr.name === name) {\n    var value = attr.value;\n    var isStatic =\n      value.charAt(0) === '\"' && value.charAt(value.length - 1) === '\"';\n    if (!isStatic) {\n      return;\n    }\n    var firstChar = value.charAt(1);\n    if (firstChar === '.' || firstChar === '~') {\n      if (firstChar === '~') {\n        value = '\"' + value.slice(2);\n      }\n      // get dependency the quotes\n      attr.value = `require(${value})`;\n\n      const rawDependency = value.slice(1).slice(0, -1);\n      loaderContext.addDependency(rawDependency);\n    }\n    return true;\n  }\n}\n","/* eslint-disable */\n// vue compiler module for transforming `img:srcset` to a number of `require`s\n\nexport default function() {\n  return {\n    postTransformNode: node => {\n      transform(node);\n    },\n  };\n}\n\nfunction transform(node) {\n  const tags = ['img', 'source'];\n\n  if (tags.indexOf(node.tag) !== -1 && node.attrs) {\n    node.attrs.forEach(attr => {\n      if (attr.name === 'srcset') {\n        // same logic as in transform-require.js\n        var value = attr.value;\n        var isStatic =\n          value.charAt(0) === '\"' && value.charAt(value.length - 1) === '\"';\n        if (!isStatic) {\n          return;\n        }\n\n        // http://w3c.github.io/html/semantics-embedded-content.html#ref-for-image-candidate-string-5\n        const escapedSpaceCharacters = /( |\\\\t|\\\\n|\\\\f|\\\\r)+/g;\n\n        const imageCandidates = value\n          .substr(1, value.length - 2)\n          .split(',')\n          .map(s => {\n            // The attribute value arrives here with all whitespace, except normal spaces, represented by escape sequences\n            const [url, descriptor] = s\n              .replace(escapedSpaceCharacters, ' ')\n              .trim()\n              .split(' ', 2);\n            return { require: urlToRequire(url), descriptor: descriptor };\n          });\n\n        let code = '';\n        imageCandidates.forEach((o, i, a) => {\n          code +=\n            o.require +\n            ' + \" ' +\n            o.descriptor +\n            (i < a.length - 1 ? ', \" + ' : '\"');\n        });\n\n        attr.value = code;\n      }\n    });\n  }\n}\n\nfunction urlToRequire(url) {\n  // same logic as in transform-require.js\n  var firstChar = url.charAt(0);\n  if (firstChar === '.' || firstChar === '~') {\n    if (firstChar === '~') {\n      var secondChar = url.charAt(1);\n      url = '\"' + url.slice(secondChar === '/' ? 2 : 1);\n    }\n    return `require(\"${url}\")`;\n  }\n}\n","/* eslint-disable no-use-before-define */\nimport transpile from 'vue-template-es2015-compiler';\nimport * as compiler from 'vue-template-compiler';\nimport vueHotReloadAPIRaw from '!raw-loader!vue-hot-reload-api';\n\nimport { type LoaderContext } from '../../../transpiled-module';\n\nimport transformRequire from './modules/transform-require';\nimport transformSrcset from './modules/transform-srcset';\n\nconst hotReloadAPIPath = '!noop-loader!/node_modules/vue-hot-reload-api.js';\nexport default function(html: string, loaderContext: LoaderContext) {\n  loaderContext.emitModule(\n    hotReloadAPIPath,\n    vueHotReloadAPIRaw,\n    '/',\n    false,\n    false\n  );\n\n  const { options } = loaderContext;\n  const vueOptions = options.vueOptions || {};\n  const needsHotReload = true;\n\n  const defaultModules = [\n    transformRequire(options.transformRequire, loaderContext),\n    transformSrcset(),\n  ];\n  const userModules = vueOptions.compilerModules || options.compilerModules;\n\n  const compilerOptions = {\n    preserveWhitespace: options.preserveWhitespace,\n    modules: defaultModules.concat(userModules || []),\n    directives:\n      vueOptions.compilerDirectives || options.compilerDirectives || {},\n    scopeId: options.hasScoped ? options.id : null,\n    comments: options.hasComment,\n  };\n\n  const compiled = compiler.compile(html, compilerOptions);\n\n  // tips\n  if (compiled.tips && compiled.tips.length) {\n    compiled.tips.forEach(tip => {\n      loaderContext.emitWarning({\n        name: 'vue-warning',\n        message: tip,\n        fileName: loaderContext._module.module.parent\n          ? loaderContext._module.module.parent.path\n          : loaderContext.path,\n        lineNumber: 1,\n        columnNumber: 1,\n        source: 'vue-template-compiler',\n      });\n    });\n  }\n\n  let code;\n  if (compiled.errors && compiled.errors.length) {\n    loaderContext.emitError(\n      new Error(\n        `\\n  Error compiling template:\\n${pad(html)}\\n` +\n          compiled.errors.map(e => `  - ${e}`).join('\\n') +\n          '\\n'\n      )\n    );\n    code = 'module.exports={render:function(){},staticRenderFns:[]}';\n  } else {\n    const bubleOptions = options.buble;\n    const stripWith = bubleOptions.transforms.stripWith !== false;\n    const { stripWithFunctional } = bubleOptions.transforms;\n\n    const staticRenderFns = compiled.staticRenderFns.map(fn =>\n      toFunction(fn, stripWithFunctional)\n    );\n\n    code =\n      transpile(\n        'var render = ' +\n          toFunction(compiled.render, stripWithFunctional) +\n          '\\n' +\n          'var staticRenderFns = [' +\n          staticRenderFns.join(',') +\n          ']',\n        bubleOptions\n      ) + '\\n';\n    // mark with stripped (this enables Vue to use correct runtime proxy detection)\n    if (stripWith) {\n      code += `render._withStripped = true\\n`;\n    }\n\n    const exports = `{ render: render, staticRenderFns: staticRenderFns }`;\n    code += `module.exports = ${exports}`;\n  }\n\n  // hot-reload\n  if (needsHotReload) {\n    const exportsName = vueOptions.esModule ? 'esExports' : 'module.exports';\n    code +=\n      '\\nif (module.hot) {\\n' +\n      '  module.hot.accept()\\n' +\n      '  if (module.hot.data) {\\n' +\n      '    require(\"' +\n      hotReloadAPIPath +\n      '\")' +\n      '      .rerender(\"' +\n      options.id +\n      '\", ' +\n      exportsName +\n      ')\\n' +\n      '  }\\n' +\n      '}';\n  }\n\n  return code;\n}\n\nfunction toFunction(code, stripWithFunctional) {\n  return (\n    'function (' + (stripWithFunctional ? '_h,_vm' : '') + ') {' + code + '}'\n  );\n}\n\nfunction pad(html) {\n  return html\n    .split(/\\r?\\n/)\n    .map(line => `  ${line}`)\n    .join('\\n');\n}\n"],"sourceRoot":""}