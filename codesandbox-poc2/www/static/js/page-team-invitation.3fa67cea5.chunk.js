(this.csbJsonP=this.csbJsonP||[]).push([[42],{"./src/app/pages/TeamInvitation/index.ts":function(e,n,t){"use strict";t.r(n);var i=t("../../node_modules/@babel/runtime/regenerator/index.js"),a=t.n(i),o=t("../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),r=t.n(o),l=t("../../node_modules/@babel/runtime/helpers/slicedToArray.js"),c=t.n(l),s=t("../../node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),m=t.n(s),d=t("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),u=t("../../node_modules/react/index.js"),v=t("../@styled-system/css/dist/index.js"),k=t.n(v),p=t("../../node_modules/react-router-dom/esm/react-router-dom.js"),f=t("../../node_modules/react-router/esm/react-router.js"),T=t("../components/lib/index.js"),b=t("../components/lib/themes/codesandbox-black.js"),g=t.n(b),y=t("../common/lib/components/Logo.js"),h=t.n(y),S=t("../../node_modules/@apollo/react-hooks/lib/react-hooks.esm.js"),E=t("./src/app/overmind/index.ts"),j=t("../../node_modules/react-helmet/lib/Helmet.js"),x=t("../common/lib/utils/url-generator.js"),N=t("../common/lib/utils/analytics/index.js"),_=t.n(N);function w(){var e=m()(["\n  max-width: 750px;\n  min-width: 450px;\n  text-align: center;\n"]);return w=function(){return e},e}function C(){var e=m()(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n"]);return C=function(){return e},e}var I=d.default.main.withConfig({displayName:"elements__PageContainer",componentId:"sc-12jkvgp-0"})(C(),(function(e){return e.theme.colors.grays[700]})),O=d.default.div.withConfig({displayName:"elements__ContentContainer",componentId:"sc-12jkvgp-1"})(w()),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TeamByToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inviteToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"teamByToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inviteToken"},value:{kind:"Variable",name:{kind:"Name",value:"inviteToken"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:112,source:{body:"\n  query TeamByToken($inviteToken: String!) {\n    teamByToken(inviteToken: $inviteToken) {\n      name\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"JoinTeamByToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inviteToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemTeamInviteToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inviteToken"},value:{kind:"Variable",name:{kind:"Name",value:"inviteToken"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138,source:{body:"\n  mutation JoinTeamByToken($inviteToken: String!) {\n    redeemTeamInviteToken(inviteToken: $inviteToken) {\n      id\n      name\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function J(){var e=m()(["",""]);return J=function(){return e},e}var L=Object(d.default)(T.Element).withConfig({displayName:"TeamInvitation___StyledElement",componentId:"sc-1x6fqym-0"})(J(),(function(e){return e._css})),F=Object(d.default)(T.Stack).withConfig({displayName:"TeamInvitation___StyledStack",componentId:"sc-1x6fqym-1"})({textAlign:"center",color:"white"}),q=function(e){var n=e.title,t=e.description,i=e.action;return u.createElement(L,{paddingX:14,paddingTop:8,paddingBottom:8,_css:k()({borderRadius:8,backgroundColor:"grays.900"})},u.createElement(T.Stack,{gap:12,direction:"vertical",align:"center"},u.createElement(h.a,{height:56,width:56}),u.createElement(F,{gap:3,direction:"vertical"},u.createElement(T.Text,{size:5,align:"center"},n),t&&u.createElement(T.Text,{variant:"muted",size:4,align:"center"},t)),i))},G=function(e){var n=e.error;return u.createElement(q,{title:"Something went wrong while fetching the invitation",description:n.message.replace("GraphQL error: ",""),action:u.createElement(T.Stack,{style:{width:"100%"},gap:2},u.createElement(T.Button,{as:p.Link,to:Object(x.dashboardUrl)(),style:{textDecoration:"none",flex:1},variant:"secondary"},"Dashboard"),u.createElement(T.Button,{onClick:function(){document.location.reload()},style:{flex:1}},"Refresh"))})},V=function(e){var n=e.inviteToken,t=Object(E.c)().actions,i=Object(S.d)(B,{variables:{inviteToken:n}});return i.loading?u.createElement(T.Text,{size:6},"Loading Invitation..."):i.error?u.createElement(G,{error:i.error}):u.createElement(u.Fragment,null,u.createElement(j.Helmet,null,u.createElement("title",null,i.data?"Join ".concat(i.data.teamByToken.name," on CodeSandbox"):"Join team on CodeSandbox")),u.createElement(q,{title:u.createElement(u.Fragment,null,"Join ",u.createElement("b",null,i.data.teamByToken.name)," on CodeSandbox"),description:"Please sign in to GitHub to continue",action:u.createElement(T.Button,{onClick:function(){return t.signInClicked()}},"Sign in to GitHub")}))},P=function(e){var n=e.inviteToken,t=Object(E.c)().effects,i=u.useState(!0),o=c()(i,2),l=o[0],s=o[1],m=u.useState(null),d=c()(m,2),v=d[0],k=d[1],p=u.useState(null),b=c()(p,2),g=b[0],y=b[1],h=Object(S.c)(D),j=c()(h,1)[0];return u.useEffect((function(){(function(){var e=r()(a.a.mark((function e(){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_()("Team - Join Team",{source:"url"}),e.next=4,j({variables:{inviteToken:n}});case 4:i=e.sent,o=i.data.redeemTeamInviteToken,t.notificationToast.success("Successfully joined "+o.name+"!"),k(o.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y(e.t0);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}})()()}),[j,n,t.notificationToast]),g?u.createElement(G,{error:g}):l||!v?u.createElement(T.Text,{size:6},"Joining Team..."):u.createElement(f.c,{to:Object(x.teamOverviewUrl)(v)})},z=function(e){var n,t=e.match,i=Object(E.c)().state,a=null===t||void 0===t||null===(n=t.params)||void 0===n?void 0:n.token,o=i.hasLogIn?u.createElement(P,{inviteToken:a}):u.createElement(V,{inviteToken:a});return u.createElement(T.ThemeProvider,{theme:g.a},u.createElement(I,null,u.createElement(O,null,o)))};t.d(n,"TeamInvitation",(function(){return z}))}}]);
//# sourceMappingURL=page-team-invitation.3fa67cea5.chunk.js.map