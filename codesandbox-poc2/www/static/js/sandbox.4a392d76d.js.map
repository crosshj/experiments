{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sandbox/eval/transpilers/vue/style-loader/addStylesClient.js","webpack:///./src/sandbox/eval/transpilers/vue/style-loader/listToStyles.js","webpack:///./src/sandbox/status-screen/indicator-screen.html","webpack:///./src/sandbox/status-screen/loading-screen.html","webpack:///./src/sandbox/status-screen/run-on-click-screen.html","webpack:///./src/sandbox/eval/transpilers/babel/worker/index.js","webpack:///./src/sandbox/eval/transpilers/coffee/coffee-worker.js","webpack:///./src/sandbox/eval/transpilers/less/less-worker.js","webpack:///./src/sandbox/eval/presets/parcel/transpilers/html-worker.js","webpack:///./src/sandbox/eval/transpilers/pug/pug-worker.js","webpack:///./src/sandbox/eval/transpilers/sass/worker/index.js","webpack:///./src/sandbox/eval/transpilers/stylus/stylus-worker.js","webpack:///./src/sandbox/eval/transpilers/svelte/svelte-worker.js","webpack:///./src/sandbox/eval/transpilers/typescript/typescript-worker.js","webpack:///../common/lib/registerServiceWorker.js","webpack:///../common/lib/utils/dependencies.js","webpack:///../sandbox-hooks/errors/dependency-not-found-error.js","webpack:///../sandbox-hooks/errors/index.js","webpack:///../sandbox-hooks/errors/module-not-found-error.js","webpack:///../sandbox-hooks/errors/sandbox-error.js","webpack:///../sandbox-hooks/errors/transformers/index.js","webpack:///../sandbox-hooks/errors/transformers/raw-react-component-error.js","webpack:///../sandbox-hooks/not-found-screen/index.js","webpack:///../sandbox-hooks/not-found-screen/overlay-manager.js","webpack:///../sandbox-hooks/preview-secret.js","webpack:///../sandbox-hooks/react-error-overlay/components/additional.js","webpack:///../sandbox-hooks/react-error-overlay/components/close.js","webpack:///../sandbox-hooks/react-error-overlay/components/code.js","webpack:///../sandbox-hooks/react-error-overlay/components/footer.js","webpack:///../sandbox-hooks/react-error-overlay/components/frame.js","webpack:///../sandbox-hooks/react-error-overlay/components/frames.js","webpack:///../sandbox-hooks/react-error-overlay/components/overlay.js","webpack:///../sandbox-hooks/react-error-overlay/components/suggestions.js","webpack:///../sandbox-hooks/react-error-overlay/effects/proxyConsole.js","webpack:///../sandbox-hooks/react-error-overlay/effects/stackTraceLimit.js","webpack:///../sandbox-hooks/react-error-overlay/effects/unhandledError.js","webpack:///../sandbox-hooks/react-error-overlay/effects/unhandledRejection.js","webpack:///../sandbox-hooks/react-error-overlay/listenToRuntimeErrors.js","webpack:///../sandbox-hooks/react-error-overlay/overlay.js","webpack:///../sandbox-hooks/react-error-overlay/styles.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/consumeEvent.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/css.js","webpack:///../sandbox-hooks/react-error-overlay/utils/dom/enableTabClick.js","webpack:///../sandbox-hooks/react-error-overlay/utils/errorRegister.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getLinesAround.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getSourceMap.js","webpack:///../sandbox-hooks/react-error-overlay/utils/getStackFrames.js","webpack:///../sandbox-hooks/react-error-overlay/utils/isInternalFile.js","webpack:///../sandbox-hooks/react-error-overlay/utils/mapper.js","webpack:///../sandbox-hooks/react-error-overlay/utils/parser.js","webpack:///../sandbox-hooks/react-error-overlay/utils/stack-frame.js","webpack:///../sandbox-hooks/react-error-overlay/utils/unmapper.js","webpack:///../sandbox-hooks/react-error-overlay/utils/warnings.js","webpack:///./src/sandbox/boilerplates/index.js","webpack:///./src/sandbox/boilerplates/default-boilerplates.js","webpack:///./src/sandbox/codesandbox-overlay/index.ts","webpack:///./src/sandbox/eval/transpilers/index.ts","webpack:///./src/sandbox/eval/transpilers/webpack/index.ts","webpack:///./src/sandbox/eval/transpilers/csb-dynamic-import/dynamic-import/index.ts","webpack:///./src/sandbox/eval/transpilers/csb-dynamic-import/index.ts","webpack:///./src/sandbox/eval/presets/index.ts","webpack:///./src/sandbox/eval/transpilers/style/utils/insert-css.js","webpack:///./src/sandbox/eval/transpilers/style/utils/to-definition.js","webpack:///./src/sandbox/eval/transpilers/style/get-modules.ts","webpack:///./src/sandbox/eval/transpilers/style/index.ts","webpack:///./src/sandbox/eval/utils/is-es-module.ts","webpack:///./src/sandbox/utils/delay.ts","webpack:///./src/sandbox/eval/transpilers/utils/worker-error-handler.js","webpack:///./src/sandbox/eval/transpilers/worker-transpiler.ts","webpack:///./src/sandbox/eval/transpilers/babel/babel-parser.ts","webpack:///./src/sandbox/eval/transpilers/babel/check.ts","webpack:///./src/sandbox/eval/transpilers/babel/convert-esmodule/syntax.ts","webpack:///./src/sandbox/eval/transpilers/babel/convert-esmodule/utils.ts","webpack:///./src/sandbox/eval/transpilers/babel/convert-esmodule/generator.ts","webpack:///./src/sandbox/eval/transpilers/babel/convert-esmodule/index.ts","webpack:///./src/sandbox/eval/transpilers/babel/worker/simple-get-require-statements.ts","webpack:///./src/sandbox/eval/transpilers/babel/index.ts","webpack:///./src/sandbox/eval/transpilers/json/index.ts","webpack:///./src/sandbox/eval/transpilers/raw/index.ts","webpack:///./src/sandbox/eval/presets/create-react-app/utils.ts","webpack:///./src/sandbox/eval/transpilers/svgr/index.ts","webpack:///./src/sandbox/eval/transpilers/sass/index.ts","webpack:///./src/sandbox/eval/transpilers/react/refresh-transpiler.ts","webpack:///./src/sandbox/eval/transpilers/postcss/index.ts","webpack:///./src/sandbox/eval/presets/create-react-app/v3.ts","webpack:///./src/sandbox/eval/transpilers/typescript/index.ts","webpack:///./src/sandbox/eval/utils/get-dependencies.ts","webpack:///./src/sandbox/eval/transpilers/stylus/index.ts","webpack:///./src/sandbox/eval/transpilers/less/index.ts","webpack:///./src/sandbox/eval/transpilers/noop/index.ts","webpack:///./src/sandbox/eval/transpilers/binary/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/template-compiler/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/style-compiler/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/selector/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/style-loader/index.ts","webpack:///./src/sandbox/eval/transpilers/vue/style-loader/loader.js","webpack:///./src/sandbox/eval/transpilers/vue/css-loader/index.ts","webpack:///./src/sandbox/eval/transpilers/base64/index.ts","webpack:///./src/sandbox/eval/transpilers/pug/index.ts","webpack:///./src/sandbox/eval/transpilers/coffee/index.ts","webpack:///./src/sandbox/eval/presets/vue-cli/index.js","webpack:///./src/sandbox/eval/presets/preact-cli/transpilers/async.js","webpack:///./src/sandbox/eval/presets/preact-cli/index.js","webpack:///./src/sandbox/eval/transpilers/svelte/index.ts","webpack:///./src/sandbox/eval/presets/svelte/index.js","webpack:///./src/sandbox/eval/transpilers/angular2-template/index.ts","webpack:///./src/sandbox/eval/presets/angular-cli/index.js","webpack:///./src/sandbox/eval/presets/parcel/transpilers/html-transpiler.js","webpack:///./src/sandbox/eval/transpilers/reason/index.ts","webpack:///./src/sandbox/eval/presets/dojo/transpilers/style.js","webpack:///./src/sandbox/eval/presets/custom/index.js","webpack:///./src/sandbox/eval/index.ts","webpack:///./src/sandbox/eval/presets/create-react-app/v1.ts","webpack:///./src/sandbox/eval/presets/create-react-app-typescript/index.js","webpack:///./src/sandbox/eval/presets/reason/index.js","webpack:///./src/sandbox/eval/presets/parcel/index.js","webpack:///./src/sandbox/eval/presets/babel-repl/index.js","webpack:///./src/sandbox/eval/presets/cxjs/index.js","webpack:///./src/sandbox/eval/presets/dojo/index.js","webpack:///./src/sandbox/eval/cache.ts","webpack:///./src/sandbox/utils/benchmark.ts","webpack:///./src/sandbox/eval/errors/module-error.ts","webpack:///./src/sandbox/eval/errors/module-warning.ts","webpack:///./src/sandbox/eval/loaders/dependency-resolver.ts","webpack:///./src/sandbox/eval/loaders/utils/process.js","webpack:///./src/sandbox/eval/loaders/eval.ts","webpack:///./src/sandbox/eval/hmr.ts","webpack:///./src/sandbox/eval/utils/query-path.ts","webpack:///./src/sandbox/eval/transpiled-module.ts","webpack:///./src/sandbox/eval/utils/get-dependency-name.ts","webpack:///./src/sandbox/eval/utils/resolve-utils.ts","webpack:///./src/sandbox/eval/npm/fetch-npm-module.ts","webpack:///./src/sandbox/eval/npm/get-core-libraries.ts","webpack:///./src/sandbox/npm/dependencies-to-query.ts","webpack:///./src/sandbox/eval/manager.ts","webpack:///./src/sandbox/external-resources.ts","webpack:///./src/sandbox/status-screen/overlay-manager.ts","webpack:///./src/sandbox/status-screen/index.ts","webpack:///./src/sandbox/version-resolving/merge-dependency.ts","webpack:///./src/sandbox/version-resolving/resolutions.ts","webpack:///./src/sandbox/version-resolving/resolve-dependency.ts","webpack:///./src/sandbox/version-resolving/index.ts","webpack:///./src/sandbox/npm/fetch-dependencies.ts","webpack:///./src/sandbox/npm/index.ts","webpack:///./src/sandbox/status-screen/run-on-click.js","webpack:///./src/sandbox/compile.ts","webpack:///./src/sandbox/eval/presets/reason/reason-remap.js","webpack:///./src/sandbox/eval/transpilers/utils/loader-utils/parse-query.js","webpack:///./src/sandbox/eval/transpilers/utils/loader-utils/stringify-request.js","webpack:///./src/sandbox/eval/transpilers/utils/loader-utils/index.js","webpack:///./src/sandbox/eval/transpilers/utils/loader-utils/get-remaining-request.js","webpack:///./src/sandbox/index.js","webpack:///./src/sandbox/utils/metrics.ts","webpack:///external \"jsdom\""],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","46","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","this","oldJsonpFunction","slice","Worker","unregister","isLocalhost","Boolean","window","location","hostname","match","isHttp","protocol","registerValidSW","swUrl","onUpdated","onInstalled","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","storage","estimate","results","usage","quota","self","caches","keys","names","forEach","delete","catch","default","URL","process","env","PUBLIC_URL","origin","fetch","response","status","headers","indexOf","ready","reload","log","checkValidServiceWorker","__awaiter","thisArg","_arguments","P","generator","step","next","rejected","done","fetchWithRetries","url","x","ok","json","fetchPackageJSON","dep","version","encodeURIComponent","isAbsoluteVersion","test","getAbsoluteDependencies","dependencies","nonAbsoluteDependencies","filter","newDependencies","assign","map","DependencyNotFoundError","dependencyName","fromPath","path","split","root","second","parsedName","startsWith","suggestions","title","action","dispatch","actions","source","add","SandboxError","ref","errorToSend","manager","getCurrentManager","relevantFrame","enhancedFrames","find","wrappedResolveModule","_originalFileName","fileName","replace","tModule","resolveTranspiledModule","parent","line","_originalLineNumber","column","_originalColumnNumber","payload","severity","hideLine","lineNumber","stack","matched","babelMatched","parseInt","buildErrorMessage","buildDynamicError","show","columnNumber","ModuleNotFoundError","isDependency","currentPath","description","number","transformers","registerErrorTransformer","rawReactErrorTransformer","includes","findRawModule","rawModule","Array","from","reduce","foundResult","sourceModule","basename","rename","HTML","sandboxId","createOverlay","contentDocument","getElementById","onclick","requestPreviewSecretFromApp","body","removeChild","iframeReference","createIframe","iframe","html","innerHTML","getPreviewSecret","cookie","RegExp","setPreviewSecret","secret","cookieValue","getPopupDimensions","width","height","wLeft","screenLeft","screenX","wTop","screenTop","screenY","left","innerWidth","top","innerHeight","getPopupOffset","listener","$type","previewSecret","addEventListener","removeEventListener","host","protocolAndHost","popup","open","setInterval","postMessage","close","additionalReference","currentError","totalErrors","switchCallback","lastChild","div","applyStyles","additionalChildStyle","group","groupStyle","groupElemLeft","consumeEvent","createTextNode","enableTabClick","right","groupElemRight","text","callback","hints","hintsStyle","hint","span","hintStyle","createHint","closeButtonStyle","sourceLines","lineNum","columnNum","contextSize","main","onSourceClick","sourceCode","whiteSpace","Infinity","content","Math","min","isFinite","substring","ansiHighlight","join","forceColor","linesAbove","linesBelow","htmlHighlight","code","codeStyle","ccn","childNodes","oLoop","index","node","ccn2","index2","innerText","primaryErrorStyle","secondaryErrorStyle","pre","primaryPreStyle","secondaryPreStyle","handler","style","cursor","footerStyle","frameSetting","frame","critical","omits","omitBundle","parentContainer","lastElement","errorName","compiled","functionName","sourceFileName","scriptLines","_scriptCode","sourceLineNumber","sourceColumnNumber","_originalScriptCode","prettyURL","trimMatch","exec","getPrettyURL","needsHidden","isInternalUrl","isInternalFile","isThrownIntentionally","isBultinErrorName","shouldCollapse","hasReachedAppCode","collapseElement","capV","omittedFrames","omitsCount","text1","hide","textContent","list","getElementsByName","display","omittedFramesCollapsedStyle","omittedFramesExpandedStyle","getGroupToggle","requestAnimationFrame","actionElement","children","first","parentNode","click","insertBefore","insertBeforeBundle","bundle","trim","editor","openModule","elem","internalUrl","cleanedFunctionName","frameFunctionName","cleanedUrl","functionNameStyle","depStyle","frameLink","linkStyle","frameAnchor","anchorStyle","frameDiv","hiddenStyle","hasSource","createCode","resolvedFrames","frameSettings","trace","traceStyle","lIndex","createFrameWrapper","factory","fac","elemWrapper","compiledDiv","toggleStyle","compiledText","createFrame","frames","closeCallback","overlay","overlayStyle","container","containerStyle","createClose","additional","updateAdditional","header","headerStyle","messageHeader","messageHeaderStyle","finalMessage","originalName","originalMessage","originalErrorContainer","errorHeader","originalHeaderStyle","originalMessageHeader","originalMessageHeaderStyle","areActionsEnabled","createSuggestions","createFrames","createFooter","suggestionsContainerStyle","suggestionsTitleStyle","suggestion","button","suggestionsButtonStyle","preventDefault","reactFrameStack","reactStack","reactStackEnd","pop","orig","arguments","limit","stackTraceRegistered","restoreStackTraceValue","stackTraceLimit","boundErrorHandler","errorHandler","boundRejectionHandler","rejectionHandler","reason","crash","filename","crashWithFramesRunTime","crashWithFrames","registerReactStack","permanentRegister","warning","massage","__unmap_source","unregisterReactStack","unhandledRejection","stackFrames","listenToRuntimeErrorsUnmounter","listenToRuntimeErrors","consume","errorReferences","sendErrorsToEditor","transformErrors","currReferenceIndex","offset","switchError","renderErrorByIndex","unmount","render","disposeCurrentView","iframeStyle","w","contentWindow","onkeydown","keyEventHandler","SHORTCUT_ESCAPE","SHORTCUT_LEFT","SHORTCUT_RIGHT","shortcutHandler","margin","getErrorRecord","nextView","force","drain","errRef","transformation","transformError","getTranspiledModules","newError","ex","position","border","padding","color","flex","overflow","_preStyle","_groupElemStyle","transition","blur","css","getHead","injectedCache","injectedCount","element","styles","getElementsByTagName","which","keyCode","parsedFrames","parse","unmap","recorded","errorsConsumed","getLinesAround","count","lines","max","ScriptLine","SourceMap","sourceMap","__source_map","originalPositionFor","generatedPositionFor","sourceName","sourceContentFor","sources","extractSourceMapUrl","fileUri","fileContents","regex","toString","getSourceMap","sm","base64","match2","atob","JSON","SourceMapConsumer","lastIndexOf","res","obj","getStackFrames","f","contextLines","cache","files","settle","transpiledModule","getTranspiledModuleByHash","fileSource","compiledCode","getOriginalPosition","originalSource","getSource","StackFrame","regexExtractLocation","extractLocation","token","v","Number","isNaN","regexValidFrame_Chrome","regexValidFrame_FireFox","parseStack","isEval","last","parseError","isArray","highlight","scriptCode","sourceFunctionName","sourceScriptCode","_originalFunctionName","str","getFunctionName","search","string","_fileUri","contents","uri","normalize","fN","getSources","seps","sep","penalties","sort","a","b","sign","sourceT","getGeneratedPosition","lastFilename","lastLineNumber","stripInlineStacktrace","abs","cachedBoilerplates","evalBoilerplates","boilerplates","boilerplate","fakeModule","condition","extension","transpileModules","evaluateModule","getBoilerplates","findBoilerplate","id","normalized","prev","isBinary","parameters","getParameters","Transpiler","cacheable","HMREnabled","loaderContext","doTranspilation","WebpackTranspiler","webpackLoader","evaluator","evaluate","loader","asyncFunc","webpackLoaderContext","async","webpackResult","transpiledCode","importRegex","transpiler","convertDynamicImport","Preset","ignoredExtensions","alias","hasDotEnv","processDependencies","setup","teardown","htmlDisabled","preEvaluate","csbDynamicImportTranspiler","aliases","defaultAliases","aliasedPathCache","loaders","transpilers","clear","options","querystring","Set","noop","deps","postTranspilers","exactFoundAlias","endsWith","pathParts","foundAlias","orderBy","every","replacedPath","prepend","transpilerObject","unshift","query","transpilerNames","extraTranspilers","loaderName","parseOptions","reverse","finalTranspilers","preTranspilers","getLoaders","webpackHMREnabled","stringify","wrapper","toDefinition","classes","previous","className","core","Core","load","dependencyPath","addDependency","injectableSource","exportTokens","getStyleId","StyleTranspiler","_module","getId","getModules","insertCss","hmrEnabled","expr","isESModule","lastIndex","delay","parseWorkerError","reconstructedError","debug","_debug","WorkerTranspiler","workerCount","hardwareConcurrency","workers","idleWorkers","tasks","initialized","hasFS","loadingWorkers","preload","loadWorker","Date","now","getWorker","worker","readyListener","BrowserFS","FileSystem","WorkerFS","attachRemoteListener","codesandbox","executeRemainingTasks","terminate","taskIds","taskId","task","executeTask","callbacks","onmessage","newMessage","runCallbacks","emitWarning","correction","resolveTranspiledModuleAsync","found","isGlob","addDependenciesInDirectory","isAbsolute","isEntry","addTranspilationDependency","DEFAULT_BABEL_CONFIG","presets","plugins","JSXSyntax","regeneratorSyntax","checkComment","startOfLine","hasNewSyntax","jsxMatch","regeneratorMatch","Syntax","generateRequireStatement","varName","requirePath","declarations","init","callee","kind","generateAllExportsIterator","expression","computed","params","operator","raw","consequent","argument","alternate","generateExportGetter","generateExportStatement","exportName","exportObj","local","properties","method","shorthand","generateInteropRequireExpression","localName","customGenerator","astring","FieldDefinition","write","convertEsModule","usedVarNames","varsToRename","trackedExports","getVarName","usedName","program","meriyah","importOffset","addedSpecifier","addEsModuleSpecifier","addedDefaultInterop","addDefaultInterop","exportsDefined","walk","enter","skip","declNode","idNode","statement","specifiers","specifier","exported","declaration","newDeclaration","importName","imported","prop","scopeManager","escope","acquire","scopes","scope","references","identifier","resolved","writeExpr","isWrite","detach","finalCode","lineRegex","partRegex","commentRegex","global","BabelWorker","babelworkers","newCode","isNodeModule","convertedToEsmodule","measure","endMeasure","silent","warn","simpleRequire","commentMatch","matches","codePart","regexGetRequireStatements","dependency","configs","configurations","foundConfig","babel","parsed","loaderOptions","devDependencies","isV7","isBabel7","hasMacros","some","babelConfig","config","resolvedConfig","disableCodeSandboxPlugins","finalConfig","sourceMaps","commonjsPluginName","getBabelConfig","queueTask","babelTranspilerOptions","babelTranspiler","sandboxOptions","sandbox","emitError","baseConfig","availablePlugins","availablePresets","babelVersion","isMinimalSemverVersion","minimalVersion","semver","gte","isMinimalReactVersion","absoluteDependencies","hasRefresh","reactDom","cleanUsingUnmount","manifest","reactDOMModule","resolveModule","reactDOM","unmountComponentAtNode","tagName","svgrTransform","codeIsHttp","webpack","previousExport","downloadedCode","SassWorker","indentedSyntax","HELPER_PATH","HELPER_CODE","emitModule","initializeReactDevTools","opener","initializeDevTools","initialize","activate","__REACT_DEVTOOLS_GLOBAL_HOOK__","createRefreshEntry","entryModule","addModule","tEntryModule","getTranspiledModule","setIsEntry","transpile","BABEL7_CONFIG","compileNodeModulesWithEnv","legacy","loose","useBuiltIns","corejs","helpers","regenerator","targets","ie","ignoreBrowserslistConfig","refreshInitialized","preset","isRefresh","resetTranspilers","registerTranspiler","refreshTranspiler","svgrTranspiler","sassTranspiler","styleProcessor","stylesTranspiler","jsonTranspiler","rawTranspiler","isFirstLoad","webpackHMR","TypeScriptWorker","typescriptVersion","typescript","StylusWorker","LessWorker","interMediateFiles","NoopTranspiler","blob","addStylesClientRaw","listToStylesRaw","loaderUtils","stringifyRequest","hash","shared","concat","reader","FileReader","readAsDataURL","onloadend","base64data","PugWorker","CoffeeWorker","getFileNameFromVm","vm","cid","_isVue","$options","constructor","__file","preactPreset","preact$","react","uglify","exclude","pragma","export","import","cssModulesPaths","cssTypes","less","lessTranspiler","styl","stylusTranspiler","cssType","asyncTranspiler","SvelteWorker","packageJSON","svelte","coerce","babelOptions","parserOpts","templateUrlRegex","stylesRegex","stringRegex","replaceStringsWithRequires","extensionConfig","quote","charAt","urlParts","finalUrl","newSource","templateProperty","urls","styleProperty","polyfillsLoaded","addAngularJSONPolyfills","defaultProject","project","projects","build","architect","polyfill","polyfillLocation","absolute","polyfills","addAngularCLIPolyfills","apps","app","addAngularJSONResources","scripts","finalPath","input","asUMD","getPathFromResource","addAngularCLIResources","environmentSource","environments","dev","setAdditionalAliases","HTMLWorker","addScript","IGNORED_DEPENDENCIES","getModuleName","moduleParts","unCapitalizedModuleName","toUpperCase","cachedDependencies","Map","getDependencyList","listFunction","ocaml","reason_list_dependencies","list_dependencies","has","set","foundModule","moduleName","reasonModules","mainReasonModule","modulesToAdd","usedCode","printRE","parseML","typesPath","dirname","typesModule","reasonCode","reason_compile_super_errors","js_code","errorMessage","js_error_msg","row","stripANSI","packageJson","packageName","baseName","transpilerMap","registerTranspilers","transpilerConfig","savedTranspilers","configModule","shouldTranspile","initiators","compilation","evaluatedTranspilers","initializers","getPreset","template","pkg","reactPresetV3","reactPresetV1","reactTs","reactTsPreset","reasonRemap","reasonTranspiler","reasonPreset","vue","vuePreset","vue$","vueModule","Vue","warnHandler","msg","file","sassWithConfig","lessWithConfig","stylusWithConfig","typescriptTranspiler","vueTranspiler","coffeeTranspiler","scss","sass","registerStyleTranspilers","vueTemplateTranspiler","vueStyleTranspiler","vueSelector","vueStyleLoader","cssLoader","binaryTranspiler","base64Transpiler","noopTranspiler","pugTranspiler","preact","sveltePreset","svelteTranspiler","angular","zone","generated","angular2Transpiler","angularPreset","parcel","parcelPreset","dynamicCSSModules","tsTranspiler","htmlTranspiler","babelPreset","cxjs","cxjsPreset","dojo","stylesPath","dojoStylesTranspiler","dojoPreset","custom","customPreset","updatedModules","clearCompiledCache","clearCache","customConfig","customTemplate","sandpack","APICacheUsed","localforage","storeName","shouldSaveOnlineCache","firstRun","changes","__SANDBOX_DATA__","saveCache","managerModuleToTranspile","serialize","entryPath","optimizeForSize","managerState","setItem","SCRIPT_VERSION","stringifiedManagerState","toFixed","deleteAPICache","findCacheToUse","cache1","cache2","timestamp","consumeCache","localStorage","getItem","removeItem","cacheData","localData","ModuleError","ModuleWarning","getDependency","require","cachedSetTimeout","cachedClearTimeout","currentQueue","queue","draining","queueIndex","defaultSetTimout","defaultClearTimeout","runTimeout","fun","drainQueue","cleanUpNextTick","len","run","marker","runClearTimeout","Item","array","NODE_ENV","nextTick","args","browser","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","g","requestFrame","raf","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","hasGlobalDeclaration","globals","buildProcess","allGlobals","setImmediate","allGlobalKeys","globalsCode","globalsValues","k","eval","isEvalError","HMR","disposeHandler","setSelfAccepted","selfAccepted","dirty","isHot","splitQueryFromPath","queryPath","modulePath","ModuleSource","sourceEqualsCompiled","TranspiledModule","warnings","errors","childModules","transpilationDependencies","asyncDependencies","transpilationInitiators","isTestFile","hashsum","hmrConfig","markHardReload","reset","resetTranspilation","cleanModule","getLoaderContext","removeTranspiledModule","emittedAssets","setIsTestFile","previousSource","setDirty","resetCompilation","size","depPath","isTranspilationDep","downloadDependency","fileResolver","hasMissingDependencies","transpilerOptions","directoryPath","pathUtils","overwrite","isChild","moduleCopy","update","addTranspiledModule","emitFile","assets","createSourceForAsset","folderPath","tModules","resolveTranspiledModulesInDirectory","context","remainingRequests","dispose","finalSourceMap","requires","reGlob","measureKey","logWarnings","sourceURL","flattenDeep","transpileJobs","doTranspile","initiator","localModule","isDirty","shouldReloadPage","isDeclined","isCompilationCached","setHmrStatus","callDisposeHandler","hotData","hot","accept","cb","setType","setAcceptCallback","enableWebpackHMR","decline","setDisposeHandler","hmrStatus","addStatusHandler","removeStatusHandler","usedPath","getPresetAliasedPath","bfsModule","BFSRequire","os","homedir","toPath","resolveDependency","requiredTranspiledModule","evaluateTranspiledModule","usedGlobals","__dirname","__filename","$csbImport","envVariables","callAcceptCallback","stubbed","war","serializableObject","isNpmDependnecy","getModule","transpiledModules","loadModule","transpilation","getDependencyName","dependencyParts","packageFilter","pkgLocation","metas","combinedMetas","normalizedMetas","packages","fileObject","rootPath","absolutePath","normalizeJSDelivr","convertGitHubURLToVersion","urlProtocols","csbGH","meta","normalizeMeta","unpkg","jsDelivrNPM","latestVersion","jsDelivrGH","sha","retries","doFetch","lastTryTime","getFetchProtocol","depVersion","useFallback","isDraftProtocol","CSB_PKG_PROTOCOL","isGitHub","ALIAS_REGEX","resolveNPMAlias","parts","getMeta","packageJSONPath","depName","nameWithoutAlias","relativePath","fallbackProtocol","fallbackUrl","downloaded","resolvePath","currentTModule","defaultExtensions","isFile","extensions","ext","moduleDirectory","NODE_PATH","readFile","getDependencyVersion","subDepVersionVersionInfo","subDepVersion","resolvedPath","foundPackageJSONPath","rootDependency","savedDepDep","dependencyDependencies","fetchModule","versionInfo","normalizeFunction","normalizedMeta","normalizedCacheKey","foundPath","assert","buffer","child_process","cluster","constants","crypto","dgram","dns","domain","events","fs","http","https","net","punycode","readline","repl","stream","_stream_duplex","_stream_passthrough","_stream_readable","_stream_transform","_stream_writable","sys","timers","tls","tty","util","zlib","NODE_LIBS","SKIPPED_BROWSER_FIELD_DEPENDENCIES","SHIMMED_MODULE","getShimmedModuleFromPath","Manager","removeModule","moveModule","newPath","updateModule","returnValue","hasCallback","stage","bool","hmrStatusChangeListeners","cachedPaths","hardReload","transpiledModulesByHash","getGlobal","configure","bfsWrapper","hasFileResolver","setupFileResolver","baseTModule","testRunner","TestRunner","Protocol","sendMessage","dependencyAliases","pJsonCode","postEvaluate","moduleObject","values","existingModule","envCode","envLine","val","entry","setEnvironmentVariables","postTranspile","previousDependencyName","aliasedDependencyName","getAliasedPath","baseTSCompilerConfig","jsconfig","compilerOptions","baseUrl","dirredPath","cachedPath","promiseResolve","promiseReject","presetAliasedPath","aliasedPath","getAliasedDependencyPath","shimmedPath","coreLibraries","readFileSync","getModuleDirectories","connectedPath","sync","getTranspiledModulesByModule","resolveModuleAsync","joinedPath","resetAllModules","addedModules","mirrorModule","modulesToUpdate","uniq","tModulesToUpdate","hardReloadOnChange","modulesWithErrors","flattenedTModulesToUpdate","allModulesToUpdate","transpiledModulesToUpdate","transpilationResults","serializedTModules","dependenciesQuery","getDependencyQuery","dir","getTime","normalizedDependencies","dependenciesToQuery","newCombinedMetas","sTModule","ignoreNextCache","info","getTranspilerContext","getExternalResourcesConcatenation","resources","clearExternalResources","el","remove","addResource","resource","link","rel","href","media","addCSS","addJS","waitForLoaded","readyState","cachedExternalResources","handleExternalResources","externalResources","extResString","iframeRenderedAt","setIframeStyle","showFullScreen","opacity","currentScreen","loadTimeoutID","changeText","getElementsByClassName","item","resetScreen","resetOverlay","setScreen","screen","loadingHtml","indicatorHtml","isEqual","s1","s2","replacePaths","paths","oldName","newName","al","replaceDependencyInfo","depDepName","newDepDep","parents","intersects","v1","v2","mergeDependencies","responses","sortedResponses","localeCompare","exDepDep","entries","replacingDepDep","WRONG_PATTERNS","parsePatternInfo","globPattern","range","parsePackagePath","pattern","parseResolutions","resolutions","getPackageJSON","getLatestVersionForSemver","getAbsoluteVersion","originalDep","parsedResolutions","applicableResolutions","minimatch","getDependencyDependencies","peerDependencyResult","packageJSONCode","absoluteVersion","resolveDependencyInfo","peerDependencies","resolutionsByPackage","getDependencyVersions","_","depsWithNodeLibs","depInfos","URLS","packager","bucket","BUCKET_URL","PACKAGER_URL","callApi","statusText","statusCode","requestPackager","dependencyToPackagePath","removeSpacesFromDependencies","newDeps","getDependencies","showLoadingFullScreen","dependencyUrl","bucketDependencyUrl","fullUrl","bucketManifest","fetchDependencies","npmDependencies","showLoaderFullScreen","notifications","loadedDependencyCombination","shouldFetchDynamically","loadDependencies","disableExternalConnection","isNewCombination","dependenciesWithoutTypings","pickBy","depQuery","fetchDynamically","fetchFunction","showRunOnClick","initializedResizeListener","actionsEnabled","getHTMLParts","headMatch","bodyMatch","sendTestCount","givenManager","tests","findTests","firstLoad","hadError","lastHeadHTML","lastBodyHTML","lastHeight","changedModuleCount","usedCache","DEPENDENCY_ALIASES","WHITELISTED_DEV_DEPENDENCIES","PREINSTALLED_DEPENDENCIES","parsedPackage","templateDefinition","returnedDependencies","foundWhitelistedDevDependencies","prefixedName","usedDep","sandpackConfig","preinstalledDependencies","preInstalledDependencies","csbbust","initializeManager","updateManager","managerModules","updateConfigurations","updateData","sendResize","documentElement","scrollHeight","offsetHeight","clientHeight","getDocumentHeight","initializeResizeListener","compile","hasActions","isModuleView","showOpenInCodeSandbox","skipEval","disableDependencyPreprocessing","metrics","startTime","inject","clearErrorTransformers","initializeErrorTransformers","getDefinition","parseConfigurations","configurationFiles","parsedPackageJSON","displayName","shouldReloadManager","setManifest","possibleEntries","getEntries","foundMain","setStage","verifyTreeTranspiled","htmlModulePath","getHTMLEntries","htmlModule","oldHTML","evalled","domChanged","defaultBoilerplates","createCodeSandboxOverlay","lastTime","initializeTestRunner","Event","dispatchEvent","cacheUsed","userAgent","VERSION","compilatonError","__puppeteer__","oldClose","reattach","overrideDocumentClose","runningTask","executeTaskIfAvailable","specialValues","null","true","false","matchRelativePath","isAbsolutePath","getRemainingRequest","loaderIndex","parseQuery","substr","queryArgs","arg","idx","decodeURIComponent","splitted","part","splittedPart","singlePath","relative","currentScript","requirePolyfills","registerServiceWorker","isStandalone","listen","getSandboxId","Accept","Authorization","credentials","show404","camelized","camelizeKeys","npm_dependencies","getModulePath","directories","generateFileFromSandbox","runningMeasurements","measurements","performance","mark","lastMeasurement","nowMeasurement","hadKey","getCumulativeMeasure","prefix","totalTime","clearMeasurements","getMeasurements","persistMeasurements","measurement","tags","cache_used","fields","evaluation","external_resources","boot","total","jsdom"],"mappings":"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EACbC,GAAqB,EACrBC,IAAY,EAEVC,GAAqB,CACzB,wBAAyB,yBAIrBC,GAA+B,CACnC,iBACA,8BACA,6BACA,eACA,SACA,0BACA,sBACA,qBACA,iBAmBIC,GAAyB,CAC7B,gBACA,mBACA,iBACA,sCACA,gCACA,wCACA,sCACA,uCACA,6CACA,uCACA,iCACA,qCACA,8CACA,wCACA,2BACA,oCACA,oCACA,0BACA,yCACA,+CACA,yCACA,4CACA,gDACA,gDACA,0CACA,oCACA,2CACA,wCACA,gDACA,uDACA,8CACA,wCACA,oDACA,8CACA,+CACA,uCACA,8CACA,2CACA,yCACA,4CACA,iDACA,iDACA,4CACA,6CACA,2CACA,qDACA,uCACA,6CACA,kDACA,8CACA,8CACA,wDACA,+CACA,+CACA,8BACA,iDACA,2CACA,uCACA,0CACA,uCACA,iCACA,uCACA,4CACA,2DACA,yCACA,iDACA,4CACA,+CACA,mCACA,0CACA,wCACA,0CACA,qCACA,iCACA,qCACA,0CACA,mCACA,yBACA,gDACA,iCACA,YAjF6B,OAhBJ,CACzB,mBACA,sBACA,sBACA,4BACA,sBACA,sBACA,qBACA,uBACA,uBACA,uBACA,yBA0FF,SAASvC,GACPwC,EACAC,EACAjyB,GACkB,IAAD,EAKbgyB,EAHFj+C,aAAcpG,OAFC,MAEG,GAFH,IAKbqkD,EAFF1D,wBAHe,MAGI,GAHJ,IAKb0D,EADF3xB,uBAJe,MAIG,GAJH,EAOb6xB,EAAoB,MAAQ5D,GAE1B6D,EAA+B,UAAOL,IAGxC9xB,GAAkBA,EAAeE,OAASF,EAAeE,MAAMC,SACjE,IAAQH,EAAeE,MAAMC,OAAOvG,SAAW,IAC5C3lB,QAAO,SAAA7H,GAAC,MAAiB,kBAANA,KACnBoF,SAAQ,SAACpF,GAAe,IAAD,EACIA,EAAEqI,MAAM,KADZ,SACfsN,EADe,KACLw+B,EADK,WAEhB6R,EAAehmD,EAAEyI,WAAW,KAC9BkN,EAAQ,iBAAmBw+B,EAAM3iC,KAAK,KADrB,uBAEDxR,GAEpB+lD,EAAgCnoD,KAAKoC,GACrC+lD,EAAgCnoD,KAAKo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","file":"static/js/sandbox.4a392d76d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t46: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({\"5\":\"vendors~app~embed~jest-lite\",\"7\":\"vendors~vue-loader~vue-selector~vue-template-compiler\",\"13\":\"vendors~postcss-compiler~vue-style-compiler\",\"14\":\"vendors~vue-loader~vue-selector\",\"24\":\"css-loader\",\"25\":\"css-modules-loader-core\",\"30\":\"jest-lite\",\"44\":\"postcss-compiler\",\"55\":\"vendors~css-modules-loader-core\",\"56\":\"vendors~jest-lite\",\"60\":\"vendors~react-devtools-backend\",\"62\":\"vendors~vue-style-compiler\",\"63\":\"vendors~vue-template-compiler\",\"64\":\"vue-loader\",\"65\":\"vue-selector\",\"66\":\"vue-style-compiler\",\"67\":\"vue-template-compiler\"}[chunkId]||chunkId) + \".\" + {\"5\":\"3c2f7afa6\",\"7\":\"1e7480368\",\"13\":\"f3c026f93\",\"14\":\"155751ef4\",\"24\":\"41f7e5c9f\",\"25\":\"547cfdf33\",\"30\":\"9c2545bb2\",\"44\":\"e4f7e02e2\",\"55\":\"ead07ffc2\",\"56\":\"190e6b538\",\"60\":\"e9b2fd3a6\",\"62\":\"4f54542a5\",\"63\":\"818a27237\",\"64\":\"3ead2e4dd\",\"65\":\"96f4240b8\",\"66\":\"69b9ba112\",\"67\":\"545cbd06b\",\"70\":\"36bf767dd\",\"75\":\"8a3da9b0a\"}[chunkId] + \".chunk.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://codesandbox.io/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = this[\"csbJsonP\"] = this[\"csbJsonP\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([6,0,2,61,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"/* eslint-disable */\\n/*\\n  MIT License http://www.opensource.org/licenses/mit-license.php\\n  Author Tobias Koppers @sokra\\n  Modified by Evan You @yyx990803\\n*/\\n\\nvar hasDocument = typeof document !== 'undefined';\\n\\nif (typeof DEBUG !== 'undefined' && DEBUG) {\\n  if (!hasDocument) {\\n    throw new Error(\\n      'vue-style-loader cannot be used in a non-browser environment. ' +\\n        \\\"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\\\"\\n    );\\n  }\\n}\\n\\nvar listToStyles = require('./listToStyles');\\n\\n/*\\ntype StyleObject = {\\n  id: number;\\n  parts: Array<StyleObjectPart>\\n}\\n\\ntype StyleObjectPart = {\\n  css: string;\\n  media: string;\\n  sourceMap: ?string\\n}\\n*/\\n\\nvar stylesInDom = {\\n  /*\\n  [id: number]: {\\n    id: number,\\n    refs: number,\\n    parts: Array<(obj?: StyleObjectPart) => void>\\n  }\\n*/\\n};\\n\\nvar head =\\n  hasDocument && (document.head || document.getElementsByTagName('head')[0]);\\nvar singletonElement = null;\\nvar singletonCounter = 0;\\nvar isProduction = false;\\nvar noop = function() {};\\n\\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\\n// tags it will allow on a page\\nvar isOldIE =\\n  typeof navigator !== 'undefined' &&\\n  /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\\n\\nmodule.exports = function(parentId, list, _isProduction) {\\n  isProduction = _isProduction;\\n\\n  var styles = listToStyles(parentId, list);\\n  addStylesToDom(styles);\\n\\n  return function update(newList) {\\n    var mayRemove = [];\\n    for (var i = 0; i < styles.length; i++) {\\n      var item = styles[i];\\n      var domStyle = stylesInDom[item.id];\\n      domStyle.refs--;\\n      mayRemove.push(domStyle);\\n    }\\n    if (newList) {\\n      styles = listToStyles(parentId, newList);\\n      addStylesToDom(styles);\\n    } else {\\n      styles = [];\\n    }\\n    for (var i = 0; i < mayRemove.length; i++) {\\n      var domStyle = mayRemove[i];\\n      if (domStyle.refs === 0) {\\n        for (var j = 0; j < domStyle.parts.length; j++) {\\n          domStyle.parts[j]();\\n        }\\n        delete stylesInDom[domStyle.id];\\n      }\\n    }\\n  };\\n};\\n\\nfunction addStylesToDom(styles /* Array<StyleObject> */) {\\n  for (var i = 0; i < styles.length; i++) {\\n    var item = styles[i];\\n    var domStyle = stylesInDom[item.id];\\n    if (domStyle) {\\n      domStyle.refs++;\\n      for (var j = 0; j < domStyle.parts.length; j++) {\\n        domStyle.parts[j](item.parts[j]);\\n      }\\n      for (; j < item.parts.length; j++) {\\n        domStyle.parts.push(addStyle(item.parts[j]));\\n      }\\n      if (domStyle.parts.length > item.parts.length) {\\n        domStyle.parts.length = item.parts.length;\\n      }\\n    } else {\\n      var parts = [];\\n      for (var j = 0; j < item.parts.length; j++) {\\n        parts.push(addStyle(item.parts[j]));\\n      }\\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts };\\n    }\\n  }\\n}\\n\\nfunction createStyleElement() {\\n  var styleElement = document.createElement('style');\\n  styleElement.type = 'text/css';\\n  head.appendChild(styleElement);\\n  return styleElement;\\n}\\n\\nfunction addStyle(obj /* StyleObjectPart */) {\\n  var update, remove;\\n  var styleElement = document.querySelector(\\n    'style[data-vue-ssr-id~=\\\"' + obj.id + '\\\"]'\\n  );\\n\\n  if (styleElement) {\\n    if (isProduction) {\\n      // has SSR styles and in production mode.\\n      // simply do nothing.\\n      return noop;\\n    } else {\\n      // has SSR styles but in dev mode.\\n      // for some reason Chrome can't handle source map in server-rendered\\n      // style tags - source maps in <style> only works if the style tag is\\n      // created and inserted dynamically. So we remove the server rendered\\n      // styles and inject new ones.\\n      styleElement.parentNode.removeChild(styleElement);\\n    }\\n  }\\n\\n  if (isOldIE) {\\n    // use singleton mode for IE9.\\n    var styleIndex = singletonCounter++;\\n    styleElement =\\n      singletonElement || (singletonElement = createStyleElement());\\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\\n  } else {\\n    // use multi-style-tag mode in all other cases\\n    styleElement = createStyleElement();\\n    update = applyToTag.bind(null, styleElement);\\n    remove = function() {\\n      styleElement.parentNode.removeChild(styleElement);\\n    };\\n  }\\n\\n  update(obj);\\n\\n  return function updateStyle(newObj /* StyleObjectPart */) {\\n    if (newObj) {\\n      if (\\n        newObj.css === obj.css &&\\n        newObj.media === obj.media &&\\n        newObj.sourceMap === obj.sourceMap\\n      ) {\\n        return;\\n      }\\n      update((obj = newObj));\\n    } else {\\n      remove();\\n    }\\n  };\\n}\\n\\nvar replaceText = (function() {\\n  var textStore = [];\\n\\n  return function(index, replacement) {\\n    textStore[index] = replacement;\\n    return textStore.filter(Boolean).join('\\\\n');\\n  };\\n})();\\n\\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\\n  var css = remove ? '' : obj.css;\\n\\n  if (styleElement.styleSheet) {\\n    styleElement.styleSheet.cssText = replaceText(index, css);\\n  } else {\\n    var cssNode = document.createTextNode(css);\\n    var childNodes = styleElement.childNodes;\\n    if (childNodes[index]) styleElement.removeChild(childNodes[index]);\\n    if (childNodes.length) {\\n      styleElement.insertBefore(cssNode, childNodes[index]);\\n    } else {\\n      styleElement.appendChild(cssNode);\\n    }\\n  }\\n}\\n\\nfunction applyToTag(styleElement, obj) {\\n  var css = obj.css;\\n  var media = obj.media;\\n  var sourceMap = obj.sourceMap;\\n\\n  if (media) {\\n    styleElement.setAttribute('media', media);\\n  }\\n\\n  if (sourceMap) {\\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\\n    // this makes source maps inside style tags work properly in Chrome\\n    css += '\\\\n/*# sourceURL=' + sourceMap.sources[0] + ' */';\\n    // http://stackoverflow.com/a/26603875\\n    css +=\\n      '\\\\n/*# sourceMappingURL=data:application/json;base64,' +\\n      btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) +\\n      ' */';\\n  }\\n\\n  if (styleElement.styleSheet) {\\n    styleElement.styleSheet.cssText = css;\\n  } else {\\n    while (styleElement.firstChild) {\\n      styleElement.removeChild(styleElement.firstChild);\\n    }\\n    styleElement.appendChild(document.createTextNode(css));\\n  }\\n}\\n\"","module.exports = \"/* eslint-disable */\\n/**\\n * Translates the list format produced by css-loader into something\\n * easier to manipulate.\\n */\\nmodule.exports = function listToStyles(parentId, list) {\\n  var styles = [];\\n  var newStyles = {};\\n  for (var i = 0; i < list.length; i++) {\\n    var item = list[i];\\n    var id = item[0];\\n    var css = item[1];\\n    var media = item[2];\\n    var sourceMap = item[3];\\n    var part = {\\n      id: parentId + ':' + i,\\n      css: css,\\n      media: media,\\n      sourceMap: sourceMap,\\n    };\\n    if (!newStyles[id]) {\\n      styles.push((newStyles[id] = { id: id, parts: [part] }));\\n    } else {\\n      newStyles[id].parts.push(part);\\n    }\\n  }\\n  return styles;\\n};\\n\"","module.exports = \"<link href=\\\"/static/fonts/inter/inter.css\\\" rel=\\\"stylesheet\\\">\\n<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter UI', sans-serif;\\n    background: transparent;\\n    -webkit-font-smoothing: antialiased;\\n  }\\n\\n  .container {\\n    display: flex;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    font-size: 0.8rem;\\n    width: 100%;\\n    font-weight: 400;\\n    margin-left: 1rem;\\n  }\\n\\n  .cube {\\n    transform: translate(-34px, 15px) scale(0.25, 0.25);\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    box-sizing: border-box;\\n    border: 10px solid rgba(0,0,0,0.7);\\n    border-radius: 8px;\\n    background: rgba(255, 255, 255, 0.6);\\n  }\\n\\n  @keyframes rotate {\\n    0% {\\n      transform: rotateX(-25.5deg) rotateY(45deg);\\n    }\\n\\n    100% {\\n      transform: rotateX(-25.5deg) rotateY(405deg);\\n    }\\n  }\\n\\n  .sides {\\n    animation: rotate 0.8s linear infinite;\\n    animation-fill-mode: forwards;\\n    transform-style: preserve-3d;\\n    transform: rotateX(-25.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    animation: top-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .bottom {\\n    animation: bottom-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(-90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .front {\\n    animation: front-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(0deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .back {\\n    animation: back-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-180deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .left {\\n    animation: left-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .right {\\n    animation: right-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(90deg) translateZ(44px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<link href=\\\"/static/fonts/inter/inter.css\\\" rel=\\\"stylesheet\\\">\\n<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter UI', sans-serif;\\n    background: #151515;\\n  }\\n\\n  .container {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    margin-top: 22rem;\\n    font-size: 1rem;\\n    width: 100%;\\n    font-weight: 200;\\n    text-align: center;\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    box-sizing: border-box;\\n    border: 0.12rem solid white;\\n    border-radius: 0.25rem;\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n\\n  @keyframes rotate {\\n    0% {\\n      transform: rotateX(-37.5deg) rotateY(45deg);\\n    }\\n    50% {\\n      transform: rotateX(-37.5deg) rotateY(405deg);\\n    }\\n    100% {\\n      transform: rotateX(-37.5deg) rotateY(405deg);\\n    }\\n  }\\n\\n  .sides {\\n    animation: rotate 3s ease infinite;\\n    animation-delay: 0.8s;\\n    transform-style: preserve-3d;\\n    transform: rotateX(-37.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    animation: top-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes top-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateX(90deg) translateZ(100px);\\n    }\\n  }\\n  .cube .sides .bottom {\\n    animation: bottom-animation 3s ease infinite;\\n    animation-delay: 0ms;\\n    transform: rotateX(-90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes bottom-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateX(-90deg) translateZ(100px);\\n    }\\n  }\\n  .cube .sides .front {\\n    animation: front-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(0deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes front-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(0deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .back {\\n    animation: back-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-180deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes back-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(-180deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .left {\\n    animation: left-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(-90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes left-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(-90deg) translateZ(96px);\\n    }\\n  }\\n  .cube .sides .right {\\n    animation: right-animation 3s ease infinite;\\n    animation-delay: 100ms;\\n    transform: rotateY(90deg) translateZ(96px);\\n    animation-fill-mode: forwards;\\n    transform-origin: 50% 50%;\\n  }\\n\\n  @keyframes right-animation {\\n    0% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n    20% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(48px);\\n    }\\n    70% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(48px);\\n    }\\n    90% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n    100% {\\n      opacity: 1;\\n      transform: rotateY(90deg) translateZ(96px);\\n    }\\n  }\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n  <div class=\\\"text\\\">Dowloading dependencies</div>\\n</div>\\n\"","module.exports = \"<link href=\\\"/static/fonts/inter/inter.css\\\" rel=\\\"stylesheet\\\" />\\n<style>\\n  body {\\n    color: #fff;\\n    font-family: 'Inter UI', sans-serif;\\n    background: #151515;\\n    cursor: pointer;\\n  }\\n\\n  .container {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex-direction: row;\\n  }\\n\\n  .text {\\n    margin-top: 24rem;\\n    font-size: 1rem;\\n    width: 100%;\\n    max-width: 400px;\\n    font-weight: 200;\\n    text-align: center;\\n  }\\n\\n  .cube,\\n  .cube * {\\n    position: absolute;\\n    width: 6rem;\\n    height: 6rem;\\n  }\\n  .cube .sides * {\\n    opacity: 0.1;\\n    box-sizing: border-box;\\n    border: 0.12rem solid white;\\n    border-radius: 0.25rem;\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n  .sides {\\n    transform-style: preserve-3d;\\n    transform: rotateX(-37.5deg) rotateY(45deg);\\n  }\\n\\n  .cube .sides .top {\\n    transform: rotateX(90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .bottom {\\n    transform: rotateX(-90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .front {\\n    transform: rotateY(0deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .back {\\n    transform: rotateY(-180deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n  .cube .sides .left {\\n    transform: rotateY(-90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .cube .sides .right {\\n    transform: rotateY(90deg) translateZ(48px);\\n    transform-origin: 50% 50%;\\n  }\\n\\n  .play {\\n    position: absolute;\\n    background-color: white;\\n    text-align: left;\\n  }\\n  .play:before,\\n  .play:after {\\n    content: '';\\n    position: absolute;\\n    background-color: inherit;\\n  }\\n  .play,\\n  .play:before,\\n  .play:after {\\n    width: 1rem;\\n    height: 1rem;\\n    border-top-right-radius: 30%;\\n  }\\n\\n  .play {\\n    transform: rotate(-90deg) skewX(-30deg) scale(1, 0.866);\\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.24);\\n  }\\n  .play:before {\\n    transform: rotate(-135deg) skewX(-45deg) scale(1.414, 0.707)\\n      translate(0, -50%);\\n  }\\n  .play:after {\\n    transform: rotate(135deg) skewY(-45deg) scale(0.707, 1.414) translate(50%);\\n  }\\n</style>\\n<div class=\\\"container\\\">\\n  <div class=\\\"cube\\\">\\n    <div class=\\\"sides\\\">\\n      <div class=\\\"top\\\"></div>\\n      <div class=\\\"right\\\"></div>\\n      <div class=\\\"bottom\\\"></div>\\n      <div class=\\\"left\\\"></div>\\n      <div class=\\\"front\\\"></div>\\n      <div class=\\\"back\\\"></div>\\n    </div>\\n  </div>\\n  <div class=\\\"play\\\"></div>\\n  <div class=\\\"text\\\">\\n    <h1>Aw, Snap?</h1>\\n    <div>\\n      We noticed that the sandbox didn't complete its last run. This could be\\n      because of some code that crashed the browser. We paused execution so you\\n      can check the code.\\n    </div>\\n    <div>Click to continue execution</div>\\n  </div>\\n</div>\\n\"","module.exports = function() {\n  return new Worker(\"/\" + \"babel-transpiler.7d55c3b9.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"coffee-transpiler.fa1985f2.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"less-transpiler.b0dad2a7.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"parcel-html-transpiler.74fc9ae2.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"pug-transpiler.08a72fc9.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"sass-transpiler.c13a863a.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"stylus-transpiler.802acbbd.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"svelte-transpiler.d84ba012.worker.js\");\n};","module.exports = function() {\n  return new Worker(\"/\" + \"typescript-transpiler.b07714ea.worker.js\");\n};","\"use strict\";\r\n// In production, we register a service worker to serve assets from local cache.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.unregister = void 0;\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\r\nconst isHttp = Boolean(window.location.protocol === 'http:');\r\nfunction register(swUrl, { onUpdated, onInstalled }) {\r\n    if ('serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        // @ts-ignore\r\n        const publicUrl = new URL(process.env.PUBLIC_URL || '/', window.location);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n            return;\r\n        }\r\n        // window.addEventListener('load', () => {\r\n        if (!isLocalhost && !isHttp) {\r\n            // It's neither localhost nor http. Just register service worker\r\n            registerValidSW(swUrl, { onUpdated, onInstalled });\r\n        }\r\n        else if (isLocalhost) {\r\n            // This is running on localhost. Lets check if a service worker still exists or not.\r\n            checkValidServiceWorker(swUrl, { onUpdated, onInstalled });\r\n        }\r\n        // });\r\n    }\r\n}\r\nexports.default = register;\r\nfunction registerValidSW(swUrl, { onUpdated, onInstalled, } = {}) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n        registration.onupdatefound = () => {\r\n            const installingWorker = registration.installing;\r\n            installingWorker.onstatechange = () => {\r\n                if (installingWorker.state === 'installed') {\r\n                    if (navigator.serviceWorker.controller) {\r\n                        // At this point, the old content will have been purged and\r\n                        // the fresh content will have been added to the cache.\r\n                        // It's the perfect time to display a \"New content is\r\n                        // available; please refresh.\" message in your web app.\r\n                        if (onUpdated) {\r\n                            onUpdated();\r\n                        }\r\n                    }\r\n                    else if (onInstalled) {\r\n                        // At this point, everything has been precached.\r\n                        // It's the perfect time to display a\r\n                        // \"Content is cached for offline use.\" message.\r\n                        onInstalled();\r\n                    }\r\n                }\r\n                else if (installingWorker.state === 'redundant') {\r\n                    if ('storage' in navigator && 'estimate' in navigator.storage) {\r\n                        navigator.storage.estimate().then(results => {\r\n                            const percentUsed = results.usage / results.quota;\r\n                            // Let's assume that if we're using 95% of our quota, then this failure\r\n                            // was due to quota exceeded errors.\r\n                            // TODO: Hardcoding a threshold stinks.\r\n                            if (percentUsed >= 0.95) {\r\n                                // Get rid of the existing SW so that we're not stuck\r\n                                // with the previously cached content.\r\n                                registration.unregister();\r\n                                // Let's assume that we have some way of doing this without inadvertantly\r\n                                // blowing away storage being used on the origin by something other than\r\n                                // our service worker.\r\n                                // I don't think that the Clear-Site-Data: header helps here, unfortunately.\r\n                                self.caches.keys().then(names => {\r\n                                    names.forEach(name => {\r\n                                        self.caches.delete(name);\r\n                                    });\r\n                                });\r\n                                // TODO clear indexeddb\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        // What about browsers that don't support navigator.storage.estimate()?\r\n                        // There's no way of guessing why the service worker is redundant.\r\n                    }\r\n                }\r\n            };\r\n        };\r\n    })\r\n        .catch(error => {\r\n        console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\nfunction checkValidServiceWorker(swUrl, { onUpdated, onInstalled }) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then(response => {\r\n        // Ensure service worker exists, and that we really are getting a JS file.\r\n        if (response.status === 404 ||\r\n            response.headers.get('content-type').indexOf('javascript') === -1) {\r\n            // No service worker found. Probably a different app. Reload the page.\r\n            navigator.serviceWorker.ready.then(registration => {\r\n                registration.unregister().then(() => {\r\n                    window.location.reload();\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            // Service worker found. Proceed as normal.\r\n            registerValidSW(swUrl, { onUpdated, onInstalled });\r\n        }\r\n    })\r\n        .catch(e => {\r\n        // eslint-disable-next-line no-console\r\n        console.log('No internet connection found. App is running in offline mode.', e);\r\n    });\r\n}\r\nfunction unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\nexports.unregister = unregister;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getAbsoluteDependencies = exports.isAbsoluteVersion = exports.fetchPackageJSON = void 0;\r\nfunction fetchWithRetries(url) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let err;\r\n        for (let i = 0; i < 5; i++) {\r\n            try {\r\n                // eslint-disable-next-line\r\n                return yield fetch(url).then(x => {\r\n                    if (x.ok) {\r\n                        return x.json();\r\n                    }\r\n                    throw new Error('Could not fetch ' + url);\r\n                });\r\n            }\r\n            catch (e) {\r\n                err = e;\r\n            }\r\n        }\r\n        throw err;\r\n    });\r\n}\r\nfunction fetchPackageJSON(dep, version) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            return fetchWithRetries(`https://cdn.jsdelivr.net/npm/${dep}@${encodeURIComponent(version)}/package.json`);\r\n        }\r\n        catch (e) {\r\n            return fetchWithRetries(`https://unpkg.com/${dep}@${encodeURIComponent(version)}/package.json`);\r\n        }\r\n    });\r\n}\r\nexports.fetchPackageJSON = fetchPackageJSON;\r\nfunction isAbsoluteVersion(version) {\r\n    const isAbsolute = /^\\d+\\.\\d+\\.\\d+$/.test(version);\r\n    return isAbsolute || /\\//.test(version);\r\n}\r\nexports.isAbsoluteVersion = isAbsoluteVersion;\r\nfunction getAbsoluteDependencies(dependencies) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const nonAbsoluteDependencies = Object.keys(dependencies).filter(dep => !isAbsoluteVersion(dependencies[dep]));\r\n        const newDependencies = Object.assign({}, dependencies);\r\n        yield Promise.all(nonAbsoluteDependencies.map((dep) => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const data = yield fetchPackageJSON(dep, dependencies[dep]);\r\n                newDependencies[dep] = data.version;\r\n            }\r\n            catch (e) {\r\n                /* ignore */\r\n            }\r\n        })));\r\n        return newDependencies;\r\n    });\r\n}\r\nexports.getAbsoluteDependencies = getAbsoluteDependencies;\r\n","// @flow\nimport { actions, dispatch } from 'codesandbox-api';\nimport SandboxError from './sandbox-error';\n\nexport default class DependencyNotFoundError extends SandboxError {\n  constructor(dependencyName: string, fromPath: ?string) {\n    super();\n    this.path = dependencyName;\n\n    const [root, second] = dependencyName.split('/');\n\n    // If the package starts with a @ it's scoped, we should add the second\n    // part of the name in that case\n    const parsedName = root.startsWith('@') ? `${root}/${second}` : root;\n    this.suggestions = [\n      {\n        title: `Add ${parsedName} as dependency`,\n        action: () => {\n          dispatch(actions.source.dependencies.add(parsedName));\n        },\n      },\n    ];\n\n    this.name = 'DependencyNotFoundError';\n    this.message = `Could not find dependency: '${parsedName}'`;\n\n    if (fromPath) {\n      this.message += ` relative to '${fromPath}'`;\n    }\n  }\n  type = 'dependency-not-found';\n  severity = 'error';\n  path: string;\n}\n","// @flow\nimport { dispatch, actions } from 'codesandbox-api';\nimport { getCurrentManager } from 'app/src/sandbox/compile';\nimport type TranspiledModule from 'app/src/sandbox/eval/transpiled-module';\n\nimport type { ErrorRecord } from 'sandbox-hooks/react-error-overlay/utils/errorRegister';\n\ntype TModuleError = Error & {\n  hideLine?: boolean,\n  line?: number,\n  path?: Object,\n  severity?: string,\n  payload?: Object,\n  tModule?: TranspiledModule,\n};\n\nfunction buildErrorMessage(e: TModuleError) {\n  const title = e.name;\n  const message = e.message;\n  let line = null;\n  let column = null;\n  if (!e.hideLine) {\n    // Safari\n    if (e.line != null) {\n      line = e.line;\n\n      // FF\n    } else if (e.lineNumber != null) {\n      line = e.lineNumber;\n\n      // Chrome\n    } else if (e.stack) {\n      const matched = e.stack.match(/<anonymous>:(\\d+):(\\d+)/);\n      if (matched) {\n        line = matched[1];\n        column = matched[2];\n      } else {\n        // Maybe it's a babel transpiler error\n        const babelMatched = e.stack.match(/(\\d+):(\\d+)/);\n        if (babelMatched) {\n          line = babelMatched[1];\n          column = babelMatched[2];\n        }\n      }\n    }\n  }\n\n  return {\n    path: e.tModule ? e.tModule.module.path : e.path,\n    title,\n    message,\n    line: parseInt(line, 10),\n    column: parseInt(column, 10),\n    payload: e.payload || {},\n    severity: e.severity || 'error',\n  };\n}\n\nconst wrappedResolveModule = (manager, path) => {\n  try {\n    return manager && manager.resolveTranspiledModule(path, '/');\n  } catch (e) {\n    return null;\n  }\n};\n\nfunction buildDynamicError(ref: ErrorRecord) {\n  // TODO remove this logic for the SSE handler, move it to something more generic\n  // like a file store\n  const manager = getCurrentManager();\n\n  const relevantFrame = ref.enhancedFrames.find(r =>\n    wrappedResolveModule(\n      manager,\n      (r._originalFileName || r.fileName || '')\n        .replace(location.origin, '')\n        .replace('file://', '')\n    )\n  );\n\n  if (relevantFrame && manager) {\n    const fileName = relevantFrame._originalFileName || relevantFrame.fileName;\n    if (fileName) {\n      const tModule = manager.resolveTranspiledModule(\n        fileName.replace(location.origin, '').replace('file://', ''),\n        '/'\n      );\n\n      if (tModule) {\n        const module = tModule.module;\n        return {\n          type: 'action',\n          action: 'show-error',\n          path: module.parent ? module.parent.path : module.path,\n          title: ref.error.name,\n          message: ref.error.message,\n          line: relevantFrame._originalLineNumber,\n          column: relevantFrame._originalColumnNumber,\n          payload: {},\n          severity: 'error',\n        };\n      }\n    }\n  } else {\n    const error: TModuleError = ref.error;\n    const tModule =\n      error.tModule ||\n      wrappedResolveModule(\n        manager,\n        (error.fileName || '')\n          .replace(location.origin, '')\n          .replace('file://', '')\n      );\n\n    if (tModule) {\n      const newError = {\n        ...buildErrorMessage(error),\n        path: error.fileName,\n        type: 'action',\n        action: 'show-error',\n      };\n\n      return newError;\n    }\n  }\n\n  return null;\n}\n\n/* eslint-disable no-underscore-dangle */\nexport default function showError(ref: ErrorRecord) {\n  const errorToSend = buildDynamicError(ref);\n\n  if (errorToSend) {\n    dispatch(\n      actions.error.show(errorToSend.title, errorToSend.message, {\n        line: errorToSend.line,\n        column: errorToSend.column,\n        path: errorToSend.path,\n        payload: errorToSend.payload,\n      })\n    );\n  } else {\n    // Show based on error\n    actions.error.show(ref.error.name, ref.error.message, {\n      line: ref.error.lineNumber,\n      column: ref.error.columnNumber,\n      path: ref.error.fileName,\n      payload: {},\n    });\n  }\n}\n","// @flow\n\nimport SandboxError from './sandbox-error';\n\nexport default class ModuleNotFoundError extends SandboxError {\n  constructor(path: string, isDependency: boolean, currentPath?: string) {\n    super();\n    this.path = path;\n    this.isDependency = isDependency;\n\n    this.name = 'ModuleNotFoundError';\n    this.message = `Could not find module in path: '${path}'`;\n\n    if (currentPath) {\n      this.message += ` relative to '${currentPath}'`;\n    }\n  }\n  type = 'module-not-found';\n  severity = 'error';\n  path: string;\n  isDependency: boolean;\n}\n","// @flow\nimport type { Module } from '@codesandbox/common/lib/types';\n\ntype Suggestion = {\n  title: string,\n  action: Function,\n};\nconst ErrorClass = Error;\n\nexport default class SandboxError extends ErrorClass {\n  severity: 'error' | 'warning';\n  type: string;\n  module: Module;\n  payload: ?Object;\n  suggestions: Array<Suggestion>;\n\n  suggestions = [];\n\n  constructor(error: ?Error) {\n    super(error ? error.message : null);\n\n    if (error) {\n      this.fileName = error.fileName;\n      this.description = error.description;\n      this.message = error.message;\n      this.name = error.name;\n      this.stack = error.stack;\n      this.number = error.number;\n    }\n  }\n}\n","import { registerErrorTransformer } from 'codesandbox-api';\n\nimport rawReactErrorTransformer from './raw-react-component-error';\n\nconst transformers = [rawReactErrorTransformer];\n\nexport default function registerErrorTransformers() {\n  transformers.forEach(t => registerErrorTransformer(t));\n}\n","import { actions, dispatch } from 'codesandbox-api';\n\nimport { basename } from '@codesandbox/common/lib/utils/path';\n\nfunction findRawModule(module) {\n  const rawModule = Array.from(module.dependencies).find(\n    m => !/\\.([\\w]{2}|[\\w]{3})$/.test(m.module.path)\n  );\n\n  if (rawModule) {\n    return [module, rawModule];\n  }\n\n  // The error is thrown at the root, so we check for children components\n  return Array.from(module.dependencies).reduce((foundResult, m) => {\n    // We already found it, immediately return\n    if (foundResult) return foundResult;\n\n    return findRawModule(m);\n  }, null);\n}\n\n/**\n * This transformer detects raw imports used as React component, when the module\n * is missing a file extension\n *\n * @export\n * @param {Error} error\n * @param {any} module\n * @returns\n */\nexport default function(error: Error, module) {\n  if (\n    error.message.includes(\n      \"Failed to execute 'createElement' on 'Document': The tag name provided \"\n    )\n  ) {\n    const result = findRawModule(module);\n\n    if (result) {\n      const [sourceModule, rawModule] = result;\n      return {\n        name: 'Raw import',\n        message: `It seems like '${basename(\n          sourceModule.module.path\n        )}' is importing a raw module (${basename(rawModule.module.path)})`,\n        suggestions: [\n          {\n            title: `Rename ${basename(rawModule.module.path)} to ${basename(\n              rawModule.module.path\n            )}.js`,\n            action: () => {\n              dispatch(\n                actions.source.modules.rename(\n                  rawModule.module.path,\n                  `${basename(rawModule.module.path)}.js`\n                )\n              );\n            },\n          },\n        ],\n      };\n    }\n  }\n\n  return null;\n}\n","import { createOverlay } from './overlay-manager';\nimport { requestPreviewSecretFromApp } from '../preview-secret';\n\nconst HTML = `\n<style>\nbody {\n  font-family: \"Roboto\", sans-serif;\n  background-color: #1d2022;\n  width: 100vw;\n  height: 100vh;\n  -webkit-font-smoothing: antialiased;\n  -moz-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-smoothing: antialiased;\n  text-rendering: optimizeLegibility;\n  font-smooth: always;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n  min-height: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.4;\n  overflow: hidden;\n}\n\n.container {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  margin: 0 auto;\n  max-width: 530px;\n  height: 100%;\n}\n\n.title {\n  color: #efefef;\n  font-size: 3rem;\n  width: 100%;\n  font-weight: 600;\n  text-align: center;\n  margin-bottom: 1rem;\n}\n.description {\n  color: #eeeeee;\n  font-size: 1.5rem;\n  width: 100%;\n  font-weight: 300;\n  text-align: center;\n  margin-top: 0;\n}\n\nbutton {\n  text-decoration: none;\n  color: #40a9f3;\n  outline: none;\n  border: none;\n  background: transparent;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  font-size: 1em;\n}\n</style>\n\n<div class=\"container\">\n<h1 class=\"title\">404</h1>\n<p class=\"description\">\n  We could not find the sandbox youre looking for, did you try\n  <button id=\"sign-in-button\">signing in</button>?\n</p>\n</div>\n`;\n\nexport async function show404(sandboxId) {\n  const windowRef = await createOverlay(HTML);\n\n  windowRef.contentDocument.getElementById('sign-in-button').onclick = () => {\n    requestPreviewSecretFromApp(sandboxId);\n  };\n}\n","let iframeReference = null;\n\nexport function resetOverlay() {\n  try {\n    window.document.body.removeChild(iframeReference);\n    iframeReference = null;\n  } catch (e) {\n    /* nothing */\n  }\n}\n\nfunction createIframe() {\n  return new Promise(resolve => {\n    if (iframeReference) {\n      resolve(iframeReference);\n    }\n\n    const iframe = document.createElement('iframe');\n\n    iframe.setAttribute(\n      'style',\n      `position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 214748366;`\n    );\n    iframe.setAttribute('id', 'frame');\n\n    iframeReference = iframe;\n\n    document.body.appendChild(iframe);\n\n    if (iframe.contentDocument) {\n      resolve(iframe);\n    } else if (document.getElementById('not-found-frame')) {\n      document.getElementById('not-found-frame').onload = () => {\n        resolve(iframe);\n      };\n    } else {\n      resolve(iframe);\n    }\n  });\n}\n\nexport async function createOverlay(html) {\n  const iframe = await createIframe();\n\n  const isMounted = !!document.getElementById('not-found-frame');\n  if (!isMounted) {\n    document.body.appendChild(iframe);\n  }\n\n  iframe.contentDocument.body.innerHTML = html;\n\n  return iframe;\n}\n","import { protocolAndHost } from '@codesandbox/common/lib/utils/url-generator';\n\nconst PREVIEW_SECRET_COOKIE_NAME = 'csb_sandbox_secret';\n\nexport const getPreviewSecret = () =>\n  document.cookie.replace(\n    new RegExp(\n      `(?:(?:^|.*;\\\\s*)${PREVIEW_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`\n    ),\n    '$1'\n  );\n\nexport const setPreviewSecret = secret => {\n  if (secret === null) {\n    return;\n  }\n\n  const cookieValue = getPreviewSecret();\n  if (\n    (cookieValue && !secret) ||\n    (secret && !cookieValue) ||\n    cookieValue !== secret\n  ) {\n    if (secret) {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n      location.reload();\n    } else {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  }\n};\n\nexport const listenForPreviewSecret = () => {\n  const listener = data => {\n    if (data.data && data.data.$type === 'preview-secret') {\n      const { previewSecret } = data.data;\n      setPreviewSecret(previewSecret);\n    }\n  };\n\n  window.addEventListener('message', listener);\n\n  return () => {\n    window.removeEventListener('message', listener);\n  };\n};\n\nfunction getPopupOffset({ width, height }) {\n  const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n  const wTop = window.screenTop ? window.screenTop : window.screenY;\n\n  const left = wLeft + window.innerWidth / 2 - width / 2;\n  const top = wTop + window.innerHeight / 2 - height / 2;\n\n  return { top, left };\n}\n\nfunction getPopupSize() {\n  return { width: 1020, height: 618 };\n}\n\nfunction getPopupDimensions() {\n  const { width, height } = getPopupSize();\n  const { top, left } = getPopupOffset({ width, height });\n\n  return `width=${width},height=${height},top=${top},left=${left}`;\n}\n\n/**\n * This helper function is purely there to also work when we're building\n * for SSE, which means that the env vars are not set and we thus don't\n * know the host.\n */\nfunction getProtocolAndHostWithSSE() {\n  if (process.env.CODESANDBOX_HOST) {\n    return protocolAndHost();\n  }\n\n  if (document.location.host.endsWith('.stream')) {\n    return 'https://codesandbox.stream';\n  }\n\n  return 'https://codesandbox.io';\n}\n\nexport const requestPreviewSecretFromApp = sandboxId => {\n  const host = getProtocolAndHostWithSSE();\n  const popup = window.open(\n    host + '/auth/sandbox/' + sandboxId,\n    name,\n    `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`\n  );\n\n  setInterval(() => {\n    popup.postMessage({ $type: 'request-preview-secret' }, host);\n  }, 500);\n\n  const listener = e => {\n    if (e.data && e.data.$type === 'preview-secret') {\n      setPreviewSecret(e.data.previewSecret);\n      window.removeEventListener('message', listener);\n\n      popup.close();\n    }\n  };\n  window.addEventListener('message', listener);\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport {\n  additionalChildStyle,\n  groupElemLeft,\n  groupElemRight,\n  groupStyle,\n} from '../styles';\nimport { consumeEvent } from '../utils/dom/consumeEvent';\nimport { applyStyles } from '../utils/dom/css';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\n\ntype SwitchCallback = (offset: number) => void;\nfunction updateAdditional(\n  document: Document,\n  additionalReference: HTMLDivElement,\n  currentError: number,\n  totalErrors: number,\n  switchCallback: SwitchCallback\n) {\n  if (additionalReference.lastChild) {\n    additionalReference.removeChild(additionalReference.lastChild);\n  }\n\n  if (totalErrors <= 1) {\n    return;\n  }\n\n  const div = document.createElement('div');\n  applyStyles(div, additionalChildStyle);\n\n  const group = document.createElement('span');\n  applyStyles(group, groupStyle);\n\n  const left = document.createElement('button');\n  applyStyles(left, groupElemLeft);\n  left.addEventListener('click', function(e: MouseEvent) {\n    consumeEvent(e);\n    switchCallback(-1);\n  });\n  left.appendChild(document.createTextNode(''));\n  enableTabClick(left);\n\n  const right = document.createElement('button');\n  applyStyles(right, groupElemRight);\n  right.addEventListener('click', function(e: MouseEvent) {\n    consumeEvent(e);\n    switchCallback(1);\n  });\n  right.appendChild(document.createTextNode(''));\n  enableTabClick(right);\n\n  group.appendChild(left);\n  group.appendChild(right);\n  div.appendChild(group);\n\n  const text = `${currentError} of ${totalErrors} errors on the page`;\n  div.appendChild(document.createTextNode(text));\n\n  additionalReference.appendChild(div);\n}\n\nexport type { SwitchCallback };\nexport { updateAdditional };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { closeButtonStyle, hintsStyle, hintStyle } from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createHint(document: Document, hint: string, title: string) {\n  const span = document.createElement('span');\n  span.appendChild(document.createTextNode(hint));\n  span.setAttribute('title', title);\n  applyStyles(span, hintStyle);\n  return span;\n}\n\ntype CloseCallback = () => void;\nfunction createClose(document: Document, callback: CloseCallback) {\n  const hints = document.createElement('div');\n  applyStyles(hints, hintsStyle);\n\n  const close = createHint(document, '', 'Click or press Escape to dismiss.');\n  close.addEventListener('click', () => callback());\n  applyStyles(close, closeButtonStyle);\n  hints.appendChild(close);\n  return hints;\n}\n\nexport type { CloseCallback };\nexport { createClose };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { ScriptLine } from '../utils/stack-frame';\nimport codeFrame from 'babel-code-frame';\nimport generateAnsiHtml from 'react-dev-utils/ansiHTML';\nimport {\n  codeStyle,\n  primaryErrorStyle,\n  primaryPreStyle,\n  secondaryErrorStyle,\n  secondaryPreStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createCode(\n  document: Document,\n  sourceLines: ScriptLine[],\n  lineNum: number,\n  columnNum: number | null,\n  contextSize: number,\n  main: boolean,\n  onSourceClick: ?Function\n) {\n  const sourceCode = [];\n  let whiteSpace = Infinity;\n  sourceLines.forEach(function(e) {\n    const { content: text } = e;\n    const m = text.match(/^\\s*/);\n    if (text === '') {\n      return;\n    }\n    if (m && m[0]) {\n      whiteSpace = Math.min(whiteSpace, m[0].length);\n    } else {\n      whiteSpace = 0;\n    }\n  });\n  sourceLines.forEach(function(e) {\n    let { content: text } = e;\n    const { lineNumber: line } = e;\n\n    if (isFinite(whiteSpace)) {\n      text = text.substring(whiteSpace);\n    }\n    sourceCode[line - 1] = text;\n  });\n  const ansiHighlight = codeFrame(\n    sourceCode.join('\\n'),\n    lineNum,\n    columnNum == null ? 0 : columnNum - (isFinite(whiteSpace) ? whiteSpace : 0),\n    {\n      forceColor: true,\n      linesAbove: contextSize,\n      linesBelow: contextSize,\n    }\n  );\n  const htmlHighlight = generateAnsiHtml(ansiHighlight);\n  const code = document.createElement('code');\n  code.innerHTML = htmlHighlight;\n  applyStyles(code, codeStyle);\n\n  const ccn = code.childNodes;\n  // eslint-disable-next-line\n  oLoop: for (let index = 0; index < ccn.length; ++index) {\n    const node = ccn[index];\n    const ccn2 = node.childNodes;\n    for (let index2 = 0; index2 < ccn2.length; ++index2) {\n      const lineNode = ccn2[index2];\n      const text = lineNode.innerText;\n      if (text == null) {\n        continue;\n      }\n      if (text.indexOf(' ' + lineNum + ' |') === -1) {\n        continue;\n      }\n      // $FlowFixMe\n      applyStyles(node, main ? primaryErrorStyle : secondaryErrorStyle);\n      // eslint-disable-next-line\n      break oLoop;\n    }\n  }\n  const pre = document.createElement('pre');\n  applyStyles(pre, main ? primaryPreStyle : secondaryPreStyle);\n  pre.appendChild(code);\n\n  if (typeof onSourceClick === 'function') {\n    let handler = onSourceClick;\n    pre.style.cursor = 'pointer';\n    pre.addEventListener('click', function() {\n      handler();\n    });\n  }\n\n  return pre;\n}\n\nexport { createCode };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { footerStyle } from '../styles';\nimport { applyStyles } from '../utils/dom/css';\n\nfunction createFooter(document: Document) {\n  const div = document.createElement('div');\n  applyStyles(div, footerStyle);\n  div.appendChild(\n    document.createTextNode(\n      'This screen is visible only in development. It will not appear if the app crashes in production.'\n    )\n  );\n  div.appendChild(document.createElement('br'));\n  div.appendChild(\n    document.createTextNode(\n      'Open your browsers developer console to further inspect this error.'\n    )\n  );\n  div.appendChild(document.createElement('br'));\n  div.appendChild(\n    document.createTextNode(\n      'This error overlay is powered by `react-error-overlay` used in `create-react-app`.'\n    )\n  );\n  return div;\n}\n\nexport { createFooter };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { getCurrentManager } from 'app/src/sandbox/compile';\nimport { actions, dispatch } from 'codesandbox-api';\nimport {\n  anchorStyle,\n  depStyle,\n  functionNameStyle,\n  hiddenStyle,\n  linkStyle,\n  omittedFramesCollapsedStyle,\n  omittedFramesExpandedStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\nimport { isInternalFile } from '../utils/isInternalFile';\nimport { createCode } from './code';\nimport type { StackFrame } from '../utils/stack-frame';\nimport type { FrameSetting, OmitsObject } from './frames';\n\nfunction getGroupToggle(\n  document: Document,\n  omitsCount: number,\n  omitBundle: number\n) {\n  const omittedFrames = document.createElement('div');\n  enableTabClick(omittedFrames);\n  const text1 = document.createTextNode(\n    '\\u25B6 ' + omitsCount + ' stack frames were collapsed.'\n  );\n  omittedFrames.appendChild(text1);\n  omittedFrames.addEventListener('click', function() {\n    const hide = text1.textContent.match(//);\n    const list = document.getElementsByName('bundle-' + omitBundle);\n    for (let index = 0; index < list.length; ++index) {\n      const n = list[index];\n      if (hide) {\n        n.style.display = 'none';\n      } else {\n        n.style.display = '';\n      }\n    }\n    if (hide) {\n      text1.textContent = text1.textContent.replace(//, '');\n      text1.textContent = text1.textContent.replace(/expanded/, 'collapsed');\n      applyStyles(omittedFrames, omittedFramesCollapsedStyle);\n    } else {\n      text1.textContent = text1.textContent.replace(//, '');\n      text1.textContent = text1.textContent.replace(/collapsed/, 'expanded');\n      applyStyles(omittedFrames, omittedFramesExpandedStyle);\n    }\n  });\n  applyStyles(omittedFrames, omittedFramesCollapsedStyle);\n  return omittedFrames;\n}\n\nfunction insertBeforeBundle(\n  document: Document,\n  parent: Node,\n  omitsCount: number,\n  omitBundle: number,\n  actionElement\n) {\n  const children = document.getElementsByName('bundle-' + omitBundle);\n  if (children.length < 1) {\n    return;\n  }\n  let first: ?Node = children[0];\n  while (first != null && first.parentNode !== parent) {\n    first = first.parentNode;\n  }\n  const div = document.createElement('div');\n  enableTabClick(div);\n  div.setAttribute('name', 'bundle-' + omitBundle);\n  const text = document.createTextNode(\n    '\\u25BC ' + omitsCount + ' stack frames were expanded.'\n  );\n  div.appendChild(text);\n  div.addEventListener('click', function() {\n    return actionElement.click();\n  });\n  applyStyles(div, omittedFramesExpandedStyle);\n  div.style.display = 'none';\n\n  parent.insertBefore(div, first);\n}\n\nfunction frameDiv(\n  document: Document,\n  functionName,\n  url,\n  internalUrl,\n  onSourceClick: ?Function\n) {\n  const frame = document.createElement('div');\n  const frameFunctionName = document.createElement('div');\n\n  let cleanedFunctionName;\n  if (!functionName || functionName === 'Object.<anonymous>') {\n    cleanedFunctionName = '(anonymous function)';\n  } else {\n    cleanedFunctionName = functionName;\n  }\n\n  const cleanedUrl = url.replace('webpack://', '.');\n\n  if (internalUrl) {\n    applyStyles(\n      frameFunctionName,\n      Object.assign({}, functionNameStyle, depStyle)\n    );\n  } else {\n    applyStyles(frameFunctionName, functionNameStyle);\n  }\n\n  frameFunctionName.appendChild(document.createTextNode(cleanedFunctionName));\n  frame.appendChild(frameFunctionName);\n\n  const frameLink = document.createElement('div');\n  applyStyles(frameLink, linkStyle);\n  const frameAnchor = document.createElement('a');\n  applyStyles(frameAnchor, anchorStyle);\n  frameAnchor.appendChild(document.createTextNode(cleanedUrl));\n  frameLink.appendChild(frameAnchor);\n  frame.appendChild(frameLink);\n\n  if (typeof onSourceClick === 'function') {\n    let handler = onSourceClick;\n    enableTabClick(frameAnchor);\n    frameAnchor.style.cursor = 'pointer';\n    frameAnchor.addEventListener('click', function() {\n      handler();\n    });\n  }\n\n  return frame;\n}\n\nfunction isBultinErrorName(errorName: ?string) {\n  switch (errorName) {\n    case 'EvalError':\n    case 'InternalError':\n    case 'RangeError':\n    case 'ReferenceError':\n    case 'SyntaxError':\n    case 'TypeError':\n    case 'URIError':\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction getPrettyURL(\n  sourceFileName: ?string,\n  sourceLineNumber: ?number,\n  sourceColumnNumber: ?number,\n  fileName: ?string,\n  lineNumber: ?number,\n  columnNumber: ?number,\n  compiled: boolean\n): string {\n  let prettyURL;\n  if (!compiled && sourceFileName && typeof sourceLineNumber === 'number') {\n    // Remove everything up to the first /src/ or /node_modules/\n    const trimMatch = /^[/|\\\\].*?[/|\\\\]((src|node_modules)[/|\\\\].*)/.exec(\n      sourceFileName\n    );\n    if (trimMatch && trimMatch[1]) {\n      prettyURL = trimMatch[1];\n    } else {\n      prettyURL = sourceFileName;\n    }\n    prettyURL += ':' + sourceLineNumber;\n    // Note: we intentionally skip 0's because they're produced by cheap Webpack maps\n    if (sourceColumnNumber) {\n      prettyURL += ':' + sourceColumnNumber;\n    }\n  } else if (fileName && typeof lineNumber === 'number') {\n    prettyURL = fileName + ':' + lineNumber;\n    // Note: we intentionally skip 0's because they're produced by cheap Webpack maps\n    if (columnNumber) {\n      prettyURL += ':' + columnNumber;\n    }\n  } else {\n    prettyURL = 'unknown';\n  }\n  return prettyURL;\n}\n\nfunction createFrame(\n  document: Document,\n  frameSetting: FrameSetting,\n  frame: StackFrame,\n  contextSize: number,\n  critical: boolean,\n  omits: OmitsObject,\n  omitBundle: number,\n  parentContainer: HTMLDivElement,\n  lastElement: boolean,\n  errorName: ?string\n) {\n  const { compiled } = frameSetting;\n  let { functionName, _originalFileName: sourceFileName } = frame;\n  const {\n    fileName,\n    lineNumber,\n    columnNumber,\n    _scriptCode: scriptLines,\n    _originalLineNumber: sourceLineNumber,\n    _originalColumnNumber: sourceColumnNumber,\n    _originalScriptCode: sourceLines,\n  } = frame;\n\n  // TODO: find a better place for this.\n  // Chrome has a bug with inferring function.name:\n  // https://github.com/facebookincubator/create-react-app/issues/2097\n  // Let's ignore a meaningless name we get for top-level modules.\n  if (\n    functionName === 'Object.friendlySyntaxErrorLabel' ||\n    functionName === 'Object.exports.__esModule'\n  ) {\n    functionName = '(anonymous function)';\n  }\n\n  const prettyURL = getPrettyURL(\n    sourceFileName,\n    sourceLineNumber,\n    sourceColumnNumber,\n    fileName,\n    lineNumber,\n    columnNumber,\n    compiled\n  );\n\n  let needsHidden = false;\n  const isInternalUrl = isInternalFile(sourceFileName, fileName);\n  const isThrownIntentionally = !isBultinErrorName(errorName);\n  const shouldCollapse =\n    isInternalUrl && (isThrownIntentionally || omits.hasReachedAppCode);\n\n  if (!isInternalUrl) {\n    omits.hasReachedAppCode = true;\n  }\n\n  if (shouldCollapse) {\n    ++omits.value;\n    needsHidden = true;\n  }\n\n  let collapseElement = null;\n  if (!shouldCollapse || lastElement) {\n    if (omits.value > 0) {\n      const capV = omits.value;\n      const omittedFrames = getGroupToggle(document, capV, omitBundle);\n      window.requestAnimationFrame(() => {\n        insertBeforeBundle(\n          document,\n          parentContainer,\n          capV,\n          omitBundle,\n          omittedFrames\n        );\n      });\n      if (lastElement && shouldCollapse) {\n        collapseElement = omittedFrames;\n      } else {\n        parentContainer.appendChild(omittedFrames);\n      }\n      ++omits.bundle;\n    }\n    omits.value = 0;\n  }\n\n  let onSourceClick = null;\n  if (sourceFileName) {\n    // e.g. \"/path-to-my-app/webpack/bootstrap eaddeb46b67d75e4dfc1\"\n    const isInternalWebpackBootstrapCode =\n      sourceFileName.trim().indexOf(' ') !== -1;\n    if (!isInternalWebpackBootstrapCode) {\n      onSourceClick = () => {\n        const manager = getCurrentManager();\n        if (manager) {\n          const tModule = manager.resolveTranspiledModule(\n            sourceFileName.replace(location.origin, '').replace('file://', ''),\n            '/'\n          );\n\n          dispatch(\n            actions.editor.openModule(\n              // A module has a parent when it has been generated by a module,\n              // Vue is an example of this: SFC's generate submodules\n              tModule.module.parent\n                ? tModule.module.parent.path\n                : tModule.module.path,\n              window.encodeURIComponent(sourceLineNumber || 1)\n            )\n          );\n        }\n      };\n    }\n  }\n\n  const elem = frameDiv(\n    document,\n    functionName,\n    prettyURL,\n    shouldCollapse,\n    onSourceClick\n  );\n  if (needsHidden) {\n    applyStyles(elem, hiddenStyle);\n    elem.setAttribute('name', 'bundle-' + omitBundle);\n  }\n\n  let hasSource = false;\n  if (!shouldCollapse) {\n    if (\n      compiled &&\n      scriptLines &&\n      scriptLines.length !== 0 &&\n      lineNumber != null\n    ) {\n      elem.appendChild(\n        createCode(\n          document,\n          scriptLines,\n          lineNumber,\n          columnNumber,\n          contextSize,\n          critical,\n          onSourceClick\n        )\n      );\n      hasSource = true;\n    } else if (\n      !compiled &&\n      sourceLines &&\n      sourceLines.length !== 0 &&\n      sourceLineNumber != null\n    ) {\n      elem.appendChild(\n        createCode(\n          document,\n          sourceLines,\n          sourceLineNumber,\n          sourceColumnNumber,\n          contextSize,\n          critical,\n          onSourceClick\n        )\n      );\n      hasSource = true;\n    }\n  }\n\n  return { elem: elem, hasSource: hasSource, collapseElement: collapseElement };\n}\n\nexport { createFrame };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { StackFrame } from '../utils/stack-frame';\nimport { applyStyles } from '../utils/dom/css';\nimport { traceStyle, toggleStyle } from '../styles';\nimport { enableTabClick } from '../utils/dom/enableTabClick';\nimport { createFrame } from './frame';\n\ntype OmitsObject = {\n  value: number,\n  bundle: number,\n  hasReachedAppCode: boolean,\n};\ntype FrameSetting = { compiled: boolean };\nexport type { OmitsObject, FrameSetting };\n\nfunction createFrameWrapper(\n  document: Document,\n  parent: HTMLDivElement,\n  factory,\n  lIndex: number,\n  frameSettings: FrameSetting[],\n  contextSize: number\n) {\n  const fac = factory();\n  if (fac == null) {\n    return;\n  }\n  const { hasSource, elem, collapseElement } = fac;\n\n  const elemWrapper = document.createElement('div');\n  elemWrapper.appendChild(elem);\n\n  if (hasSource) {\n    const compiledDiv = document.createElement('div');\n    enableTabClick(compiledDiv);\n    applyStyles(compiledDiv, toggleStyle);\n\n    const o = frameSettings[lIndex];\n    const compiledText = document.createTextNode(\n      'View ' + (o && o.compiled ? 'source' : 'compiled')\n    );\n    compiledDiv.addEventListener('click', function() {\n      if (o) {\n        o.compiled = !o.compiled;\n      }\n\n      const next = createFrameWrapper(\n        document,\n        parent,\n        factory,\n        lIndex,\n        frameSettings,\n        contextSize\n      );\n      if (next != null) {\n        parent.insertBefore(next, elemWrapper);\n        parent.removeChild(elemWrapper);\n      }\n    });\n    compiledDiv.appendChild(compiledText);\n    elemWrapper.appendChild(compiledDiv);\n  }\n\n  if (collapseElement != null) {\n    elemWrapper.appendChild(collapseElement);\n  }\n\n  return elemWrapper;\n}\n\nfunction createFrames(\n  document: Document,\n  resolvedFrames: StackFrame[],\n  frameSettings: FrameSetting[],\n  contextSize: number,\n  errorName: ?string\n) {\n  if (resolvedFrames.length !== frameSettings.length) {\n    throw new Error(\n      'You must give a frame settings array of identical length to resolved frames.'\n    );\n  }\n  const trace = document.createElement('div');\n  applyStyles(trace, traceStyle);\n\n  let index = 0;\n  let critical = true;\n  const omits: OmitsObject = { value: 0, bundle: 1, hasReachedAppCode: false };\n  resolvedFrames.forEach(function(frame) {\n    const lIndex = index++;\n    const elem = createFrameWrapper(\n      document,\n      trace,\n      createFrame.bind(\n        undefined,\n        document,\n        frameSettings[lIndex],\n        frame,\n        contextSize,\n        critical,\n        omits,\n        omits.bundle,\n        trace,\n        index === resolvedFrames.length,\n        errorName\n      ),\n      lIndex,\n      frameSettings,\n      contextSize\n    );\n    if (elem == null) {\n      return;\n    }\n    critical = false;\n    trace.appendChild(elem);\n  });\n  //TODO: fix this\n  omits.value = 0;\n\n  return trace;\n}\n\nexport { createFrames };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { areActionsEnabled } from 'app/src/sandbox/compile';\nimport {\n  containerStyle,\n  headerStyle,\n  messageHeaderStyle,\n  originalHeaderStyle,\n  originalMessageHeaderStyle,\n  overlayStyle,\n} from '../styles';\nimport { applyStyles } from '../utils/dom/css';\nimport { updateAdditional } from './additional';\nimport { createClose } from './close';\nimport { createFooter } from './footer';\nimport { createFrames } from './frames';\nimport { createSuggestions } from './suggestions';\nimport type { CloseCallback } from './close';\nimport type { StackFrame } from '../utils/stack-frame';\nimport type { FrameSetting } from './frames';\nimport type { SwitchCallback } from './additional';\n\nfunction createOverlay(\n  document: Document,\n  error: Error,\n  name: ?string,\n  message: string,\n  frames: StackFrame[],\n  contextSize: number,\n  currentError: number,\n  totalErrors: number,\n  switchCallback: SwitchCallback,\n  closeCallback: CloseCallback\n): {\n  overlay: HTMLDivElement,\n  additional: HTMLDivElement,\n} {\n  const frameSettings: FrameSetting[] = frames.map(() => ({ compiled: false }));\n  // Create overlay\n  const overlay = document.createElement('div');\n  applyStyles(overlay, overlayStyle);\n\n  // Create container\n  const container = document.createElement('div');\n  applyStyles(container, containerStyle);\n  overlay.appendChild(container);\n  container.appendChild(createClose(document, closeCallback));\n\n  // Create \"Errors X of Y\" in case of multiple errors\n  const additional = document.createElement('div');\n  updateAdditional(\n    document,\n    additional,\n    currentError,\n    totalErrors,\n    switchCallback\n  );\n  container.appendChild(additional);\n\n  // Create header\n  const header = document.createElement('div');\n  applyStyles(header, headerStyle);\n\n  const messageHeader = document.createElement('div');\n  applyStyles(messageHeader, messageHeaderStyle);\n\n  // Make message prettier\n  let finalMessage = message;\n\n  finalMessage = finalMessage\n    // TODO: maybe remove this prefix from fbjs?\n    // It's just scaring people\n    .replace(/^Invariant Violation:\\s*/, '')\n    // This is not helpful either:\n    .replace(/^Warning:\\s*/, '')\n    // Break the actionable part to the next line.\n    // AFAIK React 16+ should already do this.\n    .replace(' Check the render method', '\\n\\nCheck the render method')\n    .replace(' Check your code at', '\\n\\nCheck your code at');\n\n  // Put it in the DOM\n  header.appendChild(document.createTextNode(name || ''));\n  messageHeader.appendChild(document.createTextNode(finalMessage));\n\n  container.appendChild(header);\n  container.appendChild(messageHeader);\n\n  // If the error has been transformed\n  if (error.originalName || error.originalMessage) {\n    const originalErrorContainer = document.createElement('div');\n    const errorHeader = document.createElement('div');\n    applyStyles(errorHeader, originalHeaderStyle);\n    errorHeader.appendChild(document.createTextNode('Original error:'));\n    originalErrorContainer.appendChild(errorHeader);\n\n    // Create header\n    const originalMessageHeader = document.createElement('div');\n    applyStyles(originalMessageHeader, originalMessageHeaderStyle);\n\n    originalMessageHeader.appendChild(\n      document.createTextNode(\n        `${error.originalName || ''}: ${error.originalMessage}`\n      )\n    );\n\n    originalErrorContainer.appendChild(originalMessageHeader);\n    messageHeader.appendChild(originalErrorContainer);\n  }\n\n  if (\n    areActionsEnabled() &&\n    error.suggestions &&\n    error.suggestions.length > 0\n  ) {\n    container.appendChild(createSuggestions(error));\n  }\n\n  // Create trace\n  container.appendChild(\n    createFrames(document, frames, frameSettings, contextSize, name)\n  );\n\n  // Show message\n  container.appendChild(createFooter(document));\n\n  return {\n    overlay,\n    additional,\n  };\n}\n\nexport { createOverlay };\n","import { applyStyles } from '../utils/dom/css';\nimport {\n  suggestionsContainerStyle,\n  suggestionsTitleStyle,\n  suggestionsButtonStyle,\n} from '../styles';\n\nexport function createSuggestions(error: SandboxError) {\n  const container = document.createElement('div');\n\n  applyStyles(container, suggestionsContainerStyle);\n\n  const title = document.createElement('div');\n  title.appendChild(document.createTextNode('Suggested solutions:'));\n  applyStyles(title, suggestionsTitleStyle);\n  container.appendChild(title);\n\n  error.suggestions.forEach(suggestion => {\n    const button = document.createElement('button');\n    button.appendChild(document.createTextNode(suggestion.title));\n    button.setAttribute('onmouseover', 'this.style.backgroundColor=\"#78CDF7\"');\n    button.setAttribute(\n      'onmouseout',\n      `this.style.backgroundColor=\"${suggestionsButtonStyle['background-color']}\"`\n    );\n    applyStyles(button, suggestionsButtonStyle);\n\n    button.addEventListener('click', e => {\n      e.preventDefault();\n      suggestion.action();\n    });\n\n    container.appendChild(button);\n  });\n\n  return container;\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/* @flow */\n\ntype ReactFrame = {\n  fileName: string | null,\n  lineNumber: number | null,\n  name: string | null,\n};\nconst reactFrameStack: Array<ReactFrame[]> = [];\n\nexport type { ReactFrame };\n\n// This is a stripped down barebones version of this proposal:\n// https://gist.github.com/sebmarkbage/bdefa100f19345229d526d0fdd22830f\n// We're implementing just enough to get the invalid element type warnings\n// to display the component stack in React 15.6+:\n// https://github.com/facebook/react/pull/9679\n// / TODO: a more comprehensive implementation.\n\nconst registerReactStack = () => {\n  if (typeof console !== 'undefined') {\n    // $FlowFixMe\n    console.reactStack = frames => reactFrameStack.push(frames);\n    // $FlowFixMe\n    console.reactStackEnd = frames => reactFrameStack.pop();\n  }\n};\n\nconst unregisterReactStack = () => {\n  if (typeof console !== 'undefined') {\n    // $FlowFixMe\n    console.reactStack = undefined;\n    // $FlowFixMe\n    console.reactStackEnd = undefined;\n  }\n};\n\ntype ConsoleProxyCallback = (message: string, frames: ReactFrame[]) => void;\nconst permanentRegister = function proxyConsole(\n  type: string,\n  callback: ConsoleProxyCallback\n) {\n  if (typeof console !== 'undefined') {\n    const orig = console[type];\n    if (typeof orig === 'function') {\n      console[type] = function __stack_frame_overlay_proxy_console__() {\n        try {\n          const message = arguments[0];\n          if (typeof message === 'string' && reactFrameStack.length > 0) {\n            callback(message, reactFrameStack[reactFrameStack.length - 1]);\n          }\n        } catch (err) {\n          // Warnings must never crash. Rethrow with a clean stack.\n          setTimeout(function() {\n            throw err;\n          });\n        }\n        return orig.apply(this, arguments);\n      };\n    }\n  }\n};\n\nexport { permanentRegister, registerReactStack, unregisterReactStack };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nlet stackTraceRegistered: boolean = false;\n// Default: https://docs.microsoft.com/en-us/scripting/javascript/reference/stacktracelimit-property-error-javascript\nlet restoreStackTraceValue: number = 10;\n\nconst MAX_STACK_LENGTH: number = 50;\n\nfunction registerStackTraceLimit(limit: number = MAX_STACK_LENGTH) {\n  if (stackTraceRegistered) {\n    return;\n  }\n  try {\n    restoreStackTraceValue = Error.stackTraceLimit;\n    Error.stackTraceLimit = limit;\n    stackTraceRegistered = true;\n  } catch (e) {\n    // Not all browsers support this so we don't care if it errors\n  }\n}\n\nfunction unregisterStackTraceLimit() {\n  if (!stackTraceRegistered) {\n    return;\n  }\n  try {\n    Error.stackTraceLimit = restoreStackTraceValue;\n    stackTraceRegistered = false;\n  } catch (e) {\n    // Not all browsers support this so we don't care if it errors\n  }\n}\n\nexport {\n  registerStackTraceLimit as register,\n  unregisterStackTraceLimit as unregister,\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nlet boundErrorHandler = null;\n\ntype ErrorCallback = (error: Error) => void;\n\nfunction errorHandler(callback: ErrorCallback, e: Event): void {\n  if (!e.error) {\n    return;\n  }\n  // $FlowFixMe\n  const { error } = e;\n  if (error instanceof Error) {\n    callback(error);\n  } else {\n    // A non-error was thrown, we don't have a trace. :(\n    // Look in your browser's devtools for more information\n    callback(new Error(error));\n  }\n}\n\nfunction registerUnhandledError(target: EventTarget, callback: ErrorCallback) {\n  if (boundErrorHandler !== null) {\n    // Always add the listener, in case we rewrote the window\n    target.addEventListener('error', boundErrorHandler);\n    return;\n  }\n  boundErrorHandler = errorHandler.bind(undefined, callback);\n}\n\nfunction unregisterUnhandledError(target: EventTarget) {\n  if (boundErrorHandler === null) {\n    return;\n  }\n  target.removeEventListener('error', boundErrorHandler);\n  boundErrorHandler = null;\n}\n\nexport {\n  registerUnhandledError as register,\n  unregisterUnhandledError as unregister,\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nlet boundRejectionHandler = null;\n\ntype ErrorCallback = (error: Error) => void;\n\nfunction rejectionHandler(\n  callback: ErrorCallback,\n  e: PromiseRejectionEvent\n): void {\n  if (e == null || e.reason == null) {\n    return callback(new Error('Unknown'));\n  }\n  const { reason } = e;\n  if (reason instanceof Error) {\n    return callback(reason);\n  }\n  // A non-error was rejected, we don't have a trace :(\n  // Look in your browser's devtools for more information\n  return callback(new Error(reason));\n}\n\nfunction registerUnhandledRejection(\n  target: EventTarget,\n  callback: ErrorCallback\n) {\n  if (boundRejectionHandler !== null) {\n    // Always add the listener, in case we rewrote the window\n    // $FlowFixMe\n    target.addEventListener('unhandledrejection', boundRejectionHandler);\n    return;\n  }\n  boundRejectionHandler = rejectionHandler.bind(undefined, callback);\n}\n\nfunction unregisterUnhandledRejection(target: EventTarget) {\n  if (boundRejectionHandler === null) {\n    return;\n  }\n  // $FlowFixMe\n  target.removeEventListener('unhandledrejection', boundRejectionHandler);\n  boundRejectionHandler = null;\n}\n\nexport {\n  registerUnhandledRejection as register,\n  unregisterUnhandledRejection as unregister,\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  register as registerError,\n  unregister as unregisterError,\n} from './effects/unhandledError';\nimport {\n  register as registerPromise,\n  unregister as unregisterPromise,\n} from './effects/unhandledRejection';\nimport {\n  register as registerStackTraceLimit,\n  unregister as unregisterStackTraceLimit,\n} from './effects/stackTraceLimit';\nimport {\n  permanentRegister as permanentRegisterConsole,\n  registerReactStack,\n  unregisterReactStack,\n} from './effects/proxyConsole';\nimport { massage as massageWarning } from './utils/warnings';\nimport getStackFrames from './utils/getStackFrames';\n\nimport type { StackFrame } from './utils/stack-frame';\n\nconst CONTEXT_SIZE: number = 3;\n\nexport type ErrorRecord = {|\n  error: Error,\n  unhandledRejection: boolean,\n  contextSize: number,\n  stackFrames: StackFrame[],\n|};\n\nexport const crashWithFrames = (crash: ErrorRecord => void) => (\n  error: Error,\n  unhandledRejection = false\n) => {\n  getStackFrames(error, unhandledRejection, CONTEXT_SIZE)\n    .then(stackFrames => {\n      crash({\n        error,\n        unhandledRejection,\n        contextSize: CONTEXT_SIZE,\n        stackFrames,\n      });\n    })\n    .catch(e => {\n      console.log('Could not get the stack frames of error:', e);\n    });\n};\n\nexport function listenToRuntimeErrors(\n  crash: ErrorRecord => void,\n  filename: string = '/static/js/bundle.js'\n) {\n  const crashWithFramesRunTime = crashWithFrames(crash);\n\n  registerError(window, error => crashWithFramesRunTime(error, false));\n  registerPromise(window, error => crashWithFramesRunTime(error, true));\n  registerStackTraceLimit();\n  registerReactStack();\n  permanentRegisterConsole('error', (warning, stack) => {\n    const data = massageWarning(warning, stack);\n    crashWithFramesRunTime(\n      // $FlowFixMe\n      {\n        message: data.message,\n        stack: data.stack,\n        __unmap_source: filename,\n      },\n      false\n    );\n  });\n\n  return function stopListening() {\n    unregisterStackTraceLimit();\n    unregisterPromise(window);\n    unregisterError(window);\n    unregisterReactStack();\n  };\n}\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport { transformError } from 'codesandbox-api';\nimport { getCurrentManager } from 'app/src/sandbox/compile';\n\nimport { listenToRuntimeErrors } from './listenToRuntimeErrors';\n\nimport {\n  consume as consumeError,\n  getErrorRecord,\n  drain as drainErrors,\n} from './utils/errorRegister';\nimport type { ErrorRecordReference } from './utils/errorRegister';\n\nimport type { StackFrame } from './utils/stack-frame';\nimport { iframeStyle } from './styles';\nimport { applyStyles } from './utils/dom/css';\nimport { createOverlay } from './components/overlay';\nimport { updateAdditional } from './components/additional';\n\nimport buildError from '../errors';\n\nconst CONTEXT_SIZE: number = 3;\nlet iframeReference: HTMLIFrameElement | null = null;\nlet additionalReference = null;\nlet errorReferences: ErrorRecordReference[] = [];\nlet currReferenceIndex: number = -1;\n\nfunction render(\n  name: ?string,\n  message: string,\n  resolvedFrames: StackFrame[],\n  error\n) {\n  disposeCurrentView();\n\n  const iframe = window.document.createElement('iframe');\n  applyStyles(iframe, iframeStyle);\n  iframeReference = iframe;\n  iframe.onload = () => {\n    if (iframeReference == null) {\n      return;\n    }\n    const w = iframeReference.contentWindow;\n    const document = iframeReference.contentDocument;\n\n    const { overlay, additional } = createOverlay(\n      document,\n      error,\n      name,\n      message,\n      resolvedFrames,\n      CONTEXT_SIZE,\n      currReferenceIndex + 1,\n      errorReferences.length,\n      offset => {\n        switchError(offset);\n      },\n      () => {\n        unmount();\n      }\n    );\n    if (w != null) {\n      w.onkeydown = event => {\n        keyEventHandler(type => shortcutHandler(type), event);\n      };\n    }\n    if (document.body != null) {\n      document.body.style.margin = '0';\n      // Keep popup within body boundaries for iOS Safari\n      // $FlowFixMe\n      document.body.style['max-width'] = '100vw';\n\n      (document.body: any).appendChild(overlay);\n    }\n    additionalReference = additional;\n  };\n  window.document.body.appendChild(iframe);\n}\n\nfunction renderErrorByIndex(index: number) {\n  currReferenceIndex = index;\n\n  const { error, unhandledRejection, enhancedFrames } = getErrorRecord(\n    errorReferences[index]\n  );\n\n  if (unhandledRejection) {\n    render(\n      'Unhandled Rejection (' + error.name + ')',\n      error.message,\n      enhancedFrames,\n      error\n    );\n  } else {\n    render(error.name, error.message, enhancedFrames, error);\n  }\n}\n\nfunction switchError(offset) {\n  if (errorReferences.length === 0) {\n    return;\n  }\n\n  let nextView = currReferenceIndex + offset;\n\n  if (nextView < 0) {\n    nextView = errorReferences.length - 1;\n  } else if (nextView >= errorReferences.length) {\n    nextView = 0;\n  }\n\n  renderErrorByIndex(nextView);\n}\n\nfunction disposeCurrentView(force: boolean) {\n  // CodeSandbox already resets this, only do this if force is on\n  if (force) {\n    if (iframeReference == null) {\n      return;\n    }\n    try {\n      window.document.body.removeChild(iframeReference);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  iframeReference = null;\n  additionalReference = null;\n}\n\nfunction unmount(force: boolean = true) {\n  disposeCurrentView(force);\n  drainErrors();\n  errorReferences = [];\n  currReferenceIndex = -1;\n}\n\nfunction sendErrorsToEditor() {\n  errorReferences.forEach(ref => {\n    const error = getErrorRecord(ref);\n    buildError(error);\n  });\n}\n\n/**\n * Transforms the error with give transformers to codesandbox-api, this adds\n * suggestions and can alter the error name + message.\n */\nfunction transformErrors() {\n  const manager = getCurrentManager();\n  if (manager) {\n    errorReferences.forEach(ref => {\n      const errRef = getErrorRecord(ref);\n\n      const relevantFrame = errRef.enhancedFrames.find(r => {\n        try {\n          return (\n            manager &&\n            !!manager.resolveTranspiledModule(\n              (r._originalFileName || r.fileName || '').replace(\n                location.origin,\n                ''\n              ),\n              '/'\n            )\n          );\n        } catch (e) {\n          /* don't do anything */\n          return false;\n        }\n      });\n\n      let { tModule } = errRef.error;\n\n      if (!tModule && relevantFrame) {\n        const fileName =\n          relevantFrame._originalFileName || relevantFrame.fileName || '';\n        tModule = manager.resolveTranspiledModule(\n          fileName.replace(location.origin, ''),\n          '/'\n        );\n      }\n\n      if (!tModule) {\n        return;\n      }\n\n      try {\n        const transformation = transformError(\n          errRef.error,\n          tModule,\n          manager.getTranspiledModules()\n        );\n\n        if (transformation) {\n          const newError = new Error(transformation.name || errRef.error.name);\n          newError.message = transformation.message;\n          newError.suggestions = transformation.suggestions;\n          newError.originalName = errRef.error.name;\n          newError.originalMessage = errRef.error.message;\n          errRef.error = newError;\n        }\n      } catch (ex) {\n        /* just catch */\n        console.error(ex);\n      }\n    });\n  }\n}\n\nfunction crash(error: Error, unhandledRejection = false) {\n  if (module.hot && typeof module.hot.decline === 'function') {\n    module.hot.decline();\n  }\n\n  consumeError(error, unhandledRejection, CONTEXT_SIZE)\n    .then(ref => {\n      if (ref == null) {\n        return;\n      }\n\n      errorReferences.push(ref);\n\n      sendErrorsToEditor();\n      transformErrors();\n      if (iframeReference !== null && additionalReference !== null) {\n        updateAdditional(\n          iframeReference.contentDocument,\n          additionalReference,\n          currReferenceIndex + 1,\n          errorReferences.length,\n          offset => {\n            switchError(offset);\n          }\n        );\n      } else {\n        if (errorReferences.length !== 1) {\n          throw new Error('Something is *really* wrong.');\n        }\n        renderErrorByIndex((currReferenceIndex = 0));\n      }\n    })\n    .catch(e => {\n      console.log('Could not consume error:', e);\n    });\n}\n\nfunction shortcutHandler(type: string) {\n  switch (type) {\n    case SHORTCUT_ESCAPE: {\n      unmount();\n      break;\n    }\n    case SHORTCUT_LEFT: {\n      switchError(-1);\n      break;\n    }\n    case SHORTCUT_RIGHT: {\n      switchError(1);\n      break;\n    }\n    default: {\n      // TODO: this\n      break;\n    }\n  }\n}\n\nlet listenToRuntimeErrorsUnmounter;\n\nfunction inject() {\n  listenToRuntimeErrorsUnmounter = listenToRuntimeErrors(error => {\n    crash(error.error);\n  });\n}\n\nfunction uninject() {\n  if (listenToRuntimeErrorsUnmounter) {\n    listenToRuntimeErrorsUnmounter();\n  }\n  unmount();\n}\n\nexport { inject, uninject, unmount };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nconst black = '#293238',\n  darkGray = '#878e91',\n  red = '#ce1126',\n  redTransparent = 'rgba(206, 17, 38, 0.05)',\n  lightRed = '#fccfcf',\n  yellow = '#fbf5b4',\n  yellowTransparent = 'rgba(251, 245, 180, 0.3)',\n  whiteTranslucent = 'rgba(244, 244, 244, 0.9)';\n\nconst iframeStyle = {\n  position: 'fixed',\n  top: '0',\n  left: '0',\n  width: '100%',\n  height: '100%',\n  border: 'none',\n  'z-index': 2147483647 - 1, // below the compile error overlay\n};\n\nconst overlayStyle = {\n  width: '100%',\n  height: '100%',\n  'box-sizing': 'border-box',\n  'text-align': 'center',\n  'background-color': whiteTranslucent,\n  '-webkit-font-smoothing': 'antialiased',\n  '-moz-font-smoothing': 'antialiased',\n  '-moz-osx-font-smoothing': 'grayscale',\n  'font-smoothing': 'antialiased',\n  'text-rendering': 'optimizeLegibility',\n  'font-smooth': 'always',\n  '-webkit-tap-highlight-color': 'transparent',\n  '-webkit-touch-callout': 'none',\n};\n\nconst containerStyle = {\n  position: 'relative',\n  display: 'inline-flex',\n  'flex-direction': 'column',\n  height: '100%',\n  width: '1024px',\n  'max-width': '100%',\n  'overflow-x': 'hidden',\n  'overflow-y': 'auto',\n  padding: '0.5rem',\n  'box-sizing': 'border-box',\n  'text-align': 'left',\n  'font-family': 'Consolas, Menlo, monospace',\n  'font-size': '11px',\n  'white-space': 'pre-wrap',\n  'word-break': 'break-word',\n  'line-height': 1.5,\n  color: black,\n};\n\nconst hintsStyle = {\n  color: darkGray,\n};\n\nconst hintStyle = {\n  padding: '0.5em 1em',\n  cursor: 'pointer',\n};\n\nconst closeButtonStyle = {\n  color: black,\n  'line-height': '1rem',\n  'font-size': '1.5rem',\n  padding: '1rem',\n  cursor: 'pointer',\n  position: 'absolute',\n  right: 0,\n  top: 0,\n};\n\nconst additionalChildStyle = {\n  'margin-bottom': '0.5rem',\n};\n\nconst headerStyle = {\n  'font-size': '2em',\n  'font-family': 'Roboto, sans-serif',\n  color: red,\n  'white-space': 'pre-wrap',\n  // Top bottom margin spaces header\n  // Right margin revents overlap with close button\n  margin: '0 2rem 0.5rem 0',\n  flex: '0 0 auto',\n  'max-height': '50%',\n  overflow: 'auto',\n  'font-weight': '400',\n};\n\nconst messageHeaderStyle = {\n  ...headerStyle,\n  color: 'black',\n  'font-weight': '300',\n  'font-size': '1.5em',\n  'font-family': 'Consolas, Menlo, monospace',\n  margin: 0,\n  'padding-bottom': '1rem',\n  'border-bottom': '1px solid #ddd',\n};\n\nconst originalHeaderStyle = {\n  color: 'rgba(0, 0, 0, 0.7)',\n  'font-size': '.75em',\n  'padding-top': '1rem',\n  'padding-bottom': '.5rem',\n};\n\nconst originalMessageHeaderStyle = {\n  color: 'black',\n  'font-size': '.875em',\n  'font-family': 'Consolas, Menlo, monospace',\n  margin: 0,\n  'white-space': 'pre-wrap',\n  overflow: 'auto',\n};\n\nconst functionNameStyle = {};\n\nconst linkStyle = {\n  'font-size': '0.9em',\n  'margin-bottom': '0.9em',\n};\n\nconst anchorStyle = {\n  'text-decoration': 'none',\n  color: darkGray,\n};\n\nconst traceStyle = {\n  'font-size': '1em',\n  flex: '0 1 auto',\n  'min-height': '0px',\n  overflow: 'auto',\n  'padding-top': '1rem',\n};\n\nconst depStyle = {};\n\nconst primaryErrorStyle = {\n  'background-color': lightRed,\n};\n\nconst secondaryErrorStyle = {\n  'background-color': yellow,\n};\n\nconst omittedFramesCollapsedStyle = {\n  color: black,\n  cursor: 'pointer',\n  'margin-bottom': '1.5em',\n};\n\nconst omittedFramesExpandedStyle = {\n  color: black,\n  cursor: 'pointer',\n  'margin-bottom': '0.6em',\n};\n\nconst _preStyle = {\n  display: 'block',\n  padding: '0.5em',\n  'margin-top': '0.5em',\n  'margin-bottom': '0.5em',\n  'overflow-x': 'auto',\n  'white-space': 'pre-wrap',\n  'border-radius': '0.25rem',\n};\nconst primaryPreStyle = Object.assign({}, _preStyle, {\n  'background-color': redTransparent,\n});\nconst secondaryPreStyle = Object.assign({}, _preStyle, {\n  'background-color': yellowTransparent,\n});\n\nconst toggleStyle = {\n  'margin-bottom': '1.5em',\n  color: darkGray,\n  cursor: 'pointer',\n};\n\nconst codeStyle = {\n  'font-family': 'Consolas, Menlo, monospace',\n};\n\nconst hiddenStyle = {\n  display: 'none',\n};\n\nconst groupStyle = {\n  'margin-right': '1em',\n};\n\nconst _groupElemStyle = {\n  'background-color': redTransparent,\n  color: red,\n  border: 'none',\n  'border-radius': '4px',\n  padding: '3px 6px',\n  cursor: 'pointer',\n};\n\nconst groupElemLeft = Object.assign({}, _groupElemStyle, {\n  'border-top-right-radius': '0px',\n  'border-bottom-right-radius': '0px',\n  'margin-right': '1px',\n});\n\nconst groupElemRight = Object.assign({}, _groupElemStyle, {\n  'border-top-left-radius': '0px',\n  'border-bottom-left-radius': '0px',\n});\n\nconst footerStyle = {\n  'font-family': 'sans-serif',\n  color: darkGray,\n  'margin-top': '0.5rem',\n  flex: '0 0 auto',\n};\n\nconst suggestionsContainerStyle = {\n  'font-family': 'Roboto, sans-serif',\n  'padding-top': '1rem',\n};\n\nconst suggestionsTitleStyle = {\n  'font-size': '1rem',\n  'font-weight': '300',\n};\n\nconst suggestionsButtonStyle = {\n  transition: '0.3s ease all',\n  'background-color': '#B6E7FF',\n  color: 'rgba(0, 0, 0, 0.6)',\n  padding: '0.5rem',\n  margin: '.5rem 0',\n  'margin-bottom': '.5rem',\n  'font-size': '.75rem',\n  'border-radius': '4px',\n  'margin-right': '.5rem',\n  border: '1px solid #6CAEDD',\n  cursor: 'pointer',\n};\n\nexport {\n  containerStyle,\n  iframeStyle,\n  overlayStyle,\n  hintsStyle,\n  hintStyle,\n  closeButtonStyle,\n  additionalChildStyle,\n  headerStyle,\n  messageHeaderStyle,\n  functionNameStyle,\n  linkStyle,\n  anchorStyle,\n  traceStyle,\n  depStyle,\n  primaryErrorStyle,\n  primaryPreStyle,\n  secondaryErrorStyle,\n  secondaryPreStyle,\n  omittedFramesCollapsedStyle,\n  omittedFramesExpandedStyle,\n  originalHeaderStyle,\n  originalMessageHeaderStyle,\n  toggleStyle,\n  codeStyle,\n  hiddenStyle,\n  groupStyle,\n  groupElemLeft,\n  groupElemRight,\n  footerStyle,\n  suggestionsContainerStyle,\n  suggestionsTitleStyle,\n  suggestionsButtonStyle,\n};\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction consumeEvent(e: Event) {\n  e.preventDefault();\n  if (typeof e.target.blur === 'function') {\n    e.target.blur();\n  }\n}\n\nexport { consumeEvent };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nlet injectedCount = 0;\nconst injectedCache = {};\n\nfunction getHead(document: Document) {\n  return document.head || document.getElementsByTagName('head')[0];\n}\n\nfunction injectCss(document: Document, css: string): number {\n  const head = getHead(document);\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  style.appendChild(document.createTextNode(css));\n  head.appendChild(style);\n\n  injectedCache[++injectedCount] = style;\n  return injectedCount;\n}\n\nfunction removeCss(document: Document, ref: number) {\n  if (injectedCache[ref] == null) {\n    return;\n  }\n  const head = getHead(document);\n  head.removeChild(injectedCache[ref]);\n  delete injectedCache[ref];\n}\n\nfunction applyStyles(element: HTMLElement, styles: Object) {\n  element.setAttribute('style', '');\n  for (const key in styles) {\n    if (!styles.hasOwnProperty(key)) {\n      continue;\n    }\n    // $FlowFixMe\n    element.style[key] = styles[key];\n  }\n}\n\nexport { getHead, injectCss, removeCss, applyStyles };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction enableTabClick(node: Element) {\n  node.setAttribute('tabindex', '0');\n  node.addEventListener('keydown', function(e: KeyboardEvent) {\n    const { key, which, keyCode } = e;\n    if (key === 'Enter' || which === 13 || keyCode === 13) {\n      e.preventDefault();\n      if (typeof e.target.click === 'function') {\n        e.target.click();\n      }\n    }\n  });\n}\n\nexport { enableTabClick };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nimport type { StackFrame } from './stack-frame';\nimport { parse } from './parser';\nimport { map } from './mapper';\nimport { unmap } from './unmapper';\n\nexport type ErrorRecord = {\n  error: Error,\n  unhandledRejection: boolean,\n  contextSize: number,\n  enhancedFrames: StackFrame[],\n};\ntype ErrorRecordReference = number;\nconst recorded: ErrorRecord[] = [];\n\nlet errorsConsumed: ErrorRecordReference = 0;\n\nfunction consume(\n  error: Error,\n  unhandledRejection: boolean = false,\n  contextSize: number = 3\n): Promise<ErrorRecordReference | null> {\n  const parsedFrames = parse(error);\n  let enhancedFramesPromise;\n  if (error.__unmap_source) {\n    enhancedFramesPromise = unmap(\n      // $FlowFixMe\n      error.__unmap_source,\n      parsedFrames,\n      contextSize\n    );\n  } else {\n    enhancedFramesPromise = map(parsedFrames, contextSize);\n  }\n  return enhancedFramesPromise.then(enhancedFrames => {\n    // // We comment this out, because we always want to show errors\n    // if (\n    //   enhancedFrames\n    //     .map(f => f._originalFileName)\n    //     .filter(f => f != null && f.indexOf('node_modules') === -1).length === 0\n    // ) {\n    //   return null;\n    // }\n    enhancedFrames = enhancedFrames.filter(\n      ({ functionName }) =>\n        functionName == null ||\n        functionName.indexOf('__stack_frame_overlay_proxy_console__') === -1\n    );\n    recorded[++errorsConsumed] = {\n      error,\n      unhandledRejection,\n      contextSize,\n      enhancedFrames,\n    };\n    return errorsConsumed;\n  });\n}\n\nfunction getErrorRecord(ref: ErrorRecordReference): ErrorRecord {\n  return recorded[ref];\n}\n\nfunction drain() {\n  // $FlowFixMe\n  const keys = Object.keys(recorded);\n  for (let index = 0; index < keys.length; ++index) {\n    delete recorded[keys[index]];\n  }\n}\n\nexport { consume, getErrorRecord, drain };\nexport type { ErrorRecordReference };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\nimport { ScriptLine } from './stack-frame';\n\n/**\n *\n * @param {number} line The line number to provide context around.\n * @param {number} count The number of lines you'd like for context.\n * @param {string[] | string} lines The source code.\n */\nfunction getLinesAround(\n  line: number,\n  count: number,\n  lines: string[] | string\n): ScriptLine[] {\n  if (typeof lines === 'string') {\n    lines = lines.split('\\n');\n  }\n  const result = [];\n  for (\n    let index = Math.max(0, line - 1 - count);\n    index <= Math.min(lines.length - 1, line - 1 + count);\n    ++index\n  ) {\n    result.push(new ScriptLine(index + 1, lines[index], index === line - 1));\n  }\n  return result;\n}\n\nexport { getLinesAround };\nexport default getLinesAround;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\nimport { SourceMapConsumer } from 'source-map';\n\n/**\n * A wrapped instance of a <code>{@link https://github.com/mozilla/source-map SourceMapConsumer}</code>.\n *\n * This exposes methods which will be indifferent to changes made in <code>{@link https://github.com/mozilla/source-map source-map}</code>.\n */\nexport class SourceMap {\n  __source_map: SourceMapConsumer;\n\n  constructor(sourceMap) {\n    this.__source_map = sourceMap;\n  }\n\n  /**\n   * Returns the original code position for a generated code position.\n   * @param {number} line The line of the generated code position.\n   * @param {number} column The column of the generated code position.\n   */\n  getOriginalPosition(\n    line: number,\n    column: number\n  ): { source: string, line: number, column: number } {\n    const {\n      line: l,\n      column: c,\n      source: s,\n    } = this.__source_map.originalPositionFor({\n      line,\n      column,\n    });\n    return { line: l, column: c, source: s };\n  }\n\n  /**\n   * Returns the generated code position for an original position.\n   * @param {string} source The source file of the original code position.\n   * @param {number} line The line of the original code position.\n   * @param {number} column The column of the original code position.\n   */\n  getGeneratedPosition(\n    source: string,\n    line: number,\n    column: number\n  ): { line: number, column: number } {\n    const { line: l, column: c } = this.__source_map.generatedPositionFor({\n      source,\n      line,\n      column,\n    });\n    return {\n      line: l,\n      column: c,\n    };\n  }\n\n  /**\n   * Returns the code for a given source file name.\n   * @param {string} sourceName The name of the source file.\n   */\n  getSource(sourceName: string): string {\n    return this.__source_map.sourceContentFor(sourceName);\n  }\n\n  getSources(): string[] {\n    return this.__source_map.sources;\n  }\n}\n\nfunction extractSourceMapUrl(fileUri: string, fileContents: string) {\n  const regex = /\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/gm;\n  let match = null;\n  for (;;) {\n    let next = regex.exec(fileContents);\n    if (next == null) {\n      break;\n    }\n    match = next;\n  }\n  if (!(match && match[1])) {\n    return Promise.reject(`Cannot find a source map directive for ${fileUri}.`);\n  }\n  return Promise.resolve(match[1].toString());\n}\n\n/**\n * Returns an instance of <code>{@link SourceMap}</code> for a given fileUri and fileContents.\n * @param {string} fileUri The URI of the source file.\n * @param {string} fileContents The contents of the source file.\n */\nasync function getSourceMap(\n  fileUri: string,\n  fileContents: string\n): Promise<SourceMap> {\n  let sm = await extractSourceMapUrl(fileUri, fileContents);\n  if (sm.indexOf('data:') === 0) {\n    const base64 = /^data:application\\/json;([\\w=:\"-]+;)*base64,/;\n    const match2 = sm.match(base64);\n    if (!match2) {\n      throw new Error(\n        'Sorry, non-base64 inline source-map encoding is not supported.'\n      );\n    }\n    sm = sm.substring(match2[0].length);\n    sm = window.atob(sm);\n    sm = JSON.parse(sm);\n    return new SourceMap(new SourceMapConsumer(sm));\n  } else {\n    const index = fileUri.lastIndexOf('/');\n    const url = fileUri.substring(0, index + 1) + sm;\n    const obj = await fetch(url).then(res => res.json());\n    return new SourceMap(new SourceMapConsumer(obj));\n  }\n}\n\nexport { extractSourceMapUrl, getSourceMap };\nexport default getSourceMap;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/* @flow */\nimport type { StackFrame } from './stack-frame';\nimport { parse } from './parser';\nimport { map } from './mapper';\nimport { unmap } from './unmapper';\n\nfunction getStackFrames(\n  error: Error,\n  unhandledRejection: boolean = false,\n  contextSize: number = 3\n): Promise<StackFrame[] | null> {\n  const parsedFrames = parse(error);\n  let enhancedFramesPromise;\n  // $FlowFixMe\n  if (error.__unmap_source) {\n    enhancedFramesPromise = unmap(\n      // $FlowFixMe\n      error.__unmap_source,\n      parsedFrames,\n      contextSize\n    );\n  } else {\n    enhancedFramesPromise = map(parsedFrames, contextSize);\n  }\n  return enhancedFramesPromise.then(enhancedFrames => {\n    if (\n      enhancedFrames\n        .map(f => f._originalFileName)\n        .filter(f => f != null && f.indexOf('node_modules') === -1).length === 0\n    ) {\n      return null;\n    }\n    return enhancedFrames.filter(\n      ({ functionName }) =>\n        functionName == null ||\n        functionName.indexOf('__stack_frame_overlay_proxy_console__') === -1\n    );\n  });\n}\n\nexport default getStackFrames;\nexport { getStackFrames };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\nfunction isInternalFile(sourceFileName: ?string, fileName: ?string) {\n  return (\n    sourceFileName == null ||\n    sourceFileName === '' ||\n    sourceFileName.indexOf('/~/') !== -1 ||\n    sourceFileName.indexOf('/node_modules/') !== -1 ||\n    sourceFileName.trim().indexOf(' ') !== -1 ||\n    fileName == null ||\n    fileName === ''\n  );\n}\n\nexport { isInternalFile };\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// TODO change this\nimport { getCurrentManager } from 'app/src/sandbox/compile';\n// @flow\nimport StackFrame from './stack-frame';\nimport { getSourceMap } from './getSourceMap';\nimport { getLinesAround } from './getLinesAround';\nimport { settle } from 'settle-promise';\n\n/**\n * Enhances a set of <code>StackFrame</code>s with their original positions and code (when available).\n * @param {StackFrame[]} frames A set of <code>StackFrame</code>s which contain (generated) code positions.\n * @param {number} [contextLines=3] The number of lines to provide before and after the line specified in the <code>StackFrame</code>.\n */\nasync function map(\n  frames: StackFrame[],\n  contextLines: number = 3\n): Promise<StackFrame[]> {\n  const cache: any = {};\n  const files: string[] = [];\n  frames.forEach(frame => {\n    const { fileName } = frame;\n    if (fileName == null) {\n      return;\n    }\n    if (files.indexOf(fileName) !== -1) {\n      return;\n    }\n    files.push(fileName);\n  });\n  await settle(\n    files.map(async fileName => {\n      const manager = getCurrentManager();\n      if (manager != null && !fileName.startsWith('webpack')) {\n        let transpiledModule;\n        if (fileName.includes('?')) {\n          transpiledModule = manager.getTranspiledModuleByHash(\n            fileName.split('?')[1]\n          );\n        } else {\n          transpiledModule = manager.resolveTranspiledModule(\n            fileName.replace(location.origin, ''),\n            '/'\n          );\n        }\n\n        if (transpiledModule) {\n          const fileSource =\n            transpiledModule.source && transpiledModule.source.compiledCode;\n\n          const map = await getSourceMap(fileName, fileSource);\n\n          cache[fileName] = { fileSource, map };\n        }\n      }\n    })\n  );\n  return frames.map(frame => {\n    const { functionName, fileName, lineNumber, columnNumber } = frame;\n    let { map, fileSource } = cache[fileName] || {};\n    if (map == null || lineNumber == null) {\n      return frame;\n    }\n    const { source, line, column } = map.getOriginalPosition(\n      lineNumber,\n      columnNumber\n    );\n    const originalSource = source == null ? [] : map.getSource(source);\n    return new StackFrame(\n      functionName,\n      fileName,\n      lineNumber,\n      columnNumber,\n      getLinesAround(lineNumber, contextLines, fileSource),\n      functionName,\n      source,\n      line,\n      column,\n      getLinesAround(line, contextLines, originalSource)\n    );\n  });\n}\n\nexport { map };\nexport default map;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// @flow\nimport StackFrame from './stack-frame';\n\nconst regexExtractLocation = /\\(?(.+?)(?::(\\d+))?(?::(\\d+))?\\)?$/;\n\nfunction extractLocation(token: string): [string, number, number] {\n  return regexExtractLocation\n    .exec(token)\n    .slice(1)\n    .map(v => {\n      const p = Number(v);\n      if (!isNaN(p)) {\n        return p;\n      }\n      return v;\n    });\n}\n\nconst regexValidFrame_Chrome = /^\\s*(at|in)\\s.+(:\\d+)/;\nconst regexValidFrame_FireFox = /(^|@)\\S+:\\d+|.+line\\s+\\d+\\s+>\\s+(eval|Function).+/;\n\nfunction parseStack(stack: string[]): StackFrame[] {\n  const frames = stack\n    .filter(\n      e => regexValidFrame_Chrome.test(e) || regexValidFrame_FireFox.test(e)\n    )\n    .map(e => {\n      if (regexValidFrame_FireFox.test(e)) {\n        // Strip eval, we don't care about it\n        let isEval = false;\n        if (/ > (eval|Function)/.test(e)) {\n          e = e.replace(\n            / line (\\d+)(?: > eval line \\d+)* > (eval|Function):\\d+:\\d+/g,\n            ':$1'\n          );\n          isEval = true;\n        }\n        const data = e.split(/[@]/g);\n        const last = data.pop();\n        return new StackFrame(\n          data.join('@') || (isEval ? 'eval' : null),\n          ...extractLocation(last)\n        );\n      } else {\n        // Strip eval, we don't care about it\n        if (e.indexOf('(eval ') !== -1) {\n          e = e.replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\n        }\n        if (e.indexOf('(at ') !== -1) {\n          e = e.replace(/\\(at /, '(');\n        }\n        const data = e\n          .trim()\n          .split(/\\s+/g)\n          .slice(1);\n        const last = data.pop();\n        return new StackFrame(data.join(' ') || null, ...extractLocation(last));\n      }\n    });\n  return frames;\n}\n\n/**\n * Turns an <code>Error</code>, or similar object, into a set of <code>StackFrame</code>s.\n * @alias parse\n */\nfunction parseError(error: Error | string | string[]): StackFrame[] {\n  if (error == null) {\n    throw new Error('You cannot pass a null object.');\n  }\n  if (typeof error === 'string') {\n    return parseStack(error.split('\\n'));\n  }\n  if (Array.isArray(error)) {\n    return parseStack(error);\n  }\n  if (typeof error.stack === 'string') {\n    return parseStack(error.stack.split('\\n'));\n  }\n  throw new Error('The error you provided does not contain a stack trace.');\n}\n\nexport { parseError as parse };\nexport default parseError;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n//@flow\n\n/** A container holding a script line. */\nclass ScriptLine {\n  /** The line number of this line of source. */\n  lineNumber: number;\n  /** The content (or value) of this line of source. */\n  content: string;\n  /** Whether or not this line should be highlighted. Particularly useful for error reporting with context. */\n  highlight: boolean;\n\n  constructor(lineNumber: number, content: string, highlight: boolean = false) {\n    this.lineNumber = lineNumber;\n    this.content = content;\n    this.highlight = highlight;\n  }\n}\n\n/**\n * A representation of a stack frame.\n */\nclass StackFrame {\n  functionName: string | null;\n  fileName: string | null;\n  lineNumber: number | null;\n  columnNumber: number | null;\n\n  _originalFunctionName: string | null;\n  _originalFileName: string | null;\n  _originalLineNumber: number | null;\n  _originalColumnNumber: number | null;\n\n  _scriptCode: ScriptLine[] | null;\n  _originalScriptCode: ScriptLine[] | null;\n\n  constructor(\n    functionName: string | null = null,\n    fileName: string | null = null,\n    lineNumber: number | null = null,\n    columnNumber: number | null = null,\n    scriptCode: ScriptLine[] | null = null,\n    sourceFunctionName: string | null = null,\n    sourceFileName: string | null = null,\n    sourceLineNumber: number | null = null,\n    sourceColumnNumber: number | null = null,\n    sourceScriptCode: ScriptLine[] | null = null\n  ) {\n    this.functionName = functionName;\n\n    this.fileName = fileName;\n    this.lineNumber = lineNumber;\n    this.columnNumber = columnNumber;\n\n    this._originalFunctionName = sourceFunctionName;\n    this._originalFileName = sourceFileName;\n    this._originalLineNumber = sourceLineNumber;\n    this._originalColumnNumber = sourceColumnNumber;\n\n    this._scriptCode = scriptCode;\n    this._originalScriptCode = sourceScriptCode;\n  }\n\n  /**\n   * Returns the name of this function.\n   */\n  getFunctionName(): string | null {\n    return this.functionName;\n  }\n\n  /**\n   * Returns the source of the frame.\n   * This contains the file name, line number, and column number when available.\n   */\n  getSource(): string {\n    let str = '';\n    if (this.fileName != null) {\n      str += this.fileName + ':';\n    }\n    if (this.lineNumber != null) {\n      str += this.lineNumber + ':';\n    }\n    if (this.columnNumber != null) {\n      str += this.columnNumber + ':';\n    }\n    return str.slice(0, -1);\n  }\n\n  /**\n   * Returns a pretty version of this stack frame.\n   */\n  toString(): string {\n    const f = this.getFunctionName();\n    if (f == null) {\n      return this.getSource();\n    }\n    return `${f} (${this.getSource()})`;\n  }\n}\n\nexport { StackFrame, ScriptLine };\nexport default StackFrame;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// @flow\nimport StackFrame from './stack-frame';\nimport { getSourceMap } from './getSourceMap';\nimport { getLinesAround } from './getLinesAround';\nimport path from 'path';\n\nfunction count(search: string, string: string): number {\n  // Count starts at -1 becuse a do-while loop always runs at least once\n  let count = -1,\n    index = -1;\n  do {\n    // First call or the while case evaluated true, meaning we have to make\n    // count 0 or we found a character\n    ++count;\n    // Find the index of our search string, starting after the previous index\n    index = string.indexOf(search, index + 1);\n  } while (index !== -1);\n  return count;\n}\n\n/**\n * Turns a set of mapped <code>StackFrame</code>s back into their generated code position and enhances them with code.\n * @param {string} fileUri The URI of the <code>bundle.js</code> file.\n * @param {StackFrame[]} frames A set of <code>StackFrame</code>s which are already mapped and missing their generated positions.\n * @param {number} [fileContents=3] The number of lines to provide before and after the line specified in the <code>StackFrame</code>.\n */\nasync function unmap(\n  _fileUri: string | { uri: string, contents: string },\n  frames: StackFrame[],\n  contextLines: number = 3\n): Promise<StackFrame[]> {\n  let fileContents = typeof _fileUri === 'object' ? _fileUri.contents : null;\n  let fileUri = typeof _fileUri === 'object' ? _fileUri.uri : _fileUri;\n  if (fileContents == null) {\n    fileContents = await fetch(fileUri).then(res => res.text());\n  }\n  const map = await getSourceMap(fileUri, fileContents);\n  return frames.map(frame => {\n    const {\n      functionName,\n      lineNumber,\n      columnNumber,\n      _originalLineNumber,\n    } = frame;\n    if (_originalLineNumber != null) {\n      return frame;\n    }\n    let { fileName } = frame;\n    if (fileName) {\n      fileName = path.normalize(fileName);\n    }\n    if (fileName == null) {\n      return frame;\n    }\n    const fN: string = fileName;\n    const source = map\n      .getSources()\n      .map(s => s.replace(/[\\\\]+/g, '/'))\n      .filter(p => {\n        p = path.normalize(p);\n        const i = p.lastIndexOf(fN);\n        return i !== -1 && i === p.length - fN.length;\n      })\n      .map(p => ({\n        token: p,\n        seps: count(path.sep, path.normalize(p)),\n        penalties: count('node_modules', p) + count('~', p),\n      }))\n      .sort((a, b) => {\n        const s = Math.sign(a.seps - b.seps);\n        if (s !== 0) {\n          return s;\n        }\n        return Math.sign(a.penalties - b.penalties);\n      });\n    if (source.length < 1 || lineNumber == null) {\n      return new StackFrame(\n        null,\n        null,\n        null,\n        null,\n        null,\n        functionName,\n        fN,\n        lineNumber,\n        columnNumber,\n        null\n      );\n    }\n    const sourceT = source[0].token;\n    const { line, column } = map.getGeneratedPosition(\n      sourceT,\n      lineNumber,\n      // $FlowFixMe\n      columnNumber\n    );\n    const originalSource = map.getSource(sourceT);\n    return new StackFrame(\n      functionName,\n      fileUri,\n      line,\n      column || null,\n      getLinesAround(line, contextLines, fileContents || []),\n      functionName,\n      fN,\n      lineNumber,\n      columnNumber,\n      getLinesAround(lineNumber, contextLines, originalSource)\n    );\n  });\n}\n\nexport { unmap };\nexport default unmap;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n// @flow\nimport type { ReactFrame } from '../effects/proxyConsole';\n\nfunction stripInlineStacktrace(message: string): string {\n  return message\n    .split('\\n')\n    .filter(line => !line.match(/^\\s*in/))\n    .join('\\n'); // \"  in Foo\"\n}\n\nfunction massage(\n  warning: string,\n  frames: ReactFrame[]\n): { message: string, stack: string } {\n  let message = stripInlineStacktrace(warning);\n\n  // Reassemble the stack with full filenames provided by React\n  let stack = '';\n  let lastFilename;\n  let lastLineNumber;\n  for (let index = 0; index < frames.length; ++index) {\n    const { fileName, lineNumber } = frames[index];\n    if (fileName == null || lineNumber == null) {\n      continue;\n    }\n\n    // TODO: instead, collapse them in the UI\n    if (\n      fileName === lastFilename &&\n      typeof lineNumber === 'number' &&\n      typeof lastLineNumber === 'number' &&\n      Math.abs(lineNumber - lastLineNumber) < 3\n    ) {\n      continue;\n    }\n    lastFilename = fileName;\n    lastLineNumber = lineNumber;\n\n    let { name } = frames[index];\n    name = name || '(anonymous function)';\n    stack += `in ${name} (at ${fileName}:${lineNumber})\\n`;\n  }\n\n  return { message, stack };\n}\n\nexport { massage };\n","import { getCurrentManager } from '../compile';\n\nlet cachedBoilerplates = [];\n\nexport async function evalBoilerplates(boilerplates) {\n  cachedBoilerplates = await Promise.all(\n    boilerplates.map(async boilerplate => {\n      const fakeModule = {\n        path: `/boilerplate-${boilerplate.condition}${boilerplate.extension}`,\n        code: boilerplate.code,\n      };\n\n      const manager = getCurrentManager();\n\n      await manager.transpileModules(fakeModule);\n      const module = manager.evaluateModule(fakeModule);\n\n      return { ...boilerplate, module };\n    })\n  );\n}\n\nexport function getBoilerplates() {\n  return cachedBoilerplates;\n}\n\nexport function findBoilerplate(module) {\n  const boilerplates = getBoilerplates();\n  const boilerplate = boilerplates.find(b => {\n    const regex = new RegExp(b.condition);\n    return regex.test(module.path);\n  });\n\n  if (boilerplate == null) {\n    throw new Error(\n      `No boilerplate found for ${module.path}, you can create one in the future`\n    );\n  }\n\n  return boilerplate;\n}\n","export const JS = {\n  id: 'js',\n  extension: '.js',\n  condition: '.jsx?$',\n  code: `\nimport React from 'react';\nimport { render } from 'react-dom';\nexport default function(module) {\n  const node = document.createElement('div');\n  document.body.appendChild(node);\n  render(React.createElement(module.default), node);\n}\n`,\n};\n\nexport const HTML = {\n  id: 'html',\n  extension: '.html',\n  condition: '.html$',\n  code: `\nexport default function(module) {\n  document.body.innerHTML = module\n}\n`,\n};\n\nexport const TS = {\n  id: 'ts',\n  extension: '.ts',\n  condition: '.tsx?$',\n  code: `\nimport * as React from 'react';\nimport { render } from 'react-dom';\nexport default function(module) {\n  const node = document.createElement('div');\n  document.body.appendChild(node);\n  render(React.createElement(module.default), node);\n}\n`,\n};\n\nexport default [JS, HTML, TS];\n","import { getParameters } from 'codesandbox-import-utils/lib/api/define';\n\nexport default function createOverlay(modules) {\n  const normalized = Object.keys(modules).reduce(\n    (prev, next) => ({\n      ...prev,\n      [next.replace('/', '')]: {\n        content: modules[next].code,\n        isBinary: false,\n      },\n    }),\n    {}\n  );\n\n  const parameters = getParameters({ files: normalized });\n\n  return new Promise(resolve => {\n    const iframe = document.createElement('iframe');\n\n    iframe.setAttribute(\n      'style',\n      `transition: 0.3s ease background-color; position: fixed; bottom: 8px; right: 8px; height: 40px; width: 196px; background-color: rgba(0, 0, 0, 0.6); border-radius: 4px; border: 0; outline: 0; z-index: 214748366;`\n    );\n    iframe.setAttribute(\n      'onmouseover',\n      \"this.style.backgroundColor='rgba(0, 0, 0, 0.7)';\"\n    );\n    iframe.setAttribute(\n      'onmouseout',\n      \"this.style.backgroundColor='rgba(0, 0, 0, 0.6)';\"\n    );\n\n    iframe.onload = () => {\n      iframe.contentDocument.body.innerHTML = `\n        <form\n          action=\"https://codesandbox.io/api/v1/sandboxes/define\"\n          method=\"POST\"\n          target=\"_blank\"\n          style=\"cursor:pointer;\"\n        >\n        <input\n          type=\"hidden\"\n          name=\"parameters\"\n          value=\"${parameters}\"\n        />\n          <div style=\"display:flex;align-items:center\" onclick=\"javascript:document.forms[0].submit();\">\n            <svg style=\"width:24px;height:24px;margin-right:8px;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"1024px\"\n              height=\"1024px\" viewBox=\"0 0 1024 1024\" enable-background=\"new 0 0 1024 1024\" xml:space=\"preserve\">\n              <g id=\"Layer_1\">\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"719.001,851 719.001,639.848 902,533.802 902,745.267 719.001,851\"\n                />\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"302.082,643.438 122.167,539.135 122.167,747.741 302.082,852.573 302.082,643.438\"\n                />\n                <polyline\n                  fill=\"#FFFFFF\"\n                  points=\"511.982,275.795 694.939,169.633 512.06,63 328.436,169.987 511.982,275.795\"\n                />\n              </g>\n              <g id=\"Layer_2\">\n                <polyline\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  points=\"899,287.833 509,513 509,963\"\n                />\n                <line\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  x1=\"122.167\"\n                  y1=\"289\"\n                  x2=\"511.5\"\n                  y2=\"513\"\n                />\n                <polygon\n                  fill=\"none\"\n                  stroke=\"#FFFFFF\"\n                  stroke-width=\"80\"\n                  stroke-miterlimit=\"10\"\n                  points=\"121,739.083 510.917,963.042 901,738.333 901,288 511,62 121,289\"\n                />\n              </g>\n          </svg>\n          <div style=\"font-size:.875rem; font-weight: 300; color: white; font-family: sans-serif\">Open in CodeSandbox</div>\n        </div>\n      </form>\n      `;\n\n      resolve();\n    };\n\n    document.body.appendChild(iframe);\n  });\n}\n","import Manager from '../manager';\nimport { LoaderContext } from '../transpiled-module';\nimport { SourceMap } from './utils/get-source-map';\n\nexport interface TranspilerResult {\n  transpiledCode: any;\n  ast?: Object;\n  sourceMap?: SourceMap;\n}\n\nexport default abstract class Transpiler {\n  cacheable: boolean;\n  name: string;\n  HMREnabled: boolean;\n\n  constructor(name: string) {\n    this.cacheable = true;\n    this.name = name;\n    this.HMREnabled = true;\n  }\n\n  /* eslint-disable */\n  initialize() {}\n\n  dispose() {}\n\n  cleanModule(loaderContext: LoaderContext) {}\n\n  abstract doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> | TranspilerResult;\n  /* eslint-enable */\n\n  transpile(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> | TranspilerResult {\n    return this.doTranspilation(code, loaderContext);\n  }\n\n  /**\n   * Get custom info of the current transpiler, this is open for implementation\n   * per transpiler\n   */\n  getTranspilerContext(manager: Manager): Promise<object> {\n    return Promise.resolve({\n      name: this.name,\n      HMREnabled: this.HMREnabled,\n      cacheable: this.cacheable,\n    });\n  }\n}\n","import { LoaderContext } from 'sandbox/eval/transpiled-module';\nimport { IEvaluator } from 'sandbox/eval/evaluator';\n\nimport Transpiler, { TranspilerResult } from '..';\n\n/**\n * This is a compatibility loader that acts as bridge between webpack loaders and sandpack\n * transpilers. It's a best effort on making webpack loaders work dynamically in Sandpack.\n */\nexport class WebpackTranspiler extends Transpiler {\n  private webpackLoader: Promise<(code: string) => string>;\n  constructor(webpackLoader: string, evaluator: IEvaluator) {\n    super(webpackLoader);\n\n    this.webpackLoader = evaluator.evaluate(webpackLoader);\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const loader = await this.webpackLoader;\n\n    const asyncFunc = () => (err: Error | null, result: string) => {\n      if (err) {\n        throw err;\n      }\n\n      return result;\n    };\n\n    const webpackLoaderContext = { ...loaderContext, async: asyncFunc };\n\n    const webpackResult = await loader.apply(webpackLoaderContext, [code]);\n\n    return {\n      transpiledCode: webpackResult,\n    };\n  }\n}\n","const importRegex = /(^|\\s)(import)\\s*\\(/g;\n\nexport function convertDynamicImport(code: string) {\n  return code.replace(importRegex, ' $csbImport(');\n}\n","import Transpiler, { TranspilerResult } from '..';\nimport { LoaderContext } from '../../transpiled-module';\nimport { convertDynamicImport } from './dynamic-import';\n\n/**\n * This transpiler is run after all modules, to enable specific CodeSandbox features\n *\n * @class CodeSandbox\n * @extends {Transpiler}\n */\nclass CodeSandboxDynamicImports extends Transpiler {\n  constructor() {\n    super('codesandbox-dynamic-imports-loader');\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): TranspilerResult {\n    const newCode = convertDynamicImport(code);\n    return { transpiledCode: newCode };\n  }\n}\n\nconst transpiler = new CodeSandboxDynamicImports();\n\nexport { CodeSandboxDynamicImports };\n\nexport default transpiler;\n","import { orderBy } from 'lodash-es';\nimport querystring from 'querystring';\nimport { NPMDependencies } from 'sandbox/npm';\nimport { Module } from '../types/module';\n\nimport Manager from '../manager';\nimport Transpiler from '../transpilers';\nimport TranspiledModule from '../transpiled-module';\nimport { WebpackTranspiler } from '../transpilers/webpack';\nimport csbDynamicImportTranspiler from '../transpilers/csb-dynamic-import';\nimport { IEvaluator } from '../evaluator';\n\ntype TranspilerDefinition = {\n  transpiler: Transpiler;\n  options?: Object;\n};\n\ntype SetupFunction = (manager: Manager) => void | Promise<any>;\ntype ProcessDependenciesFunction = (\n  dependencies: NPMDependencies\n) => Promise<NPMDependencies>;\n\ntype LifeCycleFunction = (\n  manager: Manager,\n  updatedModules: TranspiledModule[]\n) => void | Promise<any>;\n\ntype LoaderDefinition = {\n  test: (module: Module) => boolean;\n  transpilers: Array<TranspilerDefinition>;\n};\n\n/**\n * This is essentially where it all comes together. The manager is responsible for\n * doing evaluation and transpilation using the Transpiler and Loader classes.\n *\n * You can build presets with this, for example the create-react-app template\n * could create a new instance of this and register all desired loaders.\n *\n * Note that this manager should never have state besides the transpilers and\n * the loaders, the only responsibility is to activate the right transpilers\n * and loaders.\n */\nexport default class Preset {\n  loaders: Array<LoaderDefinition>;\n\n  transpilers: Set<Transpiler>;\n  name: string;\n  ignoredExtensions: Array<string>;\n  htmlDisabled: boolean;\n  defaultAliases: { [path: string]: string };\n  alias: { [path: string]: string };\n  // Whether this preset supports .env files\n  hasDotEnv: boolean;\n\n  /**\n   * Add or remove dependencies to the existing list (or just look at them for some config changes)\n   */\n  processDependencies: ProcessDependenciesFunction;\n  /**\n   * Code to run before evaluating and transpiling entry\n   */\n  setup: SetupFunction;\n  /**\n   * Code to run after evaluation and transpilation\n   */\n  teardown: LifeCycleFunction;\n  /**\n   * Code to run before evaluation\n   */\n  preEvaluate: LifeCycleFunction;\n\n  preTranspilers: TranspilerDefinition[] = [\n    { transpiler: csbDynamicImportTranspiler },\n  ];\n\n  postTranspilers: TranspilerDefinition[] = [\n    { transpiler: csbDynamicImportTranspiler },\n  ];\n\n  constructor(\n    name: string,\n    ignoredExtensions?: Array<string>,\n    alias?: { [path: string]: string },\n    {\n      hasDotEnv,\n      processDependencies,\n      setup,\n      teardown,\n      htmlDisabled,\n      preEvaluate,\n    }: {\n      hasDotEnv?: boolean;\n      processDependencies?: ProcessDependenciesFunction;\n      setup?: SetupFunction;\n      preEvaluate?: LifeCycleFunction;\n      teardown?: LifeCycleFunction;\n      htmlDisabled?: boolean;\n    } = {}\n  ) {\n    this.loaders = [];\n    this.transpilers = new Set();\n    this.name = name;\n\n    this.hasDotEnv = hasDotEnv || false;\n    this.alias = alias || {};\n    this.aliasedPathCache = {};\n    this.defaultAliases = alias || {};\n    this.ignoredExtensions = ignoredExtensions || ['js', 'jsx', 'json', 'mjs'];\n\n    const noop = () => {};\n    this.processDependencies = processDependencies || (async deps => deps);\n    this.setup = setup || noop;\n    this.teardown = teardown || noop;\n    this.preEvaluate = preEvaluate || noop;\n    this.htmlDisabled = htmlDisabled || false;\n\n    this.postTranspilers.forEach(transpiler => {\n      this.transpilers.add(transpiler.transpiler);\n    });\n  }\n\n  setAdditionalAliases = (aliases: { [path: string]: string }) => {\n    this.alias = { ...this.defaultAliases, ...aliases };\n    this.aliasedPathCache = {};\n  };\n\n  reset = () => {\n    this.loaders = [];\n  };\n\n  resetTranspilers = () => {\n    this.transpilers.clear();\n    this.loaders.length = 0;\n  };\n\n  aliasedPathCache = {};\n\n  /**\n   * Checks if there is an alias given for the path, if there is it will return\n   * the altered path, otherwise it will just return the known path.\n   */\n  getAliasedPath(path: string): string {\n    if (this.aliasedPathCache[path] === null) {\n      return path;\n    }\n    if (this.aliasedPathCache[path]) {\n      return this.aliasedPathCache[path];\n    }\n\n    const aliases = Object.keys(this.alias);\n\n    const exactAliases = aliases.filter(a => a.endsWith('$'));\n    const exactFoundAlias = exactAliases.find(a => {\n      const alias = a.slice(0, -1);\n\n      if (path === alias) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (exactFoundAlias) {\n      this.aliasedPathCache[path] = this.alias[exactFoundAlias];\n      return this.alias[exactFoundAlias];\n    }\n\n    const pathParts = path.split('/');\n\n    // Find matching aliases\n    const foundAlias = orderBy(aliases, a => -a.split('/').length).find(a => {\n      const parts = a.split('/');\n      return parts.every((p, i) => pathParts[i] === p);\n    });\n\n    if (foundAlias) {\n      const replacedPath = path.replace(foundAlias, this.alias[foundAlias]);\n      this.aliasedPathCache[path] = replacedPath;\n      // if an alias is found we will replace the path with the alias\n      return replacedPath;\n    }\n\n    this.aliasedPathCache[path] = null;\n\n    return path;\n  }\n\n  registerTranspiler(\n    test: (module: Module) => boolean,\n    transpilers: Array<TranspilerDefinition>,\n    prepend: boolean = false\n  ) {\n    const transpilerObject = {\n      test,\n      transpilers,\n    };\n    if (prepend) {\n      this.loaders.unshift(transpilerObject);\n    } else {\n      this.loaders.push(transpilerObject);\n    }\n\n    transpilers.forEach(t => this.transpilers.add(t.transpiler));\n\n    return this.loaders;\n  }\n\n  /**\n   * Get transpilers from the given query, the query is webpack like:\n   * eg. !babel-loader!./test.js\n   */\n  getLoaders(\n    module: Module,\n    evaluator: IEvaluator,\n    query: string = ''\n  ): Array<TranspilerDefinition> {\n    const loader = this.loaders.find(t => t.test(module));\n\n    // Starting !, drop all transpilers\n    const transpilers = query.startsWith('!') // eslint-disable-line no-nested-ternary\n      ? []\n      : loader\n      ? loader.transpilers\n      : [];\n\n    // Remove \"\" values\n    const transpilerNames = query.split('!').filter(x => x);\n\n    const extraTranspilers = transpilerNames\n      .map(loaderName => {\n        const [name, options] = loaderName.split('?');\n\n        let transpiler = Array.from(this.transpilers).find(\n          t => t.name === name\n        );\n\n        if (!transpiler) {\n          const webpackLoader = new WebpackTranspiler(name, evaluator);\n          // If the loader is not installed, we try to run the webpack loader.\n          this.transpilers.add(webpackLoader);\n          transpiler = webpackLoader;\n        }\n\n        const parsedOptions = this.parseOptions(options);\n\n        return { transpiler, options: parsedOptions };\n      })\n      .reverse(); // Reverse, because webpack is also in reverse order\n\n    const finalTranspilers = [\n      ...this.preTranspilers,\n      ...transpilers,\n      ...extraTranspilers,\n      ...this.postTranspilers,\n    ];\n\n    return finalTranspilers;\n  }\n\n  parseOptions = (options?: string) => {\n    if (options == null) {\n      return {};\n    }\n\n    try {\n      return JSON.parse(options);\n    } catch (e) {\n      return querystring.parse(options);\n    }\n  };\n\n  /**\n   * Get the query syntax of the module\n   */\n  getQuery(module: Module, evaluator: IEvaluator, query: string = '') {\n    const loaders = this.getLoaders(module, evaluator, query);\n\n    return `!${loaders.map(t => t.transpiler.name).join('!')}`;\n  }\n}\n","const wrapper = (id, css, webpackHMREnabled = false) => `\nfunction createStyleNode(id, content) {\n  var styleNode =\n    document.getElementById(id) || document.createElement('style');\n\n  styleNode.setAttribute('id', id);\n  styleNode.type = 'text/css';\n  if (styleNode.styleSheet) {\n    styleNode.styleSheet.cssText = content;\n  } else {\n    styleNode.innerHTML = '';\n    styleNode.appendChild(document.createTextNode(content));\n  }\n  document.head.appendChild(styleNode);\n}\n\ncreateStyleNode(\n  ${JSON.stringify(id)},\n  ${JSON.stringify(css)}\n);\n\n${webpackHMREnabled ? 'module.hot.accept()' : ''}\n`;\n\nexport default function(id, css, webpackHMREnabled) {\n  const result = wrapper(id, css || '', webpackHMREnabled);\n  return result;\n}\n","// @flow\n\nexport default function toDefinition(classes): string {\n  return Object.keys(classes).reduce(\n    (previous, className) => previous + `export const ${className}: string;\\n`,\n    ''\n  );\n}\n","import { LoaderContext } from '../../transpiled-module';\n\nlet core = null;\n\nexport default async (code: string, loaderContext: LoaderContext) => {\n  if (!core) {\n    const Core = await import(\n      /* webpackChunkName: 'css-modules-loader-core' */ 'css-modules-loader-core'\n    ).then(x => x.default);\n\n    core = new Core();\n  }\n\n  return core\n    .load(code, loaderContext.path, (dependencyPath: string) => {\n      loaderContext.addDependency(dependencyPath);\n\n      const tModule = loaderContext.resolveTranspiledModule(dependencyPath);\n\n      return tModule.source ? tModule.source.compiledCode : tModule.module.code;\n    })\n    .then(({ injectableSource, exportTokens }) => ({\n      css: injectableSource,\n      exportTokens,\n    }));\n};\n","import { dispatch } from 'codesandbox-api';\nimport Transpiler from '..';\nimport { LoaderContext } from '../../transpiled-module';\n\nimport insertCss from './utils/insert-css';\nimport toDefinition from './utils/to-definition';\nimport getModules from './get-modules';\n\nconst getStyleId = (id: string) => id + '-css'; // eslint-disable-line\n\nclass StyleTranspiler extends Transpiler {\n  constructor() {\n    super('style-loader');\n    this.cacheable = false;\n  }\n\n  cleanModule(loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const element = document.getElementById(id);\n\n    if (element != null && element.parentNode != null) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const { path } = loaderContext;\n\n    if (loaderContext.options.module) {\n      return getModules(code, loaderContext).then(({ css, exportTokens }) => {\n        let result = insertCss(id, css, loaderContext.options.hmrEnabled);\n        result += `\\nmodule.exports=${JSON.stringify(exportTokens)};`;\n\n        dispatch({\n          type: 'add-extra-lib',\n          path,\n          code: toDefinition(exportTokens),\n        });\n        return Promise.resolve({ transpiledCode: result });\n      });\n    }\n\n    const result = insertCss(id, code, loaderContext.options.hmrEnabled);\n    return Promise.resolve({ transpiledCode: result });\n  }\n}\n\nconst transpiler = new StyleTranspiler();\n\nexport { StyleTranspiler };\n\nexport default transpiler;\n","const expr = /(;|^|})(import|export)(\\s|{)/gm;\n\nexport default function isESModule(code: string) {\n  expr.lastIndex = 0;\n  return expr.test(code);\n}\n","export default function(delay = 1000) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n","// @flow\n\ntype WorkerError = {\n  name: string,\n  message: string,\n  fileName: ?string,\n  lineNumber: ?number,\n  columnNumber: ?number,\n};\n\nexport function buildWorkerError(error: Error): WorkerError {\n  return {\n    name: error.name,\n    message: error.message,\n    fileName: error.fileName,\n    lineNumber: error.lineNumber,\n    columnNumber: error.columnNumber,\n  };\n}\n\nexport function parseWorkerError(error: WorkerError): Error {\n  const reconstructedError = new Error(error.message);\n  reconstructedError.name = error.name;\n  reconstructedError.columnNumber = error.columnNumber;\n  reconstructedError.fileName = error.columnNumber;\n  reconstructedError.lineNumber = error.lineNumber;\n\n  return reconstructedError;\n}\n","import _debug from '@codesandbox/common/lib/utils/debug';\nimport { dispatch, actions } from 'codesandbox-api';\n\nimport Transpiler, { TranspilerResult } from '.';\nimport { parseWorkerError } from './utils/worker-error-handler';\nimport { LoaderContext } from '../transpiled-module';\nimport Manager from '../manager';\n\nconst debug = _debug('cs:compiler:worker-transpiler');\n\ntype TranspilerCallback = (\n  err: any | undefined,\n  data: TranspilerResult | undefined\n) => void;\n\ntype Task = {\n  message: any;\n  callbacks: TranspilerCallback[];\n  loaderContext: LoaderContext;\n};\n\n/**\n * A transpiler that handles worker messaging for you! Magic\n */\nexport default abstract class WorkerTranspiler extends Transpiler {\n  Worker: () => Worker;\n  workers: Array<Worker>;\n  idleWorkers: Array<Worker>;\n  loadingWorkers: number;\n  workerCount: number;\n  tasks: {\n    [id: string]: Task;\n  };\n\n  initialized: boolean;\n  runningTasks: {\n    [id: string]: (error: Error, message: Object) => void;\n  };\n\n  hasFS: boolean;\n\n  constructor(\n    name: string,\n    Worker: () => Worker,\n    workerCount = navigator.hardwareConcurrency,\n    options: { hasFS?: boolean; preload?: boolean } = {}\n  ) {\n    super(name);\n\n    this.workerCount = workerCount;\n    this.Worker = Worker;\n    this.workers = [];\n    this.idleWorkers = [];\n    this.tasks = {};\n    this.initialized = false;\n    this.hasFS = options.hasFS || false;\n    this.loadingWorkers = 0;\n\n    if (options.preload) {\n      if (this.workers.length === 0) {\n        Promise.all(\n          Array.from({ length: this.workerCount }, () => this.loadWorker())\n        );\n      }\n    }\n  }\n\n  getWorker(): Promise<Worker> {\n    // @ts-ignore\n    return Promise.resolve(new this.Worker());\n  }\n\n  async loadWorker() {\n    this.loadingWorkers++;\n    const t = Date.now();\n    const worker = await this.getWorker();\n    const readyListener = e => {\n      if (e.data === 'ready') {\n        debug(`Loaded '${this.name}' worker in ${Date.now() - t}ms`);\n        worker.removeEventListener('message', readyListener);\n      }\n    };\n    worker.addEventListener('message', readyListener);\n\n    if (this.hasFS) {\n      // Register file system that syncs with filesystem in manager\n      // @ts-ignore\n      BrowserFS.FileSystem.WorkerFS.attachRemoteListener(worker); // eslint-disable-line\n      worker.postMessage({ type: 'initialize-fs', codesandbox: true });\n    }\n\n    this.idleWorkers.push(worker);\n\n    this.executeRemainingTasks();\n\n    this.workers.push(worker);\n  }\n\n  async initialize() {\n    this.initialized = true;\n    if (this.workers.length === 0) {\n      await Promise.all(\n        Array.from({ length: this.workerCount }, () => this.loadWorker())\n      );\n    }\n  }\n\n  dispose() {\n    this.workers.forEach(w => w.terminate());\n    this.initialized = false;\n    this.tasks = {};\n    this.workers.length = 0;\n    this.idleWorkers.length = 0;\n    this.loadingWorkers = 0;\n  }\n\n  executeRemainingTasks() {\n    const taskIds = Object.keys(this.tasks);\n    while (this.idleWorkers.length && taskIds.length) {\n      const taskId = taskIds.shift();\n\n      const task = this.tasks[taskId];\n      delete this.tasks[taskId];\n\n      const worker = this.idleWorkers.shift();\n      this.executeTask(task, worker);\n    }\n  }\n\n  runCallbacks(\n    callbacks: Array<TranspilerCallback>,\n    err: Error | undefined,\n    data?: TranspilerResult\n  ) {\n    callbacks.forEach(c => c(err, data));\n  }\n\n  executeTask({ message, loaderContext, callbacks }: Task, worker: Worker) {\n    worker.onmessage = async newMessage => {\n      const { data } = newMessage;\n\n      if (data) {\n        if (data.type === 'error') {\n          const reconstructedError = parseWorkerError(data.error);\n\n          this.runCallbacks(callbacks, reconstructedError);\n        }\n\n        if (data.type === 'warning') {\n          loaderContext.emitWarning(data.warning);\n          return;\n        }\n\n        if (data.type === 'clear-warnings') {\n          dispatch(actions.correction.clear(data.path, data.source));\n        }\n\n        if (data.type === 'resolve-async-transpiled-module') {\n          // This one is to add an asynchronous transpiled module\n\n          const { id, path, options } = data;\n\n          try {\n            const tModule = await loaderContext.resolveTranspiledModuleAsync(\n              path,\n              options\n            );\n            worker.postMessage({\n              type: 'resolve-async-transpiled-module-response',\n              id,\n              found: true,\n              path: tModule.module.path,\n              code: tModule.module.code,\n            });\n          } catch (e) {\n            worker.postMessage({\n              type: 'resolve-async-transpiled-module-response',\n              id,\n              found: false,\n            });\n          }\n        }\n\n        if (data.type === 'add-dependency') {\n          // Dynamic import\n          if (data.isGlob) {\n            loaderContext.addDependenciesInDirectory(data.path, {\n              isAbsolute: data.isAbsolute,\n              isEntry: data.isEntry,\n            });\n          } else {\n            loaderContext.addDependency(data.path, {\n              isAbsolute: data.isAbsolute,\n              isEntry: data.isEntry,\n            });\n          }\n          return;\n        }\n\n        if (data.type === 'add-transpilation-dependency') {\n          loaderContext.addTranspilationDependency(data.path, {\n            isAbsolute: data.isAbsolute,\n            isEntry: data.isEntry,\n          });\n          return;\n        }\n\n        // Means the transpile task has been completed\n        if (data.type === 'result') {\n          this.runCallbacks(callbacks, null, data);\n        }\n\n        if (data.type === 'error' || data.type === 'result') {\n          // Unshift instead of push, we want to prepend the worker because\n          // this worker is warm now.\n          this.idleWorkers.unshift(worker);\n          this.executeRemainingTasks();\n        }\n      }\n    };\n    worker.postMessage({ type: 'compile', codesandbox: true, ...message });\n  }\n\n  async queueTask(\n    message: any,\n    id: string,\n    loaderContext: LoaderContext,\n    callback: (err: Error, message: TranspilerResult) => void\n  ) {\n    this.initialized = true;\n    if (\n      this.idleWorkers.length === 0 &&\n      this.loadingWorkers < this.workerCount\n    ) {\n      // Load new worker if needed\n      await this.loadWorker();\n    }\n\n    if (!this.tasks[id]) {\n      this.tasks[id] = {\n        message,\n        loaderContext,\n        callbacks: [],\n      };\n    }\n\n    this.tasks[id].callbacks.push(callback);\n\n    this.executeRemainingTasks();\n  }\n\n  async getTranspilerContext(manager: Manager) {\n    return super.getTranspilerContext(manager).then(x => ({\n      ...x,\n      worker: true,\n      hasFS: this.hasFS,\n      workerCount: this.workerCount,\n      initialized: Boolean(this.initialized),\n    }));\n  }\n}\n","// @flow\n\nconst DEFAULT_BABEL_CONFIG = {\n  presets: ['env', 'react'],\n  plugins: [],\n};\n\n/**\n * Parses the .babelrc if it exists, if it doesn't it will return a default config\n */\nexport default function getBabelConfig(\n  config: Object | undefined,\n  loaderOptions: { disableCodeSandboxPlugins?: boolean },\n  path: string,\n  isV7: boolean = false\n) {\n  const resolvedConfig = config || DEFAULT_BABEL_CONFIG;\n\n  if (loaderOptions.disableCodeSandboxPlugins) {\n    return resolvedConfig;\n  }\n\n  const finalConfig: Partial<{\n    sourceMaps: string;\n    sourceFileName: string;\n    filename: string;\n    plugins: string[];\n    presets: string[];\n  }> = {\n    ...resolvedConfig,\n    sourceMaps: 'inline',\n    sourceFileName: path,\n    filename: path,\n  };\n\n  const commonjsPluginName = isV7\n    ? 'transform-modules-commonjs'\n    : 'transform-es2015-modules-commonjs';\n\n  if (finalConfig.plugins) {\n    if (finalConfig.plugins.indexOf(commonjsPluginName) === -1) {\n      finalConfig.plugins = [...finalConfig.plugins, commonjsPluginName];\n    }\n  } else {\n    finalConfig.plugins = [commonjsPluginName];\n  }\n\n  return finalConfig;\n}\n","import isESModule from '../../utils/is-es-module';\n\nconst JSXSyntax = /\\n(.*?)<[A-z](.|\\n)*?\\/?>/;\nconst regeneratorSyntax = /\\n(.*?)(\\s|^)regeneratorRuntime\\./;\n\nfunction checkComment(match: string[]) {\n  const startOfLine = match[1];\n\n  // If it's in a comment or string, we're extremely aggressive here because\n  // transpiling is absolutely our last resort.\n  if (\n    startOfLine.indexOf('//') > -1 ||\n    startOfLine.indexOf('*') > -1 ||\n    startOfLine.indexOf(\"'\") > -1 ||\n    startOfLine.indexOf('\"') > -1 ||\n    startOfLine.indexOf('`') > -1\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function hasNewSyntax(code: string, path: string) {\n  if (path.endsWith('.min.js')) {\n    // This needs no transpiling and often fools our JSX check with <a etc...\n    return false;\n  }\n\n  const jsxMatch = code.match(JSXSyntax);\n  if (jsxMatch) {\n    return checkComment(jsxMatch);\n  }\n\n  const regeneratorMatch = code.match(regeneratorSyntax);\n  if (regeneratorMatch) {\n    return checkComment(regeneratorMatch);\n  }\n\n  return false;\n}\n\nexport function shouldTranspile(code: string, path: string) {\n  if (isESModule(code)) {\n    return true;\n  }\n\n  return hasNewSyntax(code, path);\n}\n","export const Syntax = {\n  ArrayExpression: 'ArrayExpression' as 'ArrayExpression',\n  ArrayPattern: 'ArrayPattern' as 'ArrayPattern',\n  ArrowFunctionExpression: 'ArrowFunctionExpression' as 'ArrowFunctionExpression',\n  AssignmentExpression: 'AssignmentExpression' as 'AssignmentExpression',\n  AssignmentPattern: 'AssignmentPattern' as 'AssignmentPattern',\n  AwaitExpression: 'AwaitExpression' as 'AwaitExpression',\n  BinaryExpression: 'BinaryExpression' as 'BinaryExpression',\n  BlockStatement: 'BlockStatement' as 'BlockStatement',\n  BreakStatement: 'BreakStatement' as 'BreakStatement',\n  CallExpression: 'CallExpression' as 'CallExpression',\n  CatchClause: 'CatchClause' as 'CatchClause',\n  ClassBody: 'ClassBody' as 'ClassBody',\n  ClassDeclaration: 'ClassDeclaration' as 'ClassDeclaration',\n  ClassExpression: 'ClassExpression' as 'ClassExpression',\n  ConditionalExpression: 'ConditionalExpression' as 'ConditionalExpression',\n  ContinueStatement: 'ContinueStatement' as 'ContinueStatement',\n  DebuggerStatement: 'DebuggerStatement' as 'DebuggerStatement',\n  DoWhileStatement: 'DoWhileStatement' as 'DoWhileStatement',\n  EmptyStatement: 'EmptyStatement' as 'EmptyStatement',\n  ExportAllDeclaration: 'ExportAllDeclaration' as 'ExportAllDeclaration',\n  ExportDefaultDeclaration: 'ExportDefaultDeclaration' as 'ExportDefaultDeclaration',\n  ExportNamedDeclaration: 'ExportNamedDeclaration' as 'ExportNamedDeclaration',\n  ExportSpecifier: 'ExportSpecifier' as 'ExportSpecifier',\n  ExpressionStatement: 'ExpressionStatement' as 'ExpressionStatement',\n  ForInStatement: 'ForInStatement' as 'ForInStatement',\n  ForOfStatement: 'ForOfStatement' as 'ForOfStatement',\n  ForStatement: 'ForStatement' as 'ForStatement',\n  FunctionDeclaration: 'FunctionDeclaration' as 'FunctionDeclaration',\n  FunctionExpression: 'FunctionExpression' as 'FunctionExpression',\n  Identifier: 'Identifier' as 'Identifier',\n  IfStatement: 'IfStatement' as 'IfStatement',\n  Import: 'Import' as 'Import',\n  ImportDeclaration: 'ImportDeclaration' as 'ImportDeclaration',\n  ImportDefaultSpecifier: 'ImportDefaultSpecifier' as 'ImportDefaultSpecifier',\n  ImportNamespaceSpecifier: 'ImportNamespaceSpecifier' as 'ImportNamespaceSpecifier',\n  ImportSpecifier: 'ImportSpecifier' as 'ImportSpecifier',\n  LabeledStatement: 'LabeledStatement' as 'LabeledStatement',\n  Literal: 'Literal' as 'Literal',\n  LogicalExpression: 'LogicalExpression' as 'LogicalExpression',\n  MemberExpression: 'MemberExpression' as 'MemberExpression',\n  MetaProperty: 'MetaProperty' as 'MetaProperty',\n  MethodDefinition: 'MethodDefinition' as 'MethodDefinition',\n  NewExpression: 'NewExpression' as 'NewExpression',\n  ObjectExpression: 'ObjectExpression' as 'ObjectExpression',\n  ObjectPattern: 'ObjectPattern' as 'ObjectPattern',\n  Program: 'Program' as 'Program',\n  Property: 'Property' as 'Property',\n  RestElement: 'RestElement' as 'RestElement',\n  ReturnStatement: 'ReturnStatement' as 'ReturnStatement',\n  SequenceExpression: 'SequenceExpression' as 'SequenceExpression',\n  SpreadElement: 'SpreadElement' as 'SpreadElement',\n  Super: 'Super' as 'Super',\n  SwitchCase: 'SwitchCase' as 'SwitchCase',\n  SwitchStatement: 'SwitchStatement' as 'SwitchStatement',\n  TaggedTemplateExpression: 'TaggedTemplateExpression' as 'TaggedTemplateExpression',\n  TemplateElement: 'TemplateElement' as 'TemplateElement',\n  TemplateLiteral: 'TemplateLiteral' as 'TemplateLiteral',\n  ThisExpression: 'ThisExpression' as 'ThisExpression',\n  ThrowStatement: 'ThrowStatement' as 'ThrowStatement',\n  TryStatement: 'TryStatement' as 'TryStatement',\n  UnaryExpression: 'UnaryExpression' as 'UnaryExpression',\n  UpdateExpression: 'UpdateExpression' as 'UpdateExpression',\n  VariableDeclaration: 'VariableDeclaration' as 'VariableDeclaration',\n  VariableDeclarator: 'VariableDeclarator' as 'VariableDeclarator',\n  WhileStatement: 'WhileStatement' as 'WhileStatement',\n  WithStatement: 'WithStatement' as 'WithStatement',\n  YieldExpression: 'YieldExpression' as 'YieldExpression',\n};\n","import { ESTree } from 'meriyah';\nimport { Syntax as n } from './syntax';\n\nexport function generateRequireStatement(varName: string, requirePath: string) {\n  // Generates `var $varName = require('$requirePath');\n  return {\n    type: n.VariableDeclaration,\n    declarations: [\n      {\n        type: n.VariableDeclarator,\n        id: {\n          type: n.Identifier,\n          name: varName,\n        },\n        init: {\n          type: n.CallExpression,\n          callee: {\n            type: n.Identifier,\n            name: 'require',\n          },\n          arguments: [\n            {\n              type: n.Literal,\n              value: requirePath,\n            },\n          ],\n        },\n      },\n    ],\n    kind: 'var' as 'var',\n  };\n}\n\n/**\n * Generates:\n * ```js\n * Object.keys($varName).forEach(function (key) {\n *   if (key === \"default\" || key === \"__esModule\") return;\n *   if (Object.prototype.hasOwnProperty.call(exports, key)) return;\n *   Object.defineProperty(exports, key, {\n *     enumerable: true,\n *     configurable: true,\n *     get: function get() {\n *       return $varName[key];\n *     }\n *   });\n * });\n * ```\n */\nexport function generateAllExportsIterator(varName: string) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.CallExpression,\n          callee: {\n            type: n.MemberExpression,\n            computed: false,\n            object: {\n              type: n.Identifier,\n              name: 'Object',\n            },\n            property: {\n              type: n.Identifier,\n              name: 'keys',\n            },\n          },\n          arguments: [\n            {\n              type: n.Identifier,\n              name: varName,\n            },\n          ],\n        },\n        property: {\n          type: n.Identifier,\n          name: 'forEach',\n        },\n      },\n      arguments: [\n        {\n          type: n.FunctionExpression,\n          id: null,\n          params: [\n            {\n              type: n.Identifier,\n              name: 'key',\n            },\n          ],\n          body: {\n            type: n.BlockStatement,\n            body: [\n              {\n                type: n.IfStatement,\n                test: {\n                  type: n.LogicalExpression,\n                  operator: '||' as '||',\n                  left: {\n                    type: n.BinaryExpression,\n                    operator: '===' as '===',\n                    left: {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                    right: {\n                      type: n.Literal,\n                      value: 'default',\n                      raw: '\"default\"',\n                    },\n                  },\n                  right: {\n                    type: n.BinaryExpression,\n                    operator: '===' as '===',\n                    left: {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                    right: {\n                      type: n.Literal,\n                      value: '__esModule',\n                      raw: '\"__esModule\"',\n                    },\n                  },\n                },\n                consequent: {\n                  type: n.ReturnStatement,\n                  argument: null,\n                },\n                alternate: null,\n              },\n              {\n                type: n.IfStatement,\n                test: {\n                  type: n.CallExpression,\n                  callee: {\n                    type: n.MemberExpression,\n                    object: {\n                      type: n.MemberExpression,\n                      object: {\n                        type: n.MemberExpression,\n                        object: {\n                          type: n.Identifier,\n                          name: 'Object',\n                        },\n                        computed: false,\n                        property: {\n                          type: n.Identifier,\n                          name: 'prototype',\n                        },\n                      },\n                      computed: false,\n                      property: {\n                        type: n.Identifier,\n                        name: 'hasOwnProperty',\n                      },\n                    },\n                    computed: false,\n                    property: {\n                      type: n.Identifier,\n                      name: 'call',\n                    },\n                  },\n                  arguments: [\n                    {\n                      type: n.Identifier,\n                      name: 'exports',\n                    },\n                    {\n                      type: n.Identifier,\n                      name: 'key',\n                    },\n                  ],\n                },\n                consequent: {\n                  type: n.ReturnStatement,\n                  argument: null,\n                },\n                alternate: null,\n              },\n              generateExportGetter(\n                { type: n.Identifier, name: 'key' },\n                {\n                  type: n.MemberExpression,\n                  computed: true,\n                  object: {\n                    type: n.Identifier,\n                    name: varName,\n                  },\n                  property: {\n                    type: n.Identifier,\n                    name: 'key',\n                  },\n                }\n              ),\n            ],\n          },\n          generator: false,\n          expression: false,\n          async: false,\n        },\n      ],\n    },\n  };\n}\n\n/**\n * exports.$exportName = $varName.$exportName;\n */\nexport function generateExportStatement(varName: string, exportName: string) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.AssignmentExpression,\n      operator: '=' as '=',\n      left: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        property: {\n          type: n.Identifier,\n          name: exportName,\n        },\n      },\n      right: {\n        type: n.Identifier,\n        name: varName,\n      },\n    },\n  };\n}\n\n/**\n * Object.defineProperty(exports, { __esModule: true })\n */\nexport function generateEsModuleSpecifier() {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'Object',\n        },\n        property: {\n          type: n.Identifier,\n          name: 'defineProperty',\n        },\n      },\n      arguments: [\n        {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        {\n          type: n.Literal,\n          value: '__esModule',\n          raw: '\"__esModule\"',\n        },\n        {\n          type: n.ObjectExpression,\n          properties: [\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'value',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n          ],\n        },\n      ],\n    },\n  };\n}\n\n/**\n * Object.defineProperty(exports, $exportName, {\n *   enumerable: true,\n *   configurable: true,\n *   get: function get() {\n *     return $localName;\n *   }\n * })\n */\nexport function generateExportGetter(\n  exportObj:\n    | { type: 'Identifier'; name: string }\n    | { type: 'Literal'; value: string },\n  local: ESTree.Expression\n) {\n  return {\n    type: n.ExpressionStatement,\n    expression: {\n      type: n.CallExpression,\n      callee: {\n        type: n.MemberExpression,\n        computed: false,\n        object: {\n          type: n.Identifier,\n          name: 'Object',\n        },\n        property: {\n          type: n.Identifier,\n          name: 'defineProperty',\n        },\n      },\n      arguments: [\n        {\n          type: n.Identifier,\n          name: 'exports',\n        },\n        exportObj,\n        {\n          type: n.ObjectExpression,\n          properties: [\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'enumerable',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'configurable',\n              },\n              computed: false,\n              value: {\n                type: n.Literal,\n                value: true,\n                raw: 'true',\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n            {\n              type: n.Property,\n              key: {\n                type: n.Identifier,\n                name: 'get',\n              },\n              computed: false,\n              value: {\n                type: n.FunctionExpression,\n                id: {\n                  type: n.Identifier,\n                  name: 'get',\n                },\n                generator: false,\n                async: false,\n                params: [],\n                body: {\n                  type: n.BlockStatement,\n                  body: [\n                    {\n                      type: n.ReturnStatement,\n                      argument: local,\n                    },\n                  ],\n                },\n              },\n              kind: 'init' as 'init',\n              method: false,\n              shorthand: false,\n            },\n          ],\n        },\n      ],\n    },\n  };\n}\n\nexport function generateInteropRequire() {\n  return {\n    type: n.FunctionDeclaration,\n    params: [\n      {\n        type: n.Identifier,\n        name: 'obj' as 'obj',\n      },\n    ],\n    body: {\n      type: n.BlockStatement,\n      body: [\n        {\n          type: n.ReturnStatement,\n          argument: {\n            type: n.ConditionalExpression,\n            test: {\n              type: n.LogicalExpression,\n              left: {\n                type: n.Identifier,\n                name: 'obj',\n              },\n              right: {\n                type: n.MemberExpression,\n                object: {\n                  type: n.Identifier,\n                  name: 'obj',\n                },\n                computed: false,\n                property: {\n                  type: n.Identifier,\n                  name: '__esModule',\n                },\n              },\n              operator: '&&',\n            },\n            consequent: {\n              type: n.Identifier,\n              name: 'obj',\n            },\n            alternate: {\n              type: n.ObjectExpression,\n              properties: [\n                {\n                  type: n.Property,\n                  key: {\n                    type: n.Identifier,\n                    name: 'default',\n                  },\n                  value: {\n                    type: n.Identifier,\n                    name: 'obj',\n                  },\n                  kind: 'init' as 'init',\n                  computed: false,\n                  method: false,\n                  shorthand: false,\n                },\n              ],\n            },\n          },\n        },\n      ],\n    },\n    async: false,\n    generator: false,\n    id: {\n      type: n.Identifier,\n      name: '$_csb__interopRequireDefault',\n    },\n  };\n}\n\nexport function generateInteropRequireExpression(\n  argument: ESTree.Expression,\n  localName: string\n) {\n  return {\n    type: n.VariableDeclaration,\n    kind: 'var' as 'var',\n    declarations: [\n      {\n        type: n.VariableDeclarator,\n        init: {\n          type: n.CallExpression,\n          callee: {\n            type: n.Identifier,\n            name: '$_csb__interopRequireDefault',\n          },\n          arguments: [argument],\n        },\n        id: {\n          type: n.Identifier,\n          name: localName,\n        },\n      },\n    ],\n  };\n}\n","import * as astring from 'astring';\nimport * as meriyah from 'meriyah';\nimport { Identifier } from 'meriyah/dist/estree';\n\n/**\n * Add support for next syntax\n */\nexport const customGenerator = {\n  ...astring.baseGenerator,\n  FieldDefinition(\n    node: meriyah.ESTree.FieldDefinition,\n    state: { write(s: string): void }\n  ) {\n    // Support class fields\n\n    if (node.static) {\n      state.write('static ');\n    }\n    state.write((node.key as Identifier).name);\n    state.write(' = ');\n    this[node.value.type](node.value, state);\n  },\n};\n","// This code is written to be performant, that's why we opted to ignore these linting issues\n/* eslint-disable no-loop-func, no-continue */\nimport * as meriyah from 'meriyah';\nimport * as astring from 'astring';\nimport * as escope from 'escope';\nimport { basename } from 'path';\nimport { walk } from 'estree-walker';\nimport { flatten } from 'lodash-es';\nimport { Property } from 'meriyah/dist/estree';\nimport { Syntax as n } from './syntax';\nimport {\n  generateRequireStatement,\n  generateAllExportsIterator,\n  generateExportStatement,\n  generateEsModuleSpecifier,\n  generateInteropRequire,\n  generateInteropRequireExpression,\n  generateExportGetter,\n} from './utils';\nimport { customGenerator } from './generator';\n\n/**\n * Converts esmodule code to commonjs code, built to be as fast as possible\n */\nexport function convertEsModule(code: string) {\n  const usedVarNames = {};\n  const varsToRename = {};\n  const trackedExports = {};\n\n  const getVarName = (name: string) => {\n    let usedName = name.replace(/(\\.|-|@)/g, '');\n    while (usedVarNames[usedName]) {\n      usedName += '_';\n    }\n    usedVarNames[usedName] = true;\n    return usedName;\n  };\n\n  let program = meriyah.parseModule(code, { next: true });\n\n  let i = 0;\n  let importOffset = 0;\n\n  let addedSpecifier = false;\n  function addEsModuleSpecifier() {\n    if (addedSpecifier) {\n      return;\n    }\n    addedSpecifier = true;\n\n    program.body.unshift(generateEsModuleSpecifier());\n    i++;\n  }\n\n  let addedDefaultInterop = false;\n  function addDefaultInterop() {\n    if (addedDefaultInterop) {\n      return;\n    }\n    addedDefaultInterop = true;\n\n    program.body.push(generateInteropRequire());\n  }\n\n  // If there is a declaration of `exports` (`var exports = []`), we need to rename this\n  // variable as it's a reserved keyword\n  let exportsDefined = false;\n  // @ts-ignore\n  program = walk(program, {\n    enter(node, parent) {\n      if (node.type === n.VariableDeclaration) {\n        // We don't rename exports vars in functions, only on root level\n        if (parent.type === n.BlockStatement && exportsDefined === false) {\n          this.skip();\n        }\n      } else if (node.type === n.VariableDeclarator) {\n        const declNode = node as meriyah.ESTree.VariableDeclarator;\n        if (\n          declNode.id.type === n.Identifier &&\n          declNode.id.name === 'exports'\n        ) {\n          exportsDefined = true;\n        }\n      } else if (node.type === n.Identifier && exportsDefined) {\n        const idNode = node as meriyah.ESTree.Identifier;\n        if (idNode.name === 'exports') {\n          idNode.name = '__$csb_exports';\n          this.replace(idNode);\n        }\n      } else if (!exportsDefined && parent != null) {\n        // Skip, we don't need to go deeper now\n        this.skip();\n      }\n    },\n  });\n\n  for (; i < program.body.length; i++) {\n    const statement = program.body[i];\n\n    if (statement.type === n.ExportAllDeclaration) {\n      // export * from './test';\n      // TO:\n      // const _csb = require('./test');\n      // Object.keys(_csb).forEach(key => {\n      //   if (key === 'default' || key === '__esModule')\n      //     return;\n      //   exports[key] = _csb[key])\n      // }\n\n      addEsModuleSpecifier();\n      const { source } = statement;\n      if (typeof source.value !== 'string') {\n        continue;\n      }\n      const varName = getVarName(`$csb__${basename(source.value, '.js')}`);\n\n      program.body[i] = generateRequireStatement(varName, source.value);\n      i++;\n      program.body.splice(i, 0, generateAllExportsIterator(varName));\n    } else if (statement.type === n.ExportNamedDeclaration) {\n      // export { a } from './test';\n      // TO:\n      // const _csb = require('./test');\n      // exports.a = _csb.a;\n\n      addEsModuleSpecifier();\n      if (statement.source) {\n        // export { ... } from ''\n        const { source } = statement;\n        if (typeof source.value !== 'string') {\n          continue;\n        }\n        const varName = getVarName(`$csb__${basename(source.value, '.js')}`);\n\n        if (\n          statement.specifiers.length === 1 &&\n          statement.specifiers[0].type === n.ExportSpecifier &&\n          statement.specifiers[0].local.name === 'default'\n        ) {\n          // In this case there's a default re-export. So we need to wrap it in a interopRequireDefault to make sure\n          // that default is exposed.\n          addDefaultInterop();\n          program.body[i] = generateInteropRequireExpression(\n            {\n              type: n.CallExpression,\n              callee: {\n                type: n.Identifier,\n                name: 'require',\n              },\n              arguments: [\n                {\n                  type: n.Literal,\n                  value: source.value,\n                },\n              ],\n            },\n            varName\n          );\n        } else {\n          program.body[i] = generateRequireStatement(varName, source.value);\n        }\n\n        if (statement.specifiers.length) {\n          i++;\n\n          statement.specifiers\n            .reverse()\n            .forEach((specifier: meriyah.ESTree.ExportSpecifier) => {\n              program.body.splice(\n                i,\n                0,\n                generateExportGetter(\n                  { type: n.Literal, value: specifier.exported.name },\n                  {\n                    type: n.MemberExpression,\n                    object: {\n                      type: n.Identifier,\n                      name: varName,\n                    },\n                    property: {\n                      type: n.Identifier,\n                      name: specifier.local.name,\n                    },\n                  }\n                )\n              );\n            });\n        }\n      } else if (statement.declaration) {\n        // First remove the export statement\n        program.body[i] = statement.declaration;\n\n        if (\n          statement.declaration.type === n.FunctionDeclaration ||\n          statement.declaration.type === n.ClassDeclaration\n        ) {\n          // export function test() {}\n\n          const varName = statement.declaration.id.name;\n          i++;\n          program.body.splice(i, 0, generateExportStatement(varName, varName));\n        } else {\n          // export const a = {}\n\n          const declaration = statement.declaration as meriyah.ESTree.VariableDeclaration;\n\n          program.body.splice(\n            i,\n            1,\n            declaration,\n            // @ts-ignore\n            ...flatten(\n              declaration.declarations.map(node => {\n                if (node.id.type === n.ObjectPattern) {\n                  // export const { a } = c;\n                  return flatten(\n                    node.id.properties.map(property => {\n                      if (\n                        property.type !== n.Property ||\n                        property.value.type !== n.Identifier\n                      ) {\n                        return false;\n                      }\n\n                      trackedExports[property.value.name] = property.value.name;\n                      return generateExportStatement(\n                        property.value.name,\n                        property.value.name\n                      );\n                    })\n                  ).filter(Boolean);\n                }\n                if (node.id.type === n.Identifier) {\n                  trackedExports[node.id.name] = node.id.name;\n\n                  return generateExportStatement(node.id.name, node.id.name);\n                }\n\n                return null;\n              })\n            ).filter(Boolean)\n          );\n        }\n      } else if (statement.specifiers) {\n        program.body.splice(i, 1);\n        i--;\n        statement.specifiers.forEach(specifier => {\n          if (specifier.type === n.ExportSpecifier) {\n            i++;\n\n            program.body.unshift(\n              generateExportGetter(\n                { type: n.Literal, value: specifier.exported.name },\n                {\n                  type: n.Identifier,\n                  name: specifier.local.name,\n                }\n              )\n            );\n          }\n        });\n      }\n    } else if (statement.type === n.ExportDefaultDeclaration) {\n      addEsModuleSpecifier();\n      // export default function() {}\n      // export default class A {}\n      const varName = getVarName(`$csb__default`);\n      // First remove the export statement\n      if (statement.declaration) {\n        if (statement.declaration.type === n.FunctionDeclaration) {\n          // @ts-ignore\n          statement.declaration.type = n.FunctionExpression;\n        } else if (statement.declaration.type === n.ClassDeclaration) {\n          // @ts-ignore\n          statement.declaration.type = n.ClassExpression;\n        }\n        const newDeclaration = statement.declaration as meriyah.ESTree.Expression;\n\n        // Create a var with the export\n        if (\n          statement.declaration.type === n.ClassExpression ||\n          statement.declaration.type === n.FunctionExpression\n        ) {\n          if (!statement.declaration.id) {\n            // If the function or class has no name, we give it to it\n            statement.declaration.id = {\n              type: n.Identifier,\n              name: varName,\n            };\n          }\n\n          program.body[\n            i\n          ] = statement.declaration as meriyah.ESTree.DeclarationStatement;\n          i++;\n\n          program.body.splice(\n            i,\n            0,\n            generateExportStatement(statement.declaration.id.name, 'default')\n          );\n        } else {\n          program.body[i] = {\n            type: n.VariableDeclaration,\n            kind: 'var' as 'var',\n\n            declarations: [\n              {\n                type: n.VariableDeclarator,\n                id: {\n                  type: n.Identifier,\n                  name: varName,\n                },\n                init: newDeclaration,\n              },\n            ],\n          };\n          i++;\n\n          program.body.splice(\n            i,\n            0,\n            generateExportStatement(varName, 'default')\n          );\n        }\n\n        if (\n          newDeclaration.type === n.ClassDeclaration ||\n          newDeclaration.type === n.FunctionExpression\n        ) {\n          trackedExports[newDeclaration.id.name] = 'default';\n        }\n      }\n    } else if (statement.type === n.ImportDeclaration) {\n      // @ts-ignore Wrong typing in lib?\n      const source: meriyah.ESTree.Literal = statement.source;\n\n      if (typeof source.value !== 'string') {\n        continue;\n      }\n      const varName = getVarName(`$csb__${basename(source.value, '.js')}`);\n\n      // Remove this statement\n      program.body.splice(i, 1);\n      // Create require statement instead of the import\n      program.body.splice(\n        importOffset,\n        0,\n        generateRequireStatement(varName, source.value)\n      );\n      importOffset++;\n\n      statement.specifiers.reverse().forEach(specifier => {\n        let localName: string;\n        let importName: string;\n\n        if (specifier.type === n.ImportSpecifier) {\n          // import {Test} from 'test';\n          // const _test = require('test');\n          // var Test = _test.Test;\n\n          // Mark that we need to rename all references to this variable\n          // to the new require statement. This will happen in the second pass.\n          varsToRename[specifier.local.name] = [\n            varName,\n            specifier.imported.name,\n          ];\n\n          return;\n        }\n        i++;\n\n        if (specifier.type === n.ImportDefaultSpecifier) {\n          // import Test from 'test';\n          // const _test = require('test');\n          // var Test = interopRequireDefault(_test).default;\n          localName = specifier.local.name;\n          importName = 'default';\n          addDefaultInterop();\n\n          program.body.splice(\n            // After the require statement\n            importOffset,\n            0,\n            generateInteropRequireExpression(\n              { type: n.Identifier, name: varName },\n              localName\n            )\n          );\n\n          varsToRename[localName] = [localName, 'default'];\n          importOffset++;\n          return;\n        }\n\n        if (specifier.type === n.ImportNamespaceSpecifier) {\n          // import * as Test from 'test';\n          // const _test = require('test');\n          // var Test = _test;\n          localName = specifier.local.name;\n          importName = null;\n        }\n\n        // insert in index 1 instead of 0 to be after the interopRequireDefault\n        program.body.splice(importOffset, 0, {\n          type: n.VariableDeclaration,\n          kind: 'var' as 'var',\n          declarations: [\n            {\n              type: n.VariableDeclarator,\n              id: {\n                type: n.Identifier,\n                name: localName,\n              },\n              init: importName\n                ? {\n                    type: n.MemberExpression,\n                    computed: false,\n                    object: {\n                      type: n.Identifier,\n                      name: varName,\n                    },\n                    property: {\n                      type: n.Identifier,\n                      name: importName,\n                    },\n                  }\n                : {\n                    type: n.Identifier,\n                    name: varName,\n                  },\n            },\n          ],\n        });\n        importOffset++;\n      });\n    }\n  }\n\n  if (\n    Object.keys(varsToRename).length > 0 ||\n    Object.keys(trackedExports).length > 0\n  ) {\n    // Convert all the object shorthands to not shorthands, needed later when we rename variables so we\n    // don't change to the key literals\n    // @ts-ignore\n    program = walk(program, {\n      enter(node, parent, prop, index) {\n        if (node.type === n.Property) {\n          const property = node as Property;\n          if (\n            property.shorthand &&\n            property.value.type !== n.AssignmentPattern // Not a default initializer\n          ) {\n            property.value = {\n              ...property.key,\n            };\n            property.shorthand = false;\n          }\n        }\n      },\n    });\n\n    // A second pass where we rename all references to imports that were marked before.\n    const scopeManager = escope.analyze(program);\n\n    scopeManager.acquire(program);\n    scopeManager.scopes.forEach(scope => {\n      scope.references.forEach(ref => {\n        // If the variable cannot be resolved, it must be the var that we had\n        // just changed.\n        if (\n          Object.prototype.hasOwnProperty.call(\n            varsToRename,\n            ref.identifier.name\n          ) &&\n          ref.resolved === null &&\n          !ref.writeExpr\n        ) {\n          ref.identifier.name = varsToRename[ref.identifier.name].join('.');\n        }\n\n        if (\n          Object.prototype.hasOwnProperty.call(\n            trackedExports,\n            ref.identifier.name\n          ) &&\n          ref.isWrite() &&\n          ref.resolved === null &&\n          !ref.init\n        ) {\n          const name = trackedExports[ref.identifier.name];\n          ref.identifier.name = `exports.${name} = ${ref.identifier.name}`;\n        }\n      });\n    });\n    scopeManager.detach();\n  }\n\n  const finalCode = astring.generate(program as any, {\n    generator: customGenerator,\n  });\n\n  return `\"use strict\";\\n${finalCode}`;\n}\n","const lineRegex = /require\\s*\\(['|\"|`]([^\"|'|`]*)['|\"|`]\\)|require\\s*\\((.*)\\)/g;\nconst partRegex = /require\\s*\\(['|\"|`]([^\"|'|`]*)['|\"|`]\\)|require\\s*\\((.*)\\)/;\nconst commentRegex = /^(\\s*\\/?\\*)|(\\/\\/)/;\n\n/**\n * This is the regex version of getting all require statements, it makes the assumption\n * that the file is commonjs and only has `require()` statements.\n */\nexport default function getRequireStatements(code: string) {\n  const results = [];\n  code.split('\\n').forEach(line => {\n    const commentMatch =\n      line.indexOf('/*#__PURE__*/') === -1 && commentRegex.exec(line);\n\n    if (commentMatch && commentMatch.index === 0) {\n      return;\n    }\n\n    if (line.includes('require(\"\".concat')) {\n      throw new Error('Glob require is part of statement');\n    }\n\n    const matches = line.match(lineRegex);\n\n    if (matches) {\n      matches.forEach(codePart => {\n        const match = codePart.match(partRegex);\n\n        if (match) {\n          if (commentMatch && line.indexOf(codePart) > commentMatch.index) {\n            // It's in a comment\n            return;\n          }\n\n          if (match[1]) {\n            if (\n              !results.find(r => r.type === 'direct' && r.path === match[1])\n            ) {\n              results.push({\n                type: 'direct',\n                path: match[1],\n              });\n            }\n          } else if (match[2] && /'|\"|`/.test(match[2])) {\n            if (!results.find(r => r.type === 'glob' && r.path === match[2])) {\n              results.push({\n                type: 'glob',\n                path: match[2],\n              });\n            }\n          }\n        }\n      });\n    }\n  });\n\n  return results;\n}\n","/* eslint-enable import/default */\nimport { isBabel7 } from '@codesandbox/common/lib/utils/is-babel-7';\nimport isESModule from 'sandbox/eval/utils/is-es-module';\n/* eslint-disable import/default */\n// @ts-ignore\nimport BabelWorker from 'worker-loader?publicPath=/&name=babel-transpiler.[hash:8].worker.js!./worker/index';\n\nimport delay from '../../../utils/delay';\nimport { endMeasure, measure } from '../../../utils/metrics';\nimport Manager from '../../manager';\nimport { LoaderContext } from '../../transpiled-module';\nimport WorkerTranspiler from '../worker-transpiler';\nimport getBabelConfig from './babel-parser';\nimport { hasNewSyntax } from './check';\nimport { convertEsModule } from './convert-esmodule';\nimport regexGetRequireStatements from './worker/simple-get-require-statements';\n\nconst global = window as any;\n\n// Right now this is in a worker, but when we're going to allow custom plugins\n// we need to move this out of the worker again, because the config needs\n// to support custom plugins\nclass BabelTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('babel-loader', BabelWorker, 3, { hasFS: true, preload: true });\n  }\n\n  startupWorkersInitialized = false;\n\n  async getWorker() {\n    while (typeof global.babelworkers === 'undefined') {\n      await delay(50); // eslint-disable-line\n    }\n\n    if (global.babelworkers.length === 0) {\n      return super.getWorker();\n    }\n\n    // We set these up in startup.js.\n    return global.babelworkers.pop();\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<{ transpiledCode: string }> {\n    return new Promise((resolve, reject) => {\n      const { path } = loaderContext;\n      let newCode = code;\n\n      const isNodeModule = path.startsWith('/node_modules');\n\n      let convertedToEsmodule = false;\n      if (isESModule(newCode) && isNodeModule) {\n        try {\n          measure(`esconvert-${path}`);\n          newCode = convertEsModule(newCode);\n          endMeasure(`esconvert-${path}`, { silent: true });\n          convertedToEsmodule = true;\n        } catch (e) {\n          console.warn(\n            `Error when converting '${path}' esmodule to commonjs: ${e.message}`\n          );\n        }\n      }\n\n      try {\n        // When we find a node_module that already is commonjs we will just get the\n        // dependencies from the file and return the same code. We get the dependencies\n        // with a regex since commonjs modules just have `require` and regex is MUCH\n        // faster than generating an AST from the code.\n        if (\n          (loaderContext.options.simpleRequire || isNodeModule) &&\n          !hasNewSyntax(newCode, path) &&\n          !(isESModule(newCode) && !convertedToEsmodule)\n        ) {\n          regexGetRequireStatements(newCode).forEach(dependency => {\n            if (dependency.isGlob) {\n              loaderContext.addDependenciesInDirectory(dependency.path);\n            } else {\n              loaderContext.addDependency(dependency.path);\n            }\n          });\n\n          resolve({\n            transpiledCode: newCode,\n          });\n          return;\n        }\n      } catch (e) {\n        console.warn(\n          `Error when reading dependencies of '${path}' using quick method: '${e.message}'`\n        );\n      }\n\n      const configs = loaderContext.options.configurations;\n\n      const foundConfig = configs.babel && configs.babel.parsed;\n\n      const loaderOptions = loaderContext.options || {};\n\n      const dependencies =\n        (configs.package &&\n          configs.package.parsed &&\n          configs.package.parsed.dependencies) ||\n        {};\n\n      const devDependencies =\n        (configs.package &&\n          configs.package.parsed &&\n          configs.package.parsed.devDependencies) ||\n        {};\n\n      const isV7 =\n        loaderContext.options.isV7 || isBabel7(dependencies, devDependencies);\n\n      const hasMacros = Object.keys(dependencies).some(\n        d => d.indexOf('macro') > -1 || d.indexOf('codegen') > -1\n      );\n\n      const babelConfig = getBabelConfig(\n        foundConfig || (loaderOptions as any).config,\n        loaderOptions,\n        path,\n        isV7\n      );\n\n      this.queueTask(\n        {\n          code: newCode,\n          config: babelConfig,\n          path,\n          loaderOptions,\n          babelTranspilerOptions:\n            configs &&\n            configs.babelTranspiler &&\n            configs.babelTranspiler.parsed,\n          sandboxOptions: configs && configs.sandbox && configs.sandbox.parsed,\n          version: isV7 ? 7 : 6,\n          hasMacros,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n\n  async getTranspilerContext(manager: Manager): Promise<any> {\n    return new Promise(async resolve => {\n      const baseConfig = await super.getTranspilerContext(manager);\n\n      const babelTranspilerOptions =\n        manager.configurations &&\n        manager.configurations.babelTranspiler &&\n        manager.configurations.babelTranspiler.parsed;\n\n      this.queueTask(\n        {\n          type: 'get-babel-context',\n          babelTranspilerOptions,\n        },\n        'babelContext',\n        // @ts-ignore\n        {},\n        (err, data) => {\n          const { version, availablePlugins, availablePresets } = data as any;\n\n          resolve({\n            ...baseConfig,\n            babelVersion: version,\n            availablePlugins,\n            availablePresets,\n            babelTranspilerOptions,\n          });\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new BabelTranspiler();\n\nexport { BabelTranspiler };\n\nexport default transpiler;\n","import Transpiler from '..';\n\nclass JSONTranspiler extends Transpiler {\n  doTranspilation(code: string) {\n    const result = `\n      module.exports = JSON.parse(${JSON.stringify(code || '')})\n    `;\n\n    return Promise.resolve({\n      transpiledCode: result,\n    });\n  }\n}\n\nconst transpiler = new JSONTranspiler('json-loader');\n\nexport { JSONTranspiler };\n\nexport default transpiler;\n","import Transpiler from '..';\n\nclass RawTranspiler extends Transpiler {\n  constructor() {\n    super('raw-loader');\n  }\n\n  doTranspilation(code: string) {\n    return Promise.resolve({\n      transpiledCode: `\n      module.exports = ${JSON.stringify(code)};`,\n    });\n  }\n}\n\nconst transpiler = new RawTranspiler();\n\nexport { RawTranspiler };\n\nexport default transpiler;\n","import semver from 'semver';\nimport { getAbsoluteDependencies } from '@codesandbox/common/lib/utils/dependencies';\nimport Manager from 'sandbox/eval/manager';\n\nfunction isMinimalSemverVersion(version: string, minimalVersion: string) {\n  try {\n    return semver.gte(version, minimalVersion);\n  } catch (e) {\n    // Semver couldn't be parsed, we assume that we're on the bleeding edge now, so true.\n    return true;\n  }\n}\n\nexport async function isMinimalReactVersion(\n  version: string,\n  minimalVersion: string\n): Promise<boolean> {\n  if (version) {\n    const absoluteDependencies = await getAbsoluteDependencies({\n      'react-dom': version,\n    });\n\n    return (\n      absoluteDependencies['react-dom'].startsWith('0.0.0') ||\n      isMinimalSemverVersion(absoluteDependencies['react-dom'], minimalVersion)\n    );\n  }\n\n  return false;\n}\n\n/**\n * Decide whether React Refresh hot module reloading strategy is supported by React\n */\nexport async function hasRefresh(\n  dependencies: { name: string; version: string }[]\n) {\n  const hasReactRefresh = dependencies.find(n => n.name === 'react-refresh');\n  if (hasReactRefresh) {\n    const reactDom = dependencies.find(dep => dep.name === 'react-dom');\n\n    if (reactDom) {\n      return isMinimalReactVersion(reactDom.version, '16.9.0');\n    }\n  }\n\n  return false;\n}\n\n/**\n * We unmount the component tree to ensure that `componentWillUnmount` et all are called\n */\nexport function cleanUsingUnmount(manager: Manager) {\n  try {\n    const { children } = document.body;\n    // Do unmounting for react\n    if (\n      manager.manifest &&\n      manager.manifest.dependencies.find(n => n.name === 'react-dom')\n    ) {\n      const reactDOMModule = manager.resolveModule('react-dom', '');\n      const reactDOM = manager.evaluateModule(reactDOMModule);\n\n      reactDOM.unmountComponentAtNode(document.body);\n\n      for (let i = 0; i < children.length; i += 1) {\n        if (children[i].tagName === 'DIV') {\n          reactDOM.unmountComponentAtNode(children[i]);\n        }\n      }\n    }\n  } catch (e) {\n    /* don't do anything with this error */\n\n    if (process.env.NODE_ENV === 'development') {\n      console.error('Problem while cleaning up');\n      console.error(e);\n    }\n  }\n}\n\nexport const aliases = {\n  // Directly match react-native to react-native-web.\n  // Attempt to use react-native internals shouldn't work on web.\n  'react-native$': 'react-native-web',\n  // Alias core react-native internals to react-native-web equivalents\n  'react-native/Libraries/EventEmitter/RCTDeviceEventEmitter$':\n    'react-native-web/dist/vendor/react-native/NativeEventEmitter/RCTDeviceEventEmitter',\n  'react-native/Libraries/vendor/emitter/EventEmitter$':\n    'react-native-web/dist/vendor/react-native/emitter/EventEmitter',\n  'react-native/Libraries/vendor/emitter/EventSubscriptionVendor$':\n    'react-native-web/dist/vendor/react-native/emitter/EventSubscriptionVendor',\n  'react-native/Libraries/EventEmitter/NativeEventEmitter$':\n    'react-native-web/dist/vendor/react-native/NativeEventEmitter',\n  // Alias core react-native asset management internals to unimodule equivalents.\n  'react-native/Libraries/Image/AssetSourceResolver$':\n    'expo-asset/build/AssetSourceResolver',\n  'react-native/Libraries/Image/assetPathUtils$':\n    'expo-asset/build/Image/assetPathUtils',\n  'react-native/Libraries/Image/resolveAssetSource$':\n    'expo-asset/build/resolveAssetSource',\n};\n","import Transpiler from '..';\nimport { LoaderContext } from '../../transpiled-module';\n\nclass SVGRTranspiler extends Transpiler {\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const { svgrTransform } = await import('./transpiler');\n    // We follow CRA behaviour, so the code with the component is not the default\n    // export, this forces that.\n\n    const codeIsHttp = loaderContext._module.module.code.startsWith('http');\n    const state = {\n      webpack: {\n        previousExport: `\"${\n          codeIsHttp\n            ? loaderContext._module.module.code\n            : loaderContext._module.module.path\n        }\"`,\n      },\n    };\n\n    let downloadedCode = code;\n\n    if (code.startsWith('http')) {\n      await fetch(code)\n        .then(res => res.text())\n        .then(r => {\n          downloadedCode = r;\n        });\n    }\n\n    const result = await svgrTransform(downloadedCode, state);\n\n    return {\n      transpiledCode: result,\n    };\n  }\n}\n\nconst transpiler = new SVGRTranspiler('svgr-loader');\n\nexport { SVGRTranspiler };\n\nexport default transpiler;\n","// @ts-ignore\nimport SassWorker from 'worker-loader?publicPath=/&name=sass-transpiler.[hash:8].worker.js!./worker';\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass SassTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('sass-loader', SassWorker, 1, { hasFS: true });\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    const indentedSyntax =\n      loaderContext.options.indentedSyntax == null\n        ? loaderContext.path.endsWith('.sass')\n        : true;\n\n    return new Promise((resolve, reject) => {\n      if (code === '' || code == null) {\n        resolve({ transpiledCode: '' });\n        return;\n      }\n\n      this.queueTask(\n        {\n          code,\n          path: loaderContext.path,\n          indentedSyntax,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new SassTranspiler();\n\nexport { SassTranspiler };\n\nexport default transpiler;\n","import { LoaderContext } from 'sandbox/eval/transpiled-module';\nimport Transpiler from '..';\n\nconst HELPER_PATH = '/node_modules/csbbust/refresh-helper.js';\n\nconst HELPER_CODE = `\nconst Refresh = require('react-refresh/runtime');\n\nfunction debounce(func, wait, immediate) {\n\tvar timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\t};\n};\n\nconst enqueueUpdate = () => {\n  try {\n    Refresh.performReactRefresh()\n  } catch (e) {\n    module.hot.decline();\n    throw e;\n  }\n}\n\nfunction isReactRefreshBoundary(moduleExports) {\n  if (Object.keys(Refresh).length === 0) {\n    return false;\n  }\n\n  if (Refresh.isLikelyComponentType(moduleExports)) {\n    return true;\n  }\n  if (moduleExports == null || typeof moduleExports !== 'object') {\n    // Exit if we can't iterate over exports.\n    return false;\n  }\n  let hasExports = false;\n  let areAllExportsComponents = true;\n  for (const key in moduleExports) {\n    hasExports = true;\n    if (key === '__esModule') {\n      continue;\n    }\n    const desc = Object.getOwnPropertyDescriptor(moduleExports, key);\n    if (desc && desc.get) {\n      // Don't invoke getters as they may have side effects.\n      return false;\n    }\n    const exportValue = moduleExports[key];\n    if (!Refresh.isLikelyComponentType(exportValue)) {\n      areAllExportsComponents = false;\n    }\n  }\n  return hasExports && areAllExportsComponents;\n};\n\nvar registerExportsForReactRefresh = (moduleExports, moduleID) => {\n  Refresh.register(moduleExports, moduleID + ' %exports%');\n  if (moduleExports == null || typeof moduleExports !== 'object') {\n    // Exit if we can't iterate over exports.\n    // (This is important for legacy environments.)\n    return;\n  }\n  for (const key in moduleExports) {\n    const desc = Object.getOwnPropertyDescriptor(moduleExports, key);\n    if (desc && desc.get) {\n      // Don't invoke getters as they may have side effects.\n      continue;\n    }\n    const exportValue = moduleExports[key];\n    const typeID = moduleID + ' %exports% ' + key;\n    Refresh.register(exportValue, typeID);\n  }\n};\n\nmodule.exports = {\n  enqueueUpdate: debounce(enqueueUpdate, 30),\n  isReactRefreshBoundary,\n  registerExportsForReactRefresh\n};\n`.trim();\n\n/**\nvar prevRefreshReg = window.$RefreshReg$;\nvar prevRefreshSig = window.$RefreshSig$;\nvar RefreshRuntime = require('react-refresh/runtime');\n\nwindow.$RefreshReg$ = (type, id) => {\n  // Note module.id is webpack-specific, this may vary in other bundlers\n  const fullId = module.id + ' ' + id;\n  RefreshRuntime.register(type, fullId);\n}\nwindow.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n\ntry {\n  ${sourceCode}\n} finally {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\n\nconst _csbRefreshUtils = require('${HELPER_PATH}');\n\nif (_csbRefreshUtils.isReactRefreshBoundary && _csbRefreshUtils.isReactRefreshBoundary(module.exports)) {\n  _csbRefreshUtils.registerExportsForReactRefresh(module.exports, module.id)\n  module.hot.accept();\n  _csbRefreshUtils.enqueueUpdate();\n}\n`\n */\n\n/**\n * This is the compressed version of the code in the comment above. We compress the code\n * to a single line so we don't mess with the source mapping when showing errors.\n */\nconst getWrapperCode = (sourceCode: string) =>\n  `var prevRefreshReg=window.$RefreshReg$,prevRefreshSig=window.$RefreshSig$,RefreshRuntime=require(\"react-refresh/runtime\");window.$RefreshReg$=((e,r)=>{const s=module.id+\" \"+r;RefreshRuntime.register(e,s)}),window.$RefreshSig$=RefreshRuntime.createSignatureFunctionForTransform;try{${sourceCode}\n}finally{window.$RefreshReg$=prevRefreshReg,window.$RefreshSig$=prevRefreshSig}const _csbRefreshUtils=require(\"${HELPER_PATH}\");_csbRefreshUtils.isReactRefreshBoundary&&_csbRefreshUtils.isReactRefreshBoundary(module.exports)&&(_csbRefreshUtils.registerExportsForReactRefresh(module.exports,module.id),module.hot.accept(),_csbRefreshUtils.enqueueUpdate());`.trim();\n\nclass RefreshTranspiler extends Transpiler {\n  constructor() {\n    super('refresh-loader');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    loaderContext.addDependency('react-refresh/runtime');\n    loaderContext.emitModule(HELPER_PATH, HELPER_CODE, '/', false, false);\n\n    const newCode = getWrapperCode(code);\n\n    return Promise.resolve({\n      transpiledCode: newCode || '',\n    });\n  }\n}\n\nconst transpiler = new RefreshTranspiler();\n\nexport { RefreshTranspiler };\n\nexport default transpiler;\n","import Transpiler from '..';\nimport { LoaderContext } from '../../transpiled-module';\n\n/**\n * Mainly responsible for inlining css imports\n */\nclass PostCSSCompiler extends Transpiler {\n  constructor() {\n    super('postcss-compiler');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'postcss-compiler' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new PostCSSCompiler();\n\nexport { PostCSSCompiler };\n\nexport default transpiler;\n","import _debug from '@codesandbox/common/lib/utils/debug';\n\nimport Manager from 'sandbox/eval/manager';\nimport { dispatch } from 'codesandbox-api';\nimport Preset from '..';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport svgrTranspiler from '../../transpilers/svgr';\nimport sassTranspiler from '../../transpilers/sass';\nimport refreshTranspiler from '../../transpilers/react/refresh-transpiler';\nimport styleProcessor from '../../transpilers/postcss';\nimport {\n  hasRefresh,\n  aliases,\n  cleanUsingUnmount,\n  isMinimalReactVersion,\n} from './utils';\n\nconst debug = _debug('cs:compiler:cra');\n\nasync function initializeReactDevTools() {\n  if (!window.opener) {\n    const { initialize: initializeDevTools, activate } = await import(\n      /* webpackChunkName: 'react-devtools-backend' */ 'react-devtools-inline/backend'\n    );\n    // The dispatch needs to happen before initializing, so that the backend can already listen\n    dispatch({ type: 'activate-react-devtools' });\n\n    // @ts-ignore\n    if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined') {\n      try {\n        // @ts-ignore We need to make sure that the existing chrome extension doesn't interfere\n        delete window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n      } catch (e) {\n        /* ignore */\n      }\n    }\n    // Call this before importing React (or any other packages that might import React).\n    initializeDevTools(window);\n    activate(window);\n  }\n}\n\n/**\n * When using React Refresh we need to evaluate some code before 'react-dom' is initialized\n * (https://github.com/facebook/react/issues/16604#issuecomment-528663101) this is the code.\n */\nasync function createRefreshEntry(manager: Manager) {\n  const entryModule = {\n    path: '/node_modules/__csb/react-dom-entrypoint.js',\n    code: `if (process.env.NODE_ENV !== 'production' && typeof window !== 'undefined') {\nconst runtime = require('react-refresh/runtime');\nruntime.injectIntoGlobalHook(window);\nwindow.$RefreshReg$ = () => {};\nwindow.$RefreshSig$ = () => type => type;\n}\n`,\n  };\n  manager.addModule(entryModule);\n\n  const tEntryModule = manager.getTranspiledModule(entryModule);\n  tEntryModule.setIsEntry(true);\n\n  await tEntryModule\n    .transpile(manager)\n    .then(() => tEntryModule.evaluate(manager, { force: true }));\n}\n\nconst BABEL7_CONFIG = {\n  isV7: true,\n  compileNodeModulesWithEnv: true,\n  config: {\n    plugins: [\n      ['proposal-decorators', { legacy: true }],\n      '@babel/plugin-transform-react-jsx-source',\n      'transform-flow-strip-types',\n      'transform-destructuring',\n      'babel-plugin-macros',\n      ['proposal-class-properties', { loose: true }],\n      ['proposal-object-rest-spread', { useBuiltIns: true }],\n      [\n        'transform-runtime',\n        {\n          corejs: false,\n          helpers: true,\n          regenerator: true,\n        },\n      ],\n      '@babel/plugin-proposal-optional-chaining',\n      '@babel/plugin-proposal-nullish-coalescing-operator',\n      'syntax-dynamic-import',\n    ],\n    presets: [\n      [\n        'env',\n        {\n          // We want Create React App to be IE 9 compatible until React itself\n          // no longer works with IE 9\n          targets: {\n            ie: 9,\n          },\n          // Users cannot override this behavior because this Babel\n          // configuration is highly tuned for ES5 support\n          ignoreBrowserslistConfig: true,\n          // If users import all core-js they're probably not concerned with\n          // bundle size. We shouldn't rely on magic to try and shrink it.\n          useBuiltIns: false,\n          // Do not transform modules to CJS\n          modules: false,\n        },\n      ],\n      'react',\n      'typescript',\n    ],\n  },\n};\n\nexport default function initialize() {\n  let initialized = false;\n  let refreshInitialized = false;\n  const preset = new Preset(\n    'create-react-app',\n    ['web.js', 'js', 'json', 'web.jsx', 'jsx', 'ts', 'tsx', 'mjs'],\n    aliases,\n    {\n      hasDotEnv: true,\n      processDependencies: async dependencies => {\n        if (\n          dependencies['react-dom'] &&\n          isMinimalReactVersion(dependencies['react-dom'], '16.9.0')\n        ) {\n          return { ...dependencies, 'react-refresh': '0.8.1' };\n        }\n\n        return dependencies;\n      },\n      setup: async manager => {\n        const dependencies = manager.manifest.dependencies;\n        const isRefresh = await hasRefresh(dependencies);\n\n        if (!initialized || refreshInitialized !== isRefresh) {\n          initialized = true;\n          refreshInitialized = isRefresh;\n          preset.resetTranspilers();\n\n          if (isRefresh) {\n            debug('Refresh is enabled, registering additional transpiler');\n            // Add react refresh babel plugin for non-node_modules\n\n            preset.registerTranspiler(\n              module =>\n                !module.path.startsWith('/node_modules') &&\n                /\\.m?(t|j)sx?$/.test(module.path) &&\n                !module.path.endsWith('.d.ts'),\n              [\n                {\n                  transpiler: babelTranspiler,\n                  options: {\n                    ...BABEL7_CONFIG,\n                    config: {\n                      ...BABEL7_CONFIG.config,\n                      plugins: [\n                        ...BABEL7_CONFIG.config.plugins,\n                        'react-refresh/babel',\n                      ],\n                    },\n                  },\n                },\n                { transpiler: refreshTranspiler },\n              ]\n            );\n          } else {\n            debug('Refresh is disabled');\n          }\n\n          preset.registerTranspiler(\n            module =>\n              /\\.m?(t|j)sx?$/.test(module.path) &&\n              !module.path.endsWith('.d.ts'),\n            [{ transpiler: babelTranspiler, options: BABEL7_CONFIG }]\n          );\n\n          preset.registerTranspiler(module => /\\.svg$/.test(module.path), [\n            { transpiler: svgrTranspiler },\n            { transpiler: babelTranspiler, options: BABEL7_CONFIG },\n          ]);\n\n          preset.registerTranspiler(\n            module => /\\.module\\.s[c|a]ss$/.test(module.path),\n            [\n              { transpiler: sassTranspiler },\n              { transpiler: styleProcessor },\n              {\n                transpiler: stylesTranspiler,\n                options: { module: true, hmrEnabled: isRefresh },\n              },\n            ]\n          );\n          preset.registerTranspiler(\n            module => /\\.module\\.css$/.test(module.path),\n            [\n              { transpiler: styleProcessor },\n              {\n                transpiler: stylesTranspiler,\n                options: { module: true, hmrEnabled: isRefresh },\n              },\n            ]\n          );\n\n          preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n            { transpiler: styleProcessor },\n            {\n              transpiler: stylesTranspiler,\n              options: { hmrEnabled: isRefresh },\n            },\n          ]);\n          preset.registerTranspiler(module => /\\.s[c|a]ss$/.test(module.path), [\n            { transpiler: sassTranspiler },\n            { transpiler: styleProcessor },\n            {\n              transpiler: stylesTranspiler,\n              options: { hmrEnabled: isRefresh },\n            },\n          ]);\n\n          preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n            { transpiler: jsonTranspiler },\n          ]);\n\n          preset.registerTranspiler(() => true, [\n            { transpiler: rawTranspiler },\n          ]);\n        }\n      },\n      preEvaluate: async manager => {\n        if (manager.isFirstLoad) {\n          await initializeReactDevTools();\n        }\n\n        if (await hasRefresh(manager.manifest.dependencies)) {\n          await createRefreshEntry(manager);\n        }\n\n        const reactDom = manager.manifest.dependencies.find(\n          n => n.name === 'react-dom'\n        );\n        if (\n          reactDom &&\n          !manager.webpackHMR &&\n          !(await isMinimalReactVersion(reactDom.version, '16.8.0'))\n        ) {\n          cleanUsingUnmount(manager);\n        }\n      },\n    }\n  );\n\n  return preset;\n}\n","/* eslint-disable import/default */\n// @ts-ignore\nimport TypeScriptWorker from 'worker-loader?publicPath=/&name=typescript-transpiler.[hash:8].worker.js!./typescript-worker';\n/* eslint-enable import/default */\nimport { getDependenciesFromConfig } from 'sandbox/eval/utils/get-dependencies';\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass TypeScriptTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('ts-loader', TypeScriptWorker, 3);\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return new Promise((resolve, reject) => {\n      const { path } = loaderContext;\n\n      let foundConfig = null;\n      let typescriptVersion = '3.4.1';\n      if (\n        loaderContext.options.configurations &&\n        loaderContext.options.configurations.typescript &&\n        loaderContext.options.configurations.typescript.parsed\n      ) {\n        foundConfig = loaderContext.options.configurations.typescript.parsed;\n      }\n\n      const dependencies = getDependenciesFromConfig(\n        loaderContext.options.configurations\n      );\n      if (dependencies && dependencies.typescript) {\n        typescriptVersion = dependencies.typescript;\n      }\n\n      this.queueTask(\n        {\n          code,\n          path,\n          config: foundConfig,\n          typescriptVersion,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new TypeScriptTranspiler();\n\nexport { TypeScriptTranspiler };\n\nexport default transpiler;\n","import { ParsedConfigurationFiles } from '@codesandbox/common/lib/templates/template';\n\nexport function getDependenciesFromConfig(\n  configurations: ParsedConfigurationFiles\n) {\n  if (\n    configurations &&\n    configurations.package &&\n    configurations.package.parsed\n  ) {\n    return {\n      ...configurations.package.parsed.devDependencies,\n      ...configurations.package.parsed.dependencies,\n    };\n  }\n\n  return {};\n}\n","/* eslint-disable import/default */\n/* eslint-disable import/no-named-as-default-member */\n/* eslint-disable import/no-named-as-default */\n// @ts-ignore\nimport StylusWorker from 'worker-loader?publicPath=/&name=stylus-transpiler.[hash:8].worker.js!./stylus-worker';\n/* eslint-enable import/default */\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass StylusTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('stylus-loader', StylusWorker, 1);\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return new Promise((resolve, reject) => {\n      const { path } = loaderContext;\n\n      this.queueTask(\n        {\n          code,\n          path,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new StylusTranspiler();\n\nexport { StylusTranspiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport LessWorker from 'worker-loader?publicPath=/&name=less-transpiler.[hash:8].worker.js!./less-worker';\n/* eslint-enable import/default */\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass LessTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('less-loader', LessWorker, 1);\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return new Promise((resolve, reject) => {\n      const modules = loaderContext.getModules();\n\n      const lessModules = modules.filter(m => /\\.[css|less]$/.test(m.path));\n      const files = lessModules.reduce(\n        (interMediateFiles, module) => ({\n          ...interMediateFiles,\n          [module.path]: module.code,\n        }),\n        {}\n      );\n\n      const { path } = loaderContext;\n      files[path] = code;\n\n      this.queueTask(\n        {\n          code,\n          files,\n          path,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new LessTranspiler();\n\nexport { LessTranspiler };\n\nexport default transpiler;\n","import Transpiler from '..';\n\nclass NoopTranspiler extends Transpiler {\n  constructor() {\n    super('noop-loader');\n  }\n\n  doTranspilation(code: string) {\n    return Promise.resolve({\n      transpiledCode: code || '',\n    });\n  }\n}\n\nconst transpiler = new NoopTranspiler();\n\nexport { NoopTranspiler };\n\nexport default transpiler;\n","import Transpiler, { TranspilerResult } from '..';\nimport { LoaderContext } from '../../transpiled-module';\n\n/**\n * Just fetches a file from the interwebs and converts it to a blob\n *\n * @class BinaryTranspiler\n * @extends {Transpiler}\n */\nclass BinaryTranspiler extends Transpiler {\n  constructor() {\n    super('binary-loader');\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return fetch(code)\n      .then(res => res.blob())\n      .then(blob => ({ transpiledCode: blob }));\n  }\n}\n\nconst transpiler = new BinaryTranspiler();\n\nexport { BinaryTranspiler };\n\nexport default transpiler;\n","import Transpiler from '..';\nimport { LoaderContext } from '../../transpiled-module';\n\n// This is the most advanced compiler, I wanted to get it working in sync first,\n// but will eventually move to async.\n\nclass VueTranspiler extends Transpiler {\n  constructor() {\n    super('vue-loader');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(/* webpackChunkName: 'vue-loader' */ './loader').then(\n      loader => {\n        const transpiledCode = loader.default(code, loaderContext);\n\n        return Promise.resolve({ transpiledCode });\n      }\n    );\n  }\n}\n\nconst transpiler = new VueTranspiler();\n\nexport { VueTranspiler };\n\nexport default transpiler;\n","import Transpiler from '../..';\nimport { LoaderContext } from '../../../transpiled-module';\n\nclass VueTemplateTranspiler extends Transpiler {\n  constructor() {\n    super('vue-template-compiler');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'vue-template-compiler' */ './loader'\n    ).then(loader => {\n      const transpiledCode = loader.default(code, loaderContext);\n\n      return Promise.resolve({ transpiledCode });\n    });\n  }\n}\n\nconst transpiler = new VueTemplateTranspiler();\n\nexport { VueTemplateTranspiler };\n\nexport default transpiler;\n","import Transpiler from '../..';\nimport { LoaderContext } from '../../../transpiled-module';\n\nclass VueStyleCompiler extends Transpiler {\n  constructor() {\n    super('vue-style-compiler');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'vue-style-compiler' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new VueStyleCompiler();\n\nexport { VueStyleCompiler };\n\nexport default transpiler;\n","import Transpiler from '../..';\nimport { LoaderContext } from '../../../transpiled-module';\n\nclass VueSelector extends Transpiler {\n  constructor() {\n    super('vue-selector');\n  }\n\n  doTranspilation(content: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'vue-selector' */ './loader'\n    ).then(loader => loader.default(content, loaderContext));\n  }\n}\n\nconst transpiler = new VueSelector();\n\nexport { VueSelector };\n\nexport default transpiler;\n","import Transpiler from '../..';\nimport { LoaderContext } from '../../../transpiled-module';\n\nimport loader from './loader';\n\nclass VueStyleLoader extends Transpiler {\n  constructor() {\n    super('vue-style-loader');\n  }\n\n  doTranspilation(content: string, loaderContext: LoaderContext) {\n    const transpiledCode = loader(content, loaderContext);\n\n    return Promise.resolve({ transpiledCode });\n  }\n}\n\nconst transpiler = new VueStyleLoader();\n\nexport { VueStyleLoader };\n\nexport default transpiler;\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\nimport hash from 'hash-sum';\n\nimport addStylesClientRaw from '!raw-loader!./addStylesClient';\nimport listToStylesRaw from '!raw-loader!./listToStyles';\n\nimport loaderUtils from '../../utils/loader-utils';\n\nconst addStylesClientPath = '/node_modules/vue-style-loader/addStylesClient.js';\nconst listToStylesPath = '/node_modules/vue-style-loader/listToStyles.js';\n\nexport default function(content: string, loaderContext) {\n  const isServer = false;\n  const isProduction = false;\n\n  loaderContext.emitModule(\n    addStylesClientPath,\n    addStylesClientRaw,\n    '/',\n    false,\n    false\n  );\n  loaderContext.emitModule(\n    listToStylesPath,\n    listToStylesRaw,\n    '/',\n    false,\n    false\n  );\n\n  const request = loaderUtils.stringifyRequest(\n    loaderContext,\n    loaderContext._module.query.replace('vue-style-loader!', '') +\n      '!' +\n      loaderContext.path\n  );\n\n  const id = JSON.stringify(hash(request));\n  loaderContext.addDependency(JSON.parse(request));\n\n  const shared = [\n    '// style-loader: Adds some css to the DOM by adding a <style> tag',\n    '',\n    '// load the styles',\n    `var content = require(${request})`,\n    // content list format is [id, css, media, sourceMap]\n    \"if(typeof content === 'string') content = [[module.id, content, '']];\",\n    'if(content.locals) module.exports = content.locals;',\n  ];\n\n  if (!isServer) {\n    // on the client: dynamic inject + hot-reload\n    let code = [\n      '// add the styles to the DOM',\n      'var update = require(\"' +\n        addStylesClientPath +\n        '\")(' +\n        id +\n        ', content, ' +\n        isProduction +\n        ');',\n    ];\n    if (!isProduction) {\n      code = code.concat([\n        '// Hot Module Replacement',\n        'if(module.hot) {',\n        ' // When the styles change, update the <style> tags',\n        ' if(!content.locals) {',\n        '   module.hot.accept(' + request + ', function() {',\n        '     var newContent = require(' + request + ');',\n        \"     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\",\n        '     update(newContent);',\n        '   });',\n        ' }',\n        ' // When the module is disposed, remove the <style> tags',\n        ' module.hot.dispose(function() { update(); });',\n        '}',\n      ]);\n    }\n    return shared.concat(code).join('\\n');\n  }\n\n  return undefined;\n}\n","import Transpiler from '../..';\nimport { LoaderContext } from '../../../transpiled-module';\n\n// This is the most advanced compiler, I wanted to get it working in sync first,\n// but will eventually move to async.\n\nclass CSSTranspiler extends Transpiler {\n  constructor() {\n    super('css-loader');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    return import(\n      /* webpackChunkName: 'css-loader' */ './loader'\n    ).then(loader => loader.default(code, loaderContext));\n  }\n}\n\nconst transpiler = new CSSTranspiler();\n\nexport { CSSTranspiler };\n\nexport default transpiler;\n","import Transpiler, { TranspilerResult } from '..';\n\nclass Base64Transpiler extends Transpiler {\n  constructor() {\n    super('base64-loader');\n  }\n\n  doTranspilation(code: string) {\n    return new Promise<TranspilerResult>(resolve => {\n      const reader = new FileReader();\n      // @ts-ignore\n      reader.readAsDataURL(code);\n\n      reader.onloadend = function() {\n        const base64data = reader.result;\n        resolve({\n          transpiledCode: `module.exports = \"${base64data.toString()}\"`,\n        });\n      };\n    });\n  }\n}\n\nconst transpiler = new Base64Transpiler();\n\nexport { Base64Transpiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport PugWorker from 'worker-loader?publicPath=/&name=pug-transpiler.[hash:8].worker.js!./pug-worker';\n/* eslint-enable import/default */\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass PugTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('pug-loader', PugWorker, 1);\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return new Promise((resolve, reject) => {\n      const { path } = loaderContext;\n\n      this.queueTask(\n        {\n          code,\n          path,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new PugTranspiler();\n\nexport { PugTranspiler };\n\nexport default transpiler;\n","/* eslint-disable import/default */\n// @ts-ignore\nimport CoffeeWorker from 'worker-loader?publicPath=/&name=coffee-transpiler.[hash:8].worker.js!./coffee-worker';\n/* eslint-enable import/default */\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass CoffeeTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('coffee-loader', CoffeeWorker, 1);\n\n    this.cacheable = false;\n  }\n\n  doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<TranspilerResult> {\n    return new Promise((resolve, reject) => {\n      const { path } = loaderContext;\n\n      this.queueTask(\n        {\n          code,\n          path,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new CoffeeTranspiler();\n\nexport { CoffeeTranspiler };\n\nexport default transpiler;\n","import { dispatch, actions } from 'codesandbox-api';\n\nimport type Manager from '../../manager';\n\nimport babelTranspiler from '../../transpilers/babel';\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport noopTranspiler from '../../transpilers/noop';\nimport binaryTranspiler from '../../transpilers/binary';\nimport vueTranspiler from '../../transpilers/vue';\nimport vueTemplateTranspiler from '../../transpilers/vue/template-compiler';\nimport vueStyleTranspiler from '../../transpilers/vue/style-compiler';\nimport vueSelector from '../../transpilers/vue/selector';\nimport vueStyleLoader from '../../transpilers/vue/style-loader';\nimport cssLoader from '../../transpilers/vue/css-loader';\nimport base64Transpiler from '../../transpilers/base64';\nimport pugTranspiler from '../../transpilers/pug';\nimport coffeeTranspiler from '../../transpilers/coffee';\n\nimport Preset from '..';\n\nconst getFileNameFromVm = vm => {\n  if (vm) {\n    const options =\n      typeof vm === 'function' && vm.cid != null\n        ? vm.options\n        : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm || {};\n\n    return options.__file;\n  }\n  return undefined;\n};\n\nexport default function initialize() {\n  const vuePreset = new Preset(\n    'vue-cli',\n    ['vue', 'json', 'js', 'ts'],\n    {\n      '@': '{{sandboxRoot}}/src',\n      vue$: 'vue/dist/vue.common.js',\n    },\n    {\n      setup: async (manager: Manager) => {\n        try {\n          const vueModule = manager.resolveTranspiledModule('vue', '/');\n\n          if (!vueModule.source) {\n            await vueModule.transpile(manager);\n          }\n          const Vue = vueModule.evaluate(manager);\n\n          if (Vue) {\n            Vue.config.warnHandler = (msg, vm, trace) => {\n              console.error('[Vue warn]: ' + msg + trace);\n\n              const file = getFileNameFromVm(vm);\n\n              dispatch(\n                actions.correction.show(msg, {\n                  line: 1,\n                  column: 1,\n                  path: file,\n                  severity: 'warning',\n                  source: 'Vue',\n                })\n              );\n            };\n          }\n        } catch (e) {\n          /* ignore */\n        }\n      },\n    }\n  );\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    config: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    config: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    config: {},\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    const styles = {\n      css: [],\n      scss: [sassWithConfig],\n      sass: [sassWithConfig],\n      less: [lessWithConfig],\n      styl: [stylusWithConfig],\n    };\n\n    return Object.keys(styles).forEach(type => {\n      vuePreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  vuePreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.m?tsx?$/.test(module.path), [\n    { transpiler: typescriptTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.vue$/.test(module.path), [\n    { transpiler: vueTranspiler },\n  ]);\n  vuePreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n\n  registerStyleTranspilers();\n\n  vuePreset.registerTranspiler(() => false, [\n    { transpiler: vueTemplateTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: vueSelector }]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: vueStyleLoader }]);\n  vuePreset.registerTranspiler(() => false, [{ transpiler: cssLoader }]);\n\n  vuePreset.registerTranspiler(module => /\\.png$/.test(module.path), [\n    { transpiler: binaryTranspiler },\n    { transpiler: base64Transpiler },\n  ]);\n  vuePreset.registerTranspiler(module => /!noop/.test(module.path), [\n    { transpiler: noopTranspiler },\n  ]);\n  vuePreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n  vuePreset.registerTranspiler(module => /\\.pug$/.test(module.path), [\n    { transpiler: pugTranspiler },\n  ]);\n\n  return vuePreset;\n}\n","// @flow\nimport { NoopTranspiler } from '../../../transpilers/noop';\n\n/**\n * This transpiler actually does nothing but return the code that was given,\n * this happens since our code is already in the browser, we don't need to\n * dynamically load it\n *\n * @class AsyncTranspiler\n * @extends {NoopTranspiler}\n */\nclass AsyncTranspiler extends NoopTranspiler {\n  constructor() {\n    super();\n\n    this.name = 'async';\n  }\n}\n\nconst transpiler = new AsyncTranspiler();\n\nexport { AsyncTranspiler };\n\nexport default transpiler;\n","import babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\n\nimport asyncTranspiler from './transpilers/async';\n\nimport Preset from '..';\n\nexport default function initialize() {\n  const preactPreset = new Preset(\n    'preact-cli',\n    ['js', 'jsx', 'ts', 'tsx', 'json', 'less', 'scss', 'sass', 'styl', 'css'],\n    {\n      preact$: 'preact',\n      // preact-compat aliases for supporting React dependencies:\n      react: 'preact-compat',\n      'react-dom': 'preact-compat',\n      'create-react-class': 'preact-compat/lib/create-react-class',\n      'react-addons-css-transition-group': 'preact-css-transition-group',\n    }\n  );\n\n  preactPreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        isV7: false,\n        compileNodeModulesWithEnv: true,\n        config: {\n          presets: [\n            [\n              'env',\n              {\n                loose: true,\n                uglify: true,\n                modules: false,\n                exclude: [\n                  'transform-regenerator',\n                  'transform-es2015-typeof-symbol',\n                ],\n              },\n            ],\n          ],\n\n          plugins: [\n            'babel-plugin-syntax-dynamic-import',\n            'babel-plugin-transform-object-assign',\n            'babel-plugin-transform-decorators-legacy',\n            'babel-plugin-transform-class-properties',\n            'babel-plugin-transform-export-extensions',\n            'babel-plugin-transform-object-rest-spread',\n            'babel-plugin-transform-react-constant-elements',\n            ['babel-plugin-transform-react-jsx', { pragma: 'h' }],\n            [\n              'babel-plugin-jsx-pragmatic',\n              {\n                module: 'preact',\n                export: 'h',\n                import: 'h',\n              },\n            ],\n          ],\n        },\n      },\n    },\n  ]);\n\n  // For these routes we need to enable css modules\n  const cssModulesPaths = [\n    '/src/components',\n    '/components',\n    '/src/routes',\n    '/routes',\n  ];\n\n  const cssModulesRegex = extension =>\n    new RegExp(`^(${cssModulesPaths.join('|')})\\\\/.*\\\\.${extension}$`);\n\n  const cssTypes = {\n    css: [],\n    's[a|c]ss': [{ transpiler: sassTranspiler }],\n    less: [{ transpiler: lessTranspiler }],\n    styl: [{ transpiler: stylusTranspiler }],\n  };\n\n  Object.keys(cssTypes).forEach(cssType => {\n    preactPreset.registerTranspiler(\n      module => cssModulesRegex(cssType).test(module.path),\n      [\n        ...cssTypes[cssType],\n        { transpiler: stylesTranspiler, options: { module: true } },\n      ]\n    );\n\n    preactPreset.registerTranspiler(\n      module => new RegExp(`\\\\.${cssType}$`).test(module.path),\n      [...cssTypes[cssType], { transpiler: stylesTranspiler }]\n    );\n  });\n\n  preactPreset.registerTranspiler(module => /\\.json/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  // Support for !async statements\n  preactPreset.registerTranspiler(\n    () => false /* never load without explicit statement */,\n    [{ transpiler: asyncTranspiler }]\n  );\n\n  preactPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preactPreset;\n}\n","/* eslint-disable import/default */\n// @ts-ignore\nimport SvelteWorker from 'worker-loader?publicPath=/&name=svelte-transpiler.[hash:8].worker.js!./svelte-worker';\n/* eslint-enable import/default */\n\nimport semver from 'semver';\n\nimport WorkerTranspiler from '../worker-transpiler';\nimport { LoaderContext } from '../../transpiled-module';\nimport { TranspilerResult } from '..';\n\nclass SvelteTranspiler extends WorkerTranspiler {\n  worker: Worker;\n\n  constructor() {\n    super('svelte-loader', SvelteWorker, 2);\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    const packageJSON = loaderContext.options.configurations.package;\n    const svelte =\n      (packageJSON &&\n        packageJSON.parsed &&\n        packageJSON.parsed.devDependencies &&\n        packageJSON.parsed.devDependencies.svelte &&\n        semver.coerce(packageJSON.parsed.devDependencies.svelte)) ||\n      semver.coerce(packageJSON.parsed.dependencies.svelte);\n\n    return new Promise<TranspilerResult>((resolve, reject) => {\n      const { path } = loaderContext;\n\n      this.queueTask(\n        {\n          code,\n          path,\n          version: (svelte || {}).version,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new SvelteTranspiler();\n\nexport { SvelteTranspiler };\n\nexport default transpiler;\n","import babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport svelteTranspiler from '../../transpilers/svelte';\n\nimport Preset from '..';\n\nconst babelOptions = {\n  isV7: true,\n  config: {\n    presets: [],\n    plugins: [],\n    parserOpts: {\n      plugins: ['dynamicImport', 'objectRestSpread'],\n    },\n  },\n};\n\nexport default function initialize() {\n  const sveltePreset = new Preset('svelte', ['js', 'jsx', 'svelte'], {});\n\n  sveltePreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.svelte$/.test(module.path), [\n    { transpiler: svelteTranspiler },\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.html$/.test(module.path), [\n    { transpiler: svelteTranspiler },\n    { transpiler: babelTranspiler, options: babelOptions },\n  ]);\n\n  sveltePreset.registerTranspiler(module => /\\.json/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  sveltePreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return sveltePreset;\n}\n","/* eslint-disable */\nimport Transpiler from '../';\nimport { LoaderContext } from '../../transpiled-module';\n\n// using: regex, capture groups, and capture group variables.\nconst templateUrlRegex = /templateUrl\\s*:(\\s*['\"`](.*?)['\"`]\\s*([,}]))/gm;\nconst stylesRegex = /styleUrls *:(\\s*\\[[^\\]]*?\\])/g;\nconst stringRegex = /(['`\"])((?:[^\\\\]\\\\\\1|.)*?)\\1/g;\n\nfunction replaceStringsWithRequires(string, extensionConfig, addDependency) {\n  return string.replace(stringRegex, (match, quote, url) => {\n    if (url.charAt(0) !== '.') {\n      // eslint-disable-next-line\n      url = './' + url;\n    }\n\n    const urlParts = url.split('.');\n    const extension = urlParts[urlParts.length - 1];\n    const transpilers = extensionConfig[extension] || [];\n\n    const finalUrl = `!raw-loader!${transpilers\n      .map(t => t.transpiler.name)\n      .join('!')}!${url}`;\n\n    addDependency(finalUrl, { isAbsolute: false });\n    return \"require('\" + finalUrl + \"')\";\n  });\n}\n\n/**\n * Converts Angular statements to css/html to require statements. Taken from\n * https://github.com/TheLarkInn/angular2-template-loader/blob/master/index.js\n *\n * @class Angular2Transpiler\n * @extends {Transpiler}\n */\nclass Angular2Transpiler extends Transpiler {\n  constructor() {\n    super('binary-loader');\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext) {\n    const styleProperty = 'styles';\n    const templateProperty = 'template';\n\n    const newSource = code\n      .replace(templateUrlRegex, (match, url) => {\n        // replace: templateUrl: './path/to/template.html'\n        // with: template: require('./path/to/template.html')\n        // or: templateUrl: require('./path/to/template.html')\n        // if `keepUrl` query parameter is set to true.\n\n        return (\n          templateProperty +\n          ':' +\n          replaceStringsWithRequires(\n            url,\n            loaderContext.options.preTranspilers,\n            loaderContext.addDependency\n          )\n        );\n      })\n      .replace(stylesRegex, (match, urls) => {\n        // replace: stylesUrl: ['./foo.css', \"./baz.css\", \"./index.component.css\"]\n        // with: styles: [require('./foo.css'), require(\"./baz.css\"), require(\"./index.component.css\")]\n        // or: styleUrls: [require('./foo.css'), require(\"./baz.css\"), require(\"./index.component.css\")]\n        // if `keepUrl` query parameter is set to true.\n        return (\n          styleProperty +\n          ':' +\n          replaceStringsWithRequires(\n            urls,\n            loaderContext.options.preTranspilers,\n            loaderContext.addDependency\n          )\n        );\n      });\n\n    return Promise.resolve({\n      transpiledCode: newSource,\n    });\n  }\n}\n\nconst transpiler = new Angular2Transpiler();\n\nexport { Angular2Transpiler };\n\nexport default transpiler;\n","// @flow\nimport { join, absolute } from '@codesandbox/common/lib/utils/path';\nimport Preset from '..';\n\nimport angular2Transpiler from '../../transpilers/angular2-template';\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\n\nlet polyfillsLoaded = false;\n\nasync function addAngularJSONPolyfills(manager) {\n  const { parsed } = manager.configurations['angular-config'];\n\n  const { defaultProject } = parsed;\n  const project = parsed.projects[defaultProject];\n  const { build } = project.architect;\n\n  if (build.options) {\n    if (project.root && build.options.polyfill) {\n      const polyfillLocation = absolute(\n        join(project.root, build.options.polyfill)\n      );\n      const polyfills = manager.resolveModule(polyfillLocation, '/');\n\n      await manager.transpileModules(polyfills);\n      manager.evaluateModule(polyfills);\n    }\n  }\n}\n\nasync function addAngularCLIPolyfills(manager) {\n  const { parsed } = manager.configurations['angular-cli'];\n  if (parsed.apps && parsed.apps[0]) {\n    const app = parsed.apps[0];\n\n    if (app.root && app.polyfills) {\n      const polyfillLocation = absolute(join(app.root, app.polyfills));\n      const polyfills = manager.resolveModule(polyfillLocation, '/');\n\n      await manager.transpileModules(polyfills);\n      manager.evaluateModule(polyfills);\n    }\n  }\n}\n\nasync function addAngularJSONResources(manager) {\n  const { parsed } = manager.configurations['angular-config'];\n\n  const { defaultProject } = parsed;\n  const project = parsed.projects[defaultProject];\n  const { build } = project.architect;\n\n  if (build.options) {\n    const { styles = [], scripts = [] } = build.options;\n\n    /* eslint-disable no-await-in-loop */\n    for (let i = 0; i < styles.length; i++) {\n      const p = styles[i];\n\n      const finalPath = absolute(join(project.root, p.input || p));\n\n      const tModule = await manager.resolveTranspiledModuleAsync(\n        finalPath,\n        null\n      );\n\n      await tModule.transpile(manager);\n      tModule.setIsEntry(true);\n      tModule.evaluate(manager);\n    }\n\n    const scriptTModules = await Promise.all(\n      scripts.map(async p => {\n        const finalPath = absolute(join(project.root, p));\n        const tModule = await manager.resolveTranspiledModuleAsync(\n          finalPath,\n          null\n        );\n        tModule.setIsEntry(true);\n        return tModule.transpile(manager);\n      })\n    );\n\n    scriptTModules.forEach(t => {\n      t.evaluate(manager, { asUMD: true });\n    });\n  }\n}\n\nconst getPathFromResource = (root, p) => {\n  const nodeModuleRegex = /(^\\.\\/)?node_modules\\//;\n  if (/(^\\.\\/)?node_modules/.test(p)) {\n    // If starts with node_modules or ./node_modules\n    return p.replace(nodeModuleRegex, '');\n  }\n\n  return absolute(join(root || 'src', p));\n};\n\nasync function addAngularCLIResources(manager) {\n  const { parsed } = manager.configurations['angular-cli'];\n  if (parsed.apps && parsed.apps[0]) {\n    const app = parsed.apps[0];\n\n    const { styles = [], scripts = [] } = app;\n\n    /* eslint-disable no-await-in-loop */\n    for (let i = 0; i < styles.length; i++) {\n      const p = styles[i];\n      const finalPath = getPathFromResource(app.root, p.input || p);\n\n      const tModule = await manager.resolveTranspiledModuleAsync(\n        finalPath,\n        null\n      );\n\n      await tModule.transpile(manager);\n      tModule.setIsEntry(true);\n      tModule.evaluate(manager);\n    }\n    /* eslint-enable no-await-in-loop */\n\n    const scriptTModules = await Promise.all(\n      scripts.map(async p => {\n        const finalPath = getPathFromResource(app.root, p);\n        const tModule = await manager.resolveTranspiledModuleAsync(\n          finalPath,\n          null\n        );\n        tModule.setIsEntry(true);\n        return tModule.transpile(manager);\n      })\n    );\n\n    scriptTModules.forEach(t => {\n      t.evaluate(manager, { asUMD: true });\n    });\n\n    if (app.environmentSource && app.environments && app.environments.dev) {\n      manager.preset.setAdditionalAliases({\n        [app.environmentSource]: app.environments.dev,\n      });\n    }\n  }\n}\n\nexport default function initialize() {\n  const preset = new Preset(\n    'angular-cli',\n    ['web.ts', 'ts', 'json', 'web.tsx', 'tsx', 'js'],\n    {},\n    {\n      setup: async manager => {\n        if (!polyfillsLoaded) {\n          const zone = manager.resolveModule('zone.js', '/');\n          await manager.transpileModules(zone);\n          manager.evaluateModule(zone);\n\n          if (!manager.configurations['angular-config'].generated) {\n            await addAngularJSONPolyfills(manager);\n          } else {\n            await addAngularCLIPolyfills(manager);\n          }\n\n          polyfillsLoaded = true;\n        }\n\n        if (!manager.configurations['angular-config'].generated) {\n          await addAngularJSONResources(manager);\n        } else {\n          await addAngularCLIResources(manager);\n        }\n      },\n    }\n  );\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      preset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  preset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: angular2Transpiler, options: { preTranspilers: styles } },\n    { transpiler: typescriptTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m?js$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        config: {\n          presets: ['es2015', 'react', 'stage-0'],\n          plugins: [\n            'transform-async-to-generator',\n            'transform-object-rest-spread',\n            'transform-decorators-legacy',\n            'transform-class-properties',\n            // Polyfills the runtime needed for async/await and generators\n            [\n              'transform-runtime',\n              {\n                helpers: false,\n                polyfill: false,\n                regenerator: true,\n              },\n            ],\n            [\n              'transform-regenerator',\n              {\n                // Async functions are converted to generators by babel-preset-env\n                async: false,\n              },\n            ],\n          ],\n        },\n      },\n    },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","// @flow\n// eslint-disable-next-line\nimport HTMLWorker from 'worker-loader?publicPath=/&name=parcel-html-transpiler.[hash:8].worker.js!./html-worker';\nimport type { LoaderContext } from '../../../transpiled-module';\nimport WorkerTranspiler from '../../../transpilers/worker-transpiler';\n\nclass HTMLTranspiler extends WorkerTranspiler {\n  constructor() {\n    super('html-loader', HTMLWorker, 1);\n\n    this.HMREnabled = false;\n  }\n\n  doTranspilation(code: string, loaderContext: LoaderContext): Promise<null> {\n    return new Promise((resolve, reject) => {\n      this.queueTask(\n        {\n          code,\n        },\n        loaderContext._module.getId(),\n        loaderContext,\n        (err, data) => {\n          if (err) {\n            loaderContext.emitError(err);\n\n            return reject(err);\n          }\n\n          return resolve(data);\n        }\n      );\n    });\n  }\n}\n\nconst transpiler = new HTMLTranspiler();\n\nexport { HTMLTranspiler };\n\nexport default transpiler;\n","import { basename, dirname, join } from 'path';\nimport stripANSI from 'strip-ansi';\n\nimport Transpiler from '..';\nimport { LoaderContext } from '../../transpiled-module';\nimport { Module } from '../../types/module';\n\ntype ReasonModule = Module & {\n  moduleName: string;\n};\n\nfunction addScript(src) {\n  return new Promise(resolve => {\n    const s = document.createElement('script');\n    s.setAttribute('src', src);\n    document.body.appendChild(s);\n\n    s.onload = () => {\n      resolve();\n    };\n  });\n}\n\nconst IGNORED_DEPENDENCIES = ['ReactDOMRe', 'ReasonReact'];\n\nfunction getModuleName(path: string) {\n  const moduleParts = basename(path).split('.');\n  moduleParts.pop();\n\n  const unCapitalizedModuleName = moduleParts.join('.');\n  return (\n    unCapitalizedModuleName[0].toUpperCase() + unCapitalizedModuleName.slice(1)\n  );\n}\n\nconst cachedDependencies = new Map();\nconst global = window as any;\n\nfunction getDependencyList(\n  modules: Array<ReasonModule>,\n  list: Set<ReasonModule>,\n  module: ReasonModule\n) {\n  const cache = cachedDependencies.get(module.path);\n\n  const listFunction = module.path.endsWith('.re')\n    ? global.ocaml.reason_list_dependencies\n    : global.ocaml.list_dependencies;\n\n  const deps =\n    cache ||\n    listFunction(module.code)\n      .filter(x => IGNORED_DEPENDENCIES.indexOf(x) === -1)\n      .filter(x => !list.has(x));\n\n  if (!cache) {\n    // Didn't get it from the cache\n    deps.shift(); // Remove the first 0 value\n  }\n\n  if (module.path.startsWith('/node_modules')) {\n    cachedDependencies.set(module.path, deps);\n  }\n\n  deps.forEach(dep => {\n    const foundModule = modules.find(\n      x => x.moduleName === dep && !x.path.endsWith('.rei')\n    );\n\n    if (foundModule) {\n      getDependencyList(modules, list, foundModule);\n    }\n  });\n\n  list.add(module);\n}\n\nclass ReasonTranspiler extends Transpiler {\n  worker: Worker;\n\n  constructor() {\n    super('reason-loader');\n  }\n\n  async doTranspilation(\n    code: string,\n    loaderContext: LoaderContext\n  ): Promise<{ transpiledCode: string }> {\n    if (!global.ocaml) {\n      await addScript(\n        'https://cdn.jsdelivr.net/gh/jaredly/reason-react@more-docs/docs/bucklescript.js'\n      );\n      await addScript('https://reason.surge.sh/bucklescript-deps.js');\n      await addScript('https://unpkg.com/reason@3.3.4/refmt.js');\n    }\n\n    const reasonModules = loaderContext\n      .getModules()\n      .filter(\n        x =>\n          x.path.endsWith('.re') ||\n          x.path.endsWith('.rei') ||\n          x.path.endsWith('.ml')\n      )\n      .map(x => ({\n        ...x,\n        moduleName: getModuleName(x.path),\n      }));\n\n    const mainReasonModule: ReasonModule = reasonModules.find(\n      m => m.path === loaderContext._module.module.path\n    );\n\n    const modulesToAdd: Set<ReasonModule> = new Set();\n    getDependencyList(reasonModules, modulesToAdd, mainReasonModule);\n\n    modulesToAdd.forEach(m => {\n      if (m.path !== loaderContext._module.module.path) {\n        loaderContext.addTranspilationDependency(m.path, {});\n      }\n    });\n\n    const newCode = Array.from(modulesToAdd)\n      .map(x => {\n        const usedCode = x.path.endsWith('.re')\n          ? x.code\n          : global.printRE(global.parseML(x.code));\n\n        const { moduleName } = x;\n\n        const typesPath = join(\n          dirname(x.path),\n          basename(x.path, '.re') + '.rei'\n        );\n\n        const typesModule = reasonModules.find(\n          module => module.path === typesPath\n        );\n\n        let reasonCode = `module ${moduleName}`;\n\n        if (typesModule) {\n          reasonCode += `: {\\n${typesModule.code}\\n}`;\n        }\n\n        reasonCode += ` = {\n#1 ${moduleName}\n${usedCode}\n};`;\n\n        return reasonCode;\n      })\n      .join('\\n\\n');\n\n    const {\n      // eslint-disable-next-line camelcase\n      js_code,\n      js_error_msg: errorMessage,\n      row,\n      column,\n      text,\n    } = global.ocaml.reason_compile_super_errors(newCode);\n\n    if (errorMessage) {\n      const error = new Error(stripANSI(text));\n\n      error.name = 'Reason Compile Error';\n      // @ts-ignore\n      error.fileName = loaderContext._module.module.path;\n      // @ts-ignore\n      error.lineNumber = row + 1;\n      // @ts-ignore\n      error.columnNumber = column;\n      return Promise.reject(error);\n    }\n\n    return Promise.resolve({\n      transpiledCode: js_code,\n    });\n  }\n}\n\nconst transpiler = new ReasonTranspiler();\n\nexport { ReasonTranspiler };\n\nexport default transpiler;\n","// @flow\nimport { dispatch } from 'codesandbox-api';\nimport { StyleTranspiler } from '../../../transpilers/style';\nimport { type LoaderContext } from '../../../transpiled-module';\nimport insertCss from '../../../transpilers/style/utils/insert-css';\nimport toDefinition from '../../../transpilers/style/utils/to-definition';\nimport getModules from '../../../transpilers/style/get-modules';\n\nconst getStyleId = id => id + '-css';\n\nclass DojoStyleTranspiler extends StyleTranspiler {\n  async doTranspilation(code: string, loaderContext: LoaderContext) {\n    const id = getStyleId(loaderContext._module.getId());\n    const { path } = loaderContext;\n    const modules = loaderContext.getModules();\n    let result = modules.find(module => module.path === `${path}.js`);\n    if (result) {\n      return { transpiledCode: `${insertCss(id, code)}\\n${result.code}` };\n    }\n    const { code: packageJson } = modules.find(\n      module => module.path === '/package.json'\n    );\n    const { name: packageName } = JSON.parse(packageJson);\n    const [, baseName] = /\\/([^/.]*)[^/]*$/.exec(path);\n    const key = `${packageName}/${baseName}`;\n    const { css, exportTokens } = await getModules(code, loaderContext);\n    result = insertCss(id, css);\n    result += `\\nmodule.exports=${JSON.stringify({\n      ' _key': key,\n      ...exportTokens,\n    })};`;\n    dispatch({ type: 'add-extra-lib', path, code: toDefinition(exportTokens) });\n    return { transpiledCode: result };\n  }\n}\n\nconst transpiler = new DojoStyleTranspiler();\n\nexport { DojoStyleTranspiler as StyleTranspiler };\n\nexport default transpiler;\n","import type { default as Manager } from '../../manager';\nimport rawTranspiler from '../../transpilers/raw';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\n\nimport Preset from '..';\n\nconst transpilerMap = {\n  'codesandbox:raw': rawTranspiler,\n  'codesandbox:json': jsonTranspiler,\n  'codesandbox:babel': babelTranspiler,\n};\n\nasync function registerTranspilers(\n  manager: Manager,\n  preset: Preset,\n  transpilerConfig\n) {\n  const savedTranspilers = {};\n  const configModule = manager.resolveTranspiledModule(\n    '/.codesandbox/template.json',\n    '/'\n  );\n  configModule.setIsEntry(true);\n\n  const initializers = await Promise.all(\n    Object.keys(transpilerConfig).map(async expression => {\n      const transpilers = transpilerConfig[expression];\n\n      const evaluatedTranspilers = await Promise.all(\n        transpilers.map(async t => {\n          if (savedTranspilers[t]) {\n            return savedTranspilers[t];\n          }\n\n          if (t.startsWith('codesandbox:')) {\n            const transpiler = transpilerMap[t];\n\n            if (!transpiler) {\n              throw new Error(\n                `Could not register custom transpiler: ${t} is unknown to Sandpack.`\n              );\n            }\n\n            return { transpiler };\n          }\n\n          const tModule = manager.resolveTranspiledModule(\n            t,\n            '/.codesandbox/template.json'\n          );\n\n          if (tModule.shouldTranspile()) {\n            tModule.initiators.add(configModule);\n            configModule.dependencies.add(tModule);\n\n            await tModule.transpile(manager);\n          }\n\n          const transpiler = tModule.compilation\n            ? tModule.compilation.exports\n            : tModule.evaluate(manager);\n\n          savedTranspilers[t] = transpiler;\n\n          return {\n            transpiler,\n          };\n        })\n      );\n\n      return () => {\n        const regex = new RegExp(expression);\n        preset.registerTranspiler(\n          module => regex.test(module.path),\n          evaluatedTranspilers\n        );\n      };\n    })\n  );\n\n  preset.resetTranspilers();\n\n  initializers.forEach(x => x());\n}\n\nexport default function initialize() {\n  let initialized = false;\n  const customPreset = new Preset('custom', undefined, undefined, {\n    setup: async (manager: Manager, updatedModules) => {\n      if (updatedModules.some(m => m.module.path.startsWith('/.codesandbox'))) {\n        initialized = false;\n        manager.clearCompiledCache();\n        manager.clearCache();\n      }\n\n      if (!initialized) {\n        // eslint-disable-next-line no-console\n        console.log('Initializing custom template');\n        customPreset.resetTranspilers();\n        // Our JS/JSON transpiler to transpile the transpilers\n        customPreset.registerTranspiler(m => /\\.jsx?$/.test(m.path), [\n          { transpiler: babelTranspiler },\n        ]);\n\n        customPreset.registerTranspiler(m => /\\.json$/.test(m.path), [\n          { transpiler: jsonTranspiler },\n        ]);\n\n        const customConfig =\n          manager.configurations.customTemplate &&\n          manager.configurations.customTemplate.parsed;\n        if (!customConfig) {\n          throw new Error('No configuration specified for the custom template');\n        }\n\n        const { sandpack } = customConfig;\n\n        if (sandpack) {\n          customPreset.defaultAliases = sandpack.defaultAliases || [];\n\n          if (sandpack.transpilers) {\n            await registerTranspilers(\n              manager,\n              customPreset,\n              sandpack.transpilers\n            );\n          }\n        }\n\n        customPreset.registerTranspiler(() => true, [\n          { transpiler: rawTranspiler },\n        ]);\n        initialized = true;\n      }\n    },\n  });\n\n  return customPreset;\n}\n","/* eslint-disable import/no-named-as-default-member, import/default, import/no-named-as-default */\nimport {\n  react,\n  vue,\n  parcel,\n  svelte,\n  preact,\n  reactTs,\n  angular,\n  cxjs,\n  babel,\n  dojo,\n  custom,\n  reason,\n} from '@codesandbox/common/lib/templates';\n\nimport { isBabel7 } from '@codesandbox/common/lib/utils/is-babel-7';\nimport { PackageJSON } from '@codesandbox/common/lib/types';\nimport { reactPresetV1, reactPresetV3 } from './presets/create-react-app';\nimport reactTsPreset from './presets/create-react-app-typescript';\nimport vuePreset from './presets/vue-cli';\nimport preactPreset from './presets/preact-cli';\nimport sveltePreset from './presets/svelte';\nimport angularPreset from './presets/angular-cli';\nimport parcelPreset from './presets/parcel';\nimport babelPreset from './presets/babel-repl';\nimport cxjsPreset from './presets/cxjs';\nimport reasonPreset from './presets/reason';\nimport dojoPreset from './presets/dojo';\nimport customPreset from './presets/custom';\n\nexport default function getPreset(template: string, pkg: PackageJSON) {\n  switch (template) {\n    case react.name:\n      if (isBabel7(pkg.dependencies, pkg.devDependencies)) {\n        return reactPresetV3();\n      }\n\n      return reactPresetV1();\n\n    case reactTs.name:\n      return reactTsPreset();\n    case reason.name:\n      return reasonPreset();\n    case vue.name:\n      return vuePreset();\n    case preact.name:\n      return preactPreset();\n    case svelte.name:\n      return sveltePreset();\n    case angular.name:\n      return angularPreset();\n    case parcel.name:\n      return parcelPreset();\n    case babel.name:\n      return babelPreset();\n    case cxjs.name:\n      return cxjsPreset();\n    case dojo.name:\n      return dojoPreset();\n    case custom.name:\n      return customPreset();\n    default:\n      return reactPresetV3();\n  }\n}\n","import Preset from '..';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport { aliases, cleanUsingUnmount } from './utils';\n\nexport default function initialize() {\n  const preset = new Preset(\n    'create-react-app',\n    ['web.js', 'js', 'json', 'web.jsx', 'jsx', 'ts', 'tsx', 'mjs'],\n    aliases,\n    {\n      hasDotEnv: true,\n      preEvaluate: async manager => {\n        if (!manager.webpackHMR) {\n          cleanUsingUnmount(manager);\n        }\n      },\n    }\n  );\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        config: {\n          presets: ['es2015', 'react', 'stage-0'],\n          plugins: [\n            'transform-async-to-generator',\n            'transform-object-rest-spread',\n            'transform-decorators-legacy',\n            'transform-class-properties',\n            // Polyfills the runtime needed for async/await and generators\n            [\n              'transform-runtime',\n              {\n                helpers: false,\n                polyfill: false,\n                regenerator: true,\n              },\n            ],\n            [\n              'transform-regenerator',\n              {\n                // Async functions are converted to generators by babel-preset-env\n                async: false,\n              },\n            ],\n          ],\n        },\n      },\n    },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import Preset from '..';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport babelTranspiler from '../../transpilers/babel';\n\nexport default function initialize() {\n  const preset = new Preset('create-react-app-typescript', [\n    'web.ts',\n    'ts',\n    'json',\n    'web.tsx',\n    'tsx',\n    'js',\n    'mjs',\n  ]);\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  const babelOptions = {\n    isV7: true,\n    compileNodeModulesWithEnv: true,\n    config: {\n      plugins: [\n        'transform-flow-strip-types',\n        'transform-destructuring',\n        'babel-plugin-macros',\n        ['proposal-decorators', { legacy: true }],\n        ['proposal-class-properties', { loose: true }],\n        ['proposal-object-rest-spread', { useBuiltIns: true }],\n        [\n          'transform-runtime',\n          {\n            corejs: false,\n            helpers: true,\n            regenerator: true,\n          },\n        ],\n        'syntax-dynamic-import',\n      ],\n      presets: [\n        [\n          'env',\n          {\n            // We want Create React App to be IE 9 compatible until React itself\n            // no longer works with IE 9\n            targets: {\n              ie: 9,\n            },\n            // Users cannot override this behavior because this Babel\n            // configuration is highly tuned for ES5 support\n            ignoreBrowserslistConfig: true,\n            // If users import all core-js they're probably not concerned with\n            // bundle size. We shouldn't rely on magic to try and shrink it.\n            useBuiltIns: false,\n            // Do not transform modules to CJS\n            modules: false,\n          },\n        ],\n        'react',\n        'typescript',\n      ],\n    },\n  };\n  preset.registerTranspiler(\n    module =>\n      /\\.m?(t|j)sx?$/.test(module.path) && !module.path.endsWith('.d.ts'),\n    [\n      {\n        transpiler: babelTranspiler,\n        options: babelOptions,\n      },\n    ],\n    true\n  );\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import Preset from '..';\n\nimport stylesTranspiler from '../../transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\nimport reasonTranspiler from '../../transpilers/reason';\n\nimport reasonRemap from './reason-remap';\n\nexport default function initialize() {\n  const preset = new Preset(\n    'reason',\n    ['web.js', 'js', 're', 'json', 'web.jsx', 'jsx'],\n    reasonRemap,\n    { hasDotEnv: true }\n  );\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    { transpiler: babelTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.re$/.test(module.path), [\n    { transpiler: reasonTranspiler },\n    { transpiler: babelTranspiler, options: { simpleRequire: true } },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","import babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport tsTranspiler from '../../transpilers/typescript';\nimport vueTranspiler from '../../transpilers/vue';\nimport vueTemplateTranspiler from '../../transpilers/vue/template-compiler';\nimport vueStyleTranspiler from '../../transpilers/vue/style-compiler';\nimport vueSelector from '../../transpilers/vue/selector';\nimport vueStyleLoader from '../../transpilers/vue/style-loader';\nimport cssLoader from '../../transpilers/vue/css-loader';\nimport htmlTranspiler from './transpilers/html-transpiler';\nimport pugTranspiler from '../../transpilers/pug';\nimport coffeeTranspiler from '../../transpilers/coffee';\nimport noopTranspiler from '../../transpilers/noop';\n\nimport Preset from '..';\n\nexport default function initialize() {\n  const parcelPreset = new Preset(\n    'parcel',\n    [\n      'js',\n      'jsx',\n      'ts',\n      'tsx',\n      'json',\n      'less',\n      'scss',\n      'sass',\n      'styl',\n      'css',\n      'vue',\n    ],\n    {},\n    {\n      htmlDisabled: true,\n      setup: manager => {\n        const packageJSON = manager.configurations.package;\n\n        if (packageJSON && packageJSON.parsed && packageJSON.parsed.alias) {\n          manager.preset.setAdditionalAliases(packageJSON.parsed.alias);\n        }\n      },\n    }\n  );\n\n  parcelPreset.registerTranspiler(module => /\\.coffee$/.test(module.path), [\n    { transpiler: coffeeTranspiler },\n    { transpiler: babelTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n      },\n    },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: tsTranspiler },\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n      },\n    },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.pug$/.test(module.path), [\n    { transpiler: pugTranspiler },\n    { transpiler: htmlTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.html$/.test(module.path), [\n    { transpiler: htmlTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  parcelPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  // VUE START\n  parcelPreset.registerTranspiler(module => /\\.vue$/.test(module.path), [\n    { transpiler: vueTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueTemplateTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleTranspiler },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [{ transpiler: vueSelector }]);\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: vueStyleLoader },\n  ]);\n  parcelPreset.registerTranspiler(() => false, [{ transpiler: cssLoader }]);\n  // VUE END\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      parcelPreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  parcelPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  parcelPreset.registerTranspiler(() => false, [\n    { transpiler: noopTranspiler },\n  ]);\n\n  return parcelPreset;\n}\n","import babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport rawTranspiler from '../../transpilers/raw';\n\nimport Preset from '..';\n\nexport default function initialize() {\n  const babelPreset = new Preset(\n    'babel-repl',\n    ['js', 'jsx', 'ts', 'tsx', 'json'],\n    {},\n    {}\n  );\n\n  babelPreset.registerTranspiler(module => /\\.jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        disableCodeSandboxPlugins: true,\n      },\n    },\n  ]);\n\n  babelPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  babelPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return babelPreset;\n}\n","import babelTranspiler from '../../transpilers/babel';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport sassTranspiler from '../../transpilers/sass';\nimport rawTranspiler from '../../transpilers/raw';\nimport stylusTranspiler from '../../transpilers/stylus';\nimport lessTranspiler from '../../transpilers/less';\nimport tsTranspiler from '../../transpilers/typescript';\n\nimport Preset from '..';\n\nexport default function initialize() {\n  const cxjsPreset = new Preset(\n    'cxjs',\n    ['js', 'jsx', 'ts', 'tsx', 'json', 'less', 'scss', 'sass', 'styl', 'css'],\n    {},\n    {}\n  );\n\n  cxjsPreset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        dynamicCSSModules: true,\n        compileNodeModulesWithEnv: true,\n\n        config: {\n          presets: ['es2015', 'react', 'stage-0'],\n          plugins: [\n            'transform-async-to-generator',\n            'transform-object-rest-spread',\n            'transform-decorators-legacy',\n            'transform-class-properties',\n            // Polyfills the runtime needed for async/await and generators\n            [\n              'transform-runtime',\n              {\n                helpers: false,\n                polyfill: false,\n                regenerator: true,\n              },\n            ],\n            [\n              'transform-regenerator',\n              {\n                // Async functions are converted to generators by babel-preset-env\n                async: false,\n              },\n            ],\n          ],\n        },\n      },\n    },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: tsTranspiler },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  cxjsPreset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  const sassWithConfig = {\n    transpiler: sassTranspiler,\n    options: {},\n  };\n\n  const lessWithConfig = {\n    transpiler: lessTranspiler,\n    options: {},\n  };\n\n  const stylusWithConfig = {\n    transpiler: stylusTranspiler,\n    options: {},\n  };\n  const styles = {\n    css: [],\n    scss: [sassWithConfig],\n    sass: [sassWithConfig],\n    less: [lessWithConfig],\n    styl: [stylusWithConfig],\n  };\n\n  /**\n   * Registers transpilers for all different combinations\n   *\n   * @returns\n   */\n  function registerStyleTranspilers() {\n    return Object.keys(styles).forEach(type => {\n      cxjsPreset.registerTranspiler(\n        module => new RegExp(`\\\\.${type}`).test(module.path),\n        [...styles[type], { transpiler: stylesTranspiler }]\n      );\n    });\n  }\n\n  registerStyleTranspilers();\n\n  cxjsPreset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return cxjsPreset;\n}\n","import { join, absolute } from '@codesandbox/common/lib/utils/path';\nimport Preset from '..';\n\nimport typescriptTranspiler from '../../transpilers/typescript';\nimport rawTranspiler from '../../transpilers/raw';\nimport jsonTranspiler from '../../transpilers/json';\nimport stylesTranspiler from '../../transpilers/style';\nimport dojoStylesTranspiler from './transpilers/style';\nimport babelTranspiler from '../../transpilers/babel';\n\nexport default function initialize() {\n  const preset = new Preset(\n    '@dojo/cli-create-app',\n    ['ts', 'tsx', 'js', 'json'],\n    {},\n    {\n      setup: async manager => {\n        const stylesPath = absolute(join('src', 'main.css'));\n\n        try {\n          const tModule = await manager.resolveTranspiledModuleAsync(\n            stylesPath,\n            null\n          );\n          await tModule.transpile(manager);\n          tModule.setIsEntry(true);\n          tModule.evaluate(manager);\n        } catch (e) {\n          if (e.type === 'module-not-found') {\n            // Do nothing\n          } else {\n            throw e;\n          }\n        }\n      },\n    }\n  );\n\n  preset.registerTranspiler(module => /\\.tsx?$/.test(module.path), [\n    { transpiler: typescriptTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m?jsx?$/.test(module.path), [\n    {\n      transpiler: babelTranspiler,\n      options: {\n        isV7: true,\n        config: {\n          parserOpts: {\n            plugins: ['objectRestSpread'],\n          },\n        },\n      },\n    },\n  ]);\n\n  preset.registerTranspiler(module => /\\.json$/.test(module.path), [\n    { transpiler: jsonTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.m\\.css$/.test(module.path), [\n    { transpiler: dojoStylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(module => /\\.css$/.test(module.path), [\n    { transpiler: stylesTranspiler },\n  ]);\n\n  preset.registerTranspiler(() => true, [{ transpiler: rawTranspiler }]);\n\n  return preset;\n}\n","// Responsible for consuming and syncing with the server/local cache\nimport localforage from 'localforage';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport Manager from './manager';\n\nimport { SCRIPT_VERSION } from '..';\n\nconst debug = _debug('cs:compiler:cache');\n\nconst host = process.env.CODESANDBOX_HOST;\n\nconst MAX_CACHE_SIZE = 1024 * 1024 * 20;\nlet APICacheUsed = false;\n\ntry {\n  localforage.config({\n    name: 'CodeSandboxApp',\n    storeName: 'sandboxes', // Should be alphanumeric, with underscores.\n    description:\n      'Cached transpilations of the sandboxes, for faster initialization time.',\n  });\n\n  // Prewarm store\n  localforage.keys();\n} catch (e) {\n  console.warn('Problems initializing IndexedDB store.');\n  console.warn(e);\n}\n\nfunction shouldSaveOnlineCache(firstRun: boolean, changes: number) {\n  if (!firstRun || changes > 0) {\n    return false;\n  }\n\n  if (!(window as any).__SANDBOX_DATA__) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function clearIndexedDBCache() {\n  return localforage.clear();\n}\n\nexport async function saveCache(\n  sandboxId: string,\n  managerModuleToTranspile: any,\n  manager: Manager,\n  changes: number,\n  firstRun: boolean\n) {\n  if (!sandboxId) {\n    return Promise.resolve(false);\n  }\n\n  const managerState = {\n    ...(await manager.serialize({\n      entryPath: managerModuleToTranspile\n        ? managerModuleToTranspile.path\n        : null,\n      optimizeForSize: true,\n    })),\n  };\n\n  try {\n    if (process.env.NODE_ENV === 'development') {\n      debug(\n        'Saving cache of ' +\n          (JSON.stringify(managerState).length / 1024).toFixed(2) +\n          'kb to indexedDB'\n      );\n    }\n    await localforage.setItem(manager.id, managerState);\n  } catch (e) {\n    if (process.env.NODE_ENV === 'development') {\n      console.error(e);\n    }\n    manager.clearCache();\n  }\n\n  if (shouldSaveOnlineCache(firstRun, changes) && SCRIPT_VERSION) {\n    const stringifiedManagerState = JSON.stringify(managerState);\n\n    if (stringifiedManagerState.length > MAX_CACHE_SIZE) {\n      return Promise.resolve(false);\n    }\n\n    debug(\n      'Saving cache of ' +\n        (stringifiedManagerState.length / 1024).toFixed(2) +\n        'kb to CodeSandbox API'\n    );\n\n    return window\n      .fetch(`${host}/api/v1/sandboxes/${sandboxId}/cache`, {\n        method: 'POST',\n        body: JSON.stringify({\n          version: SCRIPT_VERSION,\n          data: stringifiedManagerState,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(x => x.json())\n      .catch(e => {\n        if (process.env.NODE_ENV === 'development') {\n          console.error('Something went wrong while saving cache.');\n          console.error(e);\n        }\n      });\n  }\n\n  return Promise.resolve(false);\n}\n\nexport function deleteAPICache(sandboxId: string): Promise<any> {\n  if (APICacheUsed) {\n    debug('Deleting cache of API');\n    return window\n      .fetch(`${host}/api/v1/sandboxes/${sandboxId}/cache`, {\n        method: 'DELETE',\n        body: JSON.stringify({\n          version: SCRIPT_VERSION,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(x => x.json())\n      .catch(e => {\n        console.error('Something went wrong while deleting cache.');\n        console.error(e);\n      });\n  }\n\n  return Promise.resolve(false);\n}\n\nfunction findCacheToUse(cache1, cache2) {\n  if (!cache1 && !cache2) {\n    return null;\n  }\n\n  if (cache1 && !cache2) {\n    return cache1;\n  }\n\n  if (cache2 && !cache1) {\n    return cache2;\n  }\n\n  return cache2.timestamp > cache1.timestamp ? cache2 : cache1;\n}\n\nexport function ignoreNextCache() {\n  try {\n    localStorage.setItem('ignoreCache', 'true');\n  } catch (e) {\n    console.warn(e);\n  }\n}\n\nexport async function consumeCache(manager: Manager) {\n  try {\n    const shouldIgnoreCache =\n      localStorage.getItem('ignoreCache') ||\n      localStorage.getItem('ignoreCacheDev');\n    if (shouldIgnoreCache) {\n      localStorage.removeItem('ignoreCache');\n\n      return false;\n    }\n\n    const cacheData = (window as any).__SANDBOX_DATA__;\n    const localData = await localforage.getItem(manager.id);\n\n    const cache = findCacheToUse(cacheData && cacheData.data, localData);\n    if (cache) {\n      const version = SCRIPT_VERSION;\n\n      if (cache.version === version) {\n        if (cache === localData) {\n          APICacheUsed = false;\n        } else {\n          APICacheUsed = true;\n        }\n\n        debug(\n          `Loading cache from ${cache === localData ? 'localStorage' : 'API'}`,\n          cache\n        );\n\n        await manager.load(cache);\n\n        return true;\n      }\n    }\n\n    return false;\n  } catch (e) {\n    console.warn('Problems consuming cache');\n    console.warn(e);\n\n    return false;\n  }\n}\n","import _debug from '@codesandbox/common/lib/utils/debug';\nimport Manager from '../eval/manager';\nimport {\n  clearMeasurements,\n  measure,\n  endMeasure,\n  getMeasurements,\n  getCumulativeMeasure,\n} from './metrics';\n\nconst debug = _debug('cs:compiler:benchmarks');\n\ninterface TranspilationTimes {\n  total: number;\n  transpile: number;\n  resolving: number;\n  esConverting: number;\n}\n\nconst printTranspilationMeasurements = (results: TranspilationTimes) => {\n  debug(`Total ${results.total.toFixed(2)}ms`);\n  debug(`  Transpiling ${results.transpile.toFixed(2)}ms`);\n  debug(`  Resolving ${results.resolving.toFixed(2)}ms`);\n  debug(`  Converting ES ${results.esConverting.toFixed(2)}ms`);\n};\n\nexport function generateBenchmarkInterface(manager: Manager) {\n  return {\n    transpilation: async (n = 10, path = '/src/index.js') => {\n      const module = manager.resolveModule(path, '/');\n\n      const times: TranspilationTimes[] = [];\n      for (let i = 0; i < n; i++) {\n        manager.clearTranspilationCache();\n        manager.cachedPaths = {};\n        clearMeasurements();\n\n        measure('transpilation');\n        // eslint-disable-next-line\n        await manager.transpileModules(module);\n        const total = endMeasure('transpilation', { silent: true });\n\n        times.push({\n          total,\n          resolving: getCumulativeMeasure('resolve', { silent: true }),\n          esConverting: getCumulativeMeasure('esconvert', { silent: true }),\n          transpile: getCumulativeMeasure('transpile', { silent: true }),\n        });\n      }\n\n      const averageResults = times.reduce(\n        (result, entry) => ({\n          total: result.total + entry.total / n,\n          esConverting: result.esConverting + entry.esConverting / n,\n          resolving: result.resolving + entry.resolving / n,\n          transpile: result.transpile + entry.transpile / n,\n        }),\n        { total: 0, esConverting: 0, resolving: 0, transpile: 0 }\n      );\n\n      printTranspilationMeasurements(averageResults);\n    },\n    getLastTranspilationMeasurements() {\n      printTranspilationMeasurements({\n        total: getMeasurements().transpilation,\n        resolving: getCumulativeMeasure('resolve', { silent: true }),\n        esConverting: getCumulativeMeasure('esconvert', { silent: true }),\n        transpile: getCumulativeMeasure('transpile', { silent: true }),\n      });\n    },\n  };\n}\n","// Babel bug workaround (https://github.com/babel/babel/issues/8061)\nconst ErrorClass = Error;\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nexport default class ModuleError extends ErrorClass {\n  path: string;\n  error: Error;\n  constructor(module, err) {\n    super();\n\n    this.name = 'ModuleError';\n    this.path = err.fileName || module.module.path;\n    this.message =\n      err && typeof err === 'object' && err.message ? err.message : err;\n    this.error = err;\n    this.stack = err.stack;\n  }\n}\n","import TranspiledModule from '../transpiled-module';\nimport { WarningStructure } from '../transpilers/utils/worker-warning-handler';\n\nexport default class ModuleWarning extends Error {\n  constructor(module: TranspiledModule, warning: WarningStructure) {\n    super();\n\n    this.name = 'ModuleWarning';\n    this.path = warning.fileName || module.module.path;\n    this.message = warning.message;\n    this.warning = warning.message;\n    this.lineNumber = warning.lineNumber;\n    this.columnNumber = warning.columnNumber;\n    this.severity = warning.severity;\n    this.source = warning.source;\n  }\n\n  serialize(): WarningStructure {\n    return {\n      name: 'ModuleWarning',\n      message: this.message,\n      fileName: this.path,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      source: this.source,\n      severity: this.severity,\n    };\n  }\n\n  path: string;\n  message: string;\n  warning: string;\n  severity: 'notice' | 'warning';\n  source?: string;\n  lineNumber?: number;\n  columnNumber?: number;\n}\n","import DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\n\n/**\n * Converts a dependency string to an actual dependency\n *\n * @param {string} dependencyPath\n * @param {Object} externals\n * @returns\n */\nexport default function getDependency(dependencyPath: string) {\n  if (dependencyPath === 'codesandbox-api') {\n    // eslint-disable-next-line\n    return require('codesandbox-api');\n  }\n\n  throw new DependencyNotFoundError(dependencyPath);\n}\n","/* eslint-disable */\n// from https://unpkg.com/process@0.11.10/browser.js\n\nconst process = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nlet cachedSetTimeout;\nlet cachedClearTimeout;\nlet queue = [];\nlet draining = false;\nlet currentQueue;\nlet queueIndex = -1;\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n(function() {\n  try {\n    if (typeof setTimeout === 'function') {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n  try {\n    if (typeof clearTimeout === 'function') {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    // normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  }\n  // if setTimeout wasn't available but was latter defined\n  if (\n    (cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &&\n    setTimeout\n  ) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // eslint-disable-line no-shadow\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    // normal enviroments in sane situations\n    return clearTimeout(marker);\n  }\n  // if clearTimeout wasn't available but was latter defined\n  if (\n    (cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &&\n    clearTimeout\n  ) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // eslint-disable-line no-shadow\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n  // eslint-disable-next-line no-use-before-define\n  const timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n\n  let len = queue.length;\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n    queueIndex = -1;\n    len = queue.length;\n  }\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n  draining = false;\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n  if (queue.length) {\n    drainQueue();\n  }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\nItem.prototype.run = function() {\n  this.fun.apply(null, this.array);\n};\nprocess.nextTick = function(fun) {\n  const args = new Array(arguments.length - 1);\n  if (arguments.length > 1) {\n    for (let i = 1; i < arguments.length; i++) {\n      // eslint-disable-next-line prefer-rest-params\n      args[i - 1] = arguments[i];\n    }\n  }\n  queue.push(new Item(fun, args));\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function() {\n  return [];\n};\n\nprocess.binding = function() {\n  throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function() {\n  return '/';\n};\nprocess.chdir = function() {\n  throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() {\n  return 0;\n};\n\nexport default function build(env) {\n  process.env = { NODE_ENV: 'development', ...env };\n  return process;\n}\n","// @flow\nimport buildProcess from './utils/process';\n\nconst g = typeof window === 'undefined' ? self : window;\nconst requestFrame = (() => {\n  const raf =\n    g.requestAnimationFrame ||\n    // @ts-ignore\n    g.mozRequestAnimationFrame ||\n    g.webkitRequestAnimationFrame ||\n    function(fn) {\n      return g.setTimeout(fn, 20);\n    };\n  return function(fn) {\n    return raf(fn);\n  };\n})();\n\nconst hasGlobalDeclaration = /^const global/m;\n\n/* eslint-disable no-unused-vars */\nexport default function(\n  code: string,\n  require: Function,\n  module: { exports: any },\n  env: Object = {},\n  globals: Object = {},\n  { asUMD = false }: { asUMD?: boolean } = {}\n) {\n  const { exports } = module;\n\n  const global = g;\n  const process = buildProcess(env);\n  // @ts-ignore\n  g.global = global;\n\n  const allGlobals = {\n    require,\n    module,\n    exports,\n    process,\n    setImmediate: requestFrame,\n    global,\n    ...globals,\n  };\n\n  if (asUMD) {\n    delete allGlobals.module;\n    delete allGlobals.exports;\n    delete allGlobals.global;\n  }\n\n  if (hasGlobalDeclaration.test(code)) {\n    delete allGlobals.global;\n  }\n\n  const allGlobalKeys = Object.keys(allGlobals);\n  const globalsCode = allGlobalKeys.length ? allGlobalKeys.join(', ') : '';\n  const globalsValues = allGlobalKeys.map(k => allGlobals[k]);\n  try {\n    const newCode = `(function evaluate(` + globalsCode + `) {` + code + `\\n})`;\n    // eslint-disable-next-line no-eval\n    (0, eval)(newCode).apply(this, globalsValues);\n\n    return module.exports;\n  } catch (e) {\n    let error = e;\n    if (typeof e === 'string') {\n      error = new Error(e);\n    }\n    error.isEvalError = true;\n\n    throw error;\n  }\n}\n/* eslint-enable no-unused-vars */\n","export default class HMR {\n  callback?: () => void;\n  disposeHandler?: (data: Object) => void;\n  data: Object;\n  type?: 'accept' | 'decline';\n  dirty: boolean = false;\n  selfAccepted: boolean = false;\n\n  callDisposeHandler() {\n    if (this.disposeHandler) {\n      this.data = {};\n      this.disposeHandler(this.data);\n      this.disposeHandler = null;\n    }\n  }\n\n  callAcceptCallback() {\n    if (this.callback) {\n      this.callback();\n    }\n  }\n\n  setAcceptCallback(callback?: () => void) {\n    this.callback = callback;\n    this.setSelfAccepted(false);\n  }\n\n  setDisposeHandler(callback: () => void) {\n    this.disposeHandler = callback;\n  }\n\n  setSelfAccepted(selfAccepted: boolean) {\n    this.selfAccepted = selfAccepted;\n    if (selfAccepted) {\n      this.data = {};\n    }\n  }\n\n  setType(type: 'accept' | 'decline') {\n    this.type = type;\n  }\n\n  setDirty(dirty: boolean) {\n    this.dirty = dirty;\n  }\n\n  isDirty() {\n    return this.dirty;\n  }\n\n  /**\n   * Returns whether this module should reset the compilation of its parents\n   */\n  isHot() {\n    return this.type === 'accept';\n  }\n\n  isDeclined(isEntry: boolean) {\n    if (this.type === 'decline') {\n      return true;\n    }\n\n    return !this.isHot() && isEntry;\n  }\n}\n","export const splitQueryFromPath = (path: string) => {\n  const queryPath = path.split('!');\n  // pop() mutates queryPath, queryPath is now just the loaders\n  const modulePath = queryPath.pop();\n\n  return {\n    queryPath: queryPath.join('!'),\n    modulePath,\n  };\n};\n","// eslint-disable-next-line max-classes-per-file\nimport { flattenDeep } from 'lodash-es';\n\nimport { actions, dispatch } from 'codesandbox-api';\nimport _debug from '@codesandbox/common/lib/utils/debug';\n\nimport hashsum from 'hash-sum';\n\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\n\nimport { Module } from './types/module';\nimport { SourceMap } from './transpilers/utils/get-source-map';\nimport ModuleError from './errors/module-error';\nimport ModuleWarning from './errors/module-warning';\n\nimport { WarningStructure } from './transpilers/utils/worker-warning-handler';\n\nimport resolveDependency from './loaders/dependency-resolver';\nimport evaluate from './loaders/eval';\n\nimport Manager, { HMRStatus } from './manager';\nimport HMR from './hmr';\nimport { splitQueryFromPath } from './utils/query-path';\nimport delay from '../utils/delay';\nimport { measure, endMeasure } from '../utils/metrics';\n\ndeclare const BrowserFS: any;\n\nconst debug = _debug('cs:compiler:transpiled-module');\n\nexport type ChildModule = Module & {\n  parent: Module;\n};\n\nclass ModuleSource {\n  fileName: string;\n  compiledCode: string;\n  sourceMap: SourceMap | undefined;\n  sourceEqualsCompiled: boolean;\n\n  constructor(\n    fileName: string,\n    compiledCode: string,\n    sourceMap: SourceMap | undefined,\n    sourceEqualsCompiled = false\n  ) {\n    this.fileName = fileName;\n    this.compiledCode = compiledCode;\n    this.sourceMap = sourceMap;\n    this.sourceEqualsCompiled = sourceEqualsCompiled;\n  }\n}\n\nexport type SerializedTranspiledModule = {\n  module: Module;\n  query: string;\n  source?: ModuleSource;\n  sourceEqualsCompiled: boolean;\n  assets: {\n    [name: string]: ModuleSource;\n  };\n  isEntry: boolean;\n  isTestFile: boolean;\n  childModules: Array<string>;\n  /**\n   * All extra modules emitted by the loader\n   */\n  emittedAssets: Array<ModuleSource>;\n  initiators: Array<string>;\n  dependencies: Array<string>;\n  asyncDependencies: Array<string>;\n  transpilationDependencies: Array<string>;\n  transpilationInitiators: Array<string>;\n  warnings: WarningStructure[];\n  hasMissingDependencies: boolean;\n};\n\n/* eslint-disable no-use-before-define */\nexport type LoaderContext = {\n  emitWarning: (warning: WarningStructure) => void;\n  emitError: (error: Error) => void;\n  emitModule: (\n    title: string,\n    code: string,\n    currentPath?: string,\n    overwrite?: boolean,\n    isChild?: boolean\n  ) => TranspiledModule;\n  emitFile: (name: string, content: string, sourceMap: SourceMap) => void;\n  options: {\n    context: string;\n    config?: object;\n    [key: string]: any;\n  };\n  webpack: boolean;\n  sourceMap: boolean;\n  target: string;\n  path: string;\n  getModules: () => Array<Module>;\n  addTranspilationDependency: (\n    depPath: string,\n    options?: {\n      isAbsolute?: boolean;\n      isEntry?: boolean;\n    }\n  ) => void;\n  resolveTranspiledModule: (\n    depPath: string,\n    options?: {\n      isAbsolute?: boolean;\n      ignoredExtensions?: Array<string>;\n    }\n  ) => TranspiledModule;\n  resolveTranspiledModuleAsync: (\n    depPath: string,\n    options?: {\n      isAbsolute?: boolean;\n      ignoredExtensions?: Array<string>;\n    }\n  ) => Promise<TranspiledModule>;\n  addDependency: (\n    depPath: string,\n    options?: {\n      isAbsolute?: boolean;\n      isEntry?: boolean;\n    }\n  ) => void;\n  addDependenciesInDirectory: (\n    depPath: string,\n    options?: {\n      isAbsolute?: boolean;\n      isEntry?: boolean;\n    }\n  ) => void;\n  _module: TranspiledModule;\n\n  // Remaining loaders after current loader\n  remainingRequests: string;\n  template: string;\n};\n/* eslint-enable */\n\nexport type Compilation = {\n  id: string;\n  exports: any;\n  globals: object | undefined;\n  hot: {\n    accept: (() => void) | ((arg: string | string[], cb: () => void) => void);\n    decline: (path: string | Array<string>) => void;\n    dispose: (cb: () => void) => void;\n    data: Object;\n    status: () => HMRStatus;\n    addStatusHandler: (cb: (status: HMRStatus) => void) => void;\n    removeStatusHandler: (cb: (status: HMRStatus) => void) => void;\n  };\n};\n\nexport default class TranspiledModule {\n  module: Module;\n  query: string;\n  previousSource: ModuleSource | undefined;\n  source: ModuleSource | undefined;\n  assets: {\n    [name: string]: ModuleSource;\n  };\n\n  isEntry: boolean;\n  childModules: Array<TranspiledModule>;\n  errors: Array<ModuleError>;\n  warnings: Array<ModuleWarning>;\n  /**\n   * All extra modules emitted by the loader\n   */\n  emittedAssets: Array<ModuleSource>;\n  compilation: Compilation | undefined;\n  initiators: Set<TranspiledModule>; // eslint-disable-line no-use-before-define\n  dependencies: Set<TranspiledModule>; // eslint-disable-line no-use-before-define\n  asyncDependencies: Array<Promise<TranspiledModule>>; // eslint-disable-line no-use-before-define\n  transpilationDependencies: Set<TranspiledModule>;\n  transpilationInitiators: Set<TranspiledModule>;\n\n  // Unique identifier\n  hash: string;\n\n  isTestFile: boolean = false;\n\n  /**\n   * Set how this module handles HMR. The default is undefined, which means\n   * that we handle the HMR like CodeSandbox does.\n   */\n  hmrConfig: HMR | undefined;\n\n  hasMissingDependencies: boolean = false;\n\n  /**\n   * Create a new TranspiledModule, a transpiled module is a module that contains\n   * all info for transpilation and compilation. Note that there can be multiple\n   * transpiled modules for 1 module, since a same module can have different loaders\n   * attached using queries.\n   * @param {*} module\n   * @param {*} query A webpack query, eg: \"url-loader?mimetype=image/png\"\n   */\n  constructor(module: Module, query: string = '') {\n    this.module = module;\n    this.query = query;\n    this.errors = [];\n    this.warnings = [];\n    this.childModules = [];\n    this.transpilationDependencies = new Set();\n    this.dependencies = new Set();\n    this.asyncDependencies = [];\n    this.transpilationInitiators = new Set();\n    this.initiators = new Set();\n    this.isEntry = false;\n    this.isTestFile = false;\n\n    this.hash = hashsum(`${this.module.path}:${this.query}`);\n  }\n\n  getId(): string {\n    return `${this.module.path}:${this.query}`;\n  }\n\n  dispose(manager: Manager) {\n    if (this.hmrConfig) {\n      // If this is a hot module we fully reload the application, same as Webpack v2.\n      manager.markHardReload();\n    }\n\n    this.reset();\n\n    // Reset parents\n    this.initiators.forEach(tModule => {\n      tModule.resetTranspilation();\n    });\n\n    // There are no other modules calling this module, so we run a function on\n    // all transpilers that clears side effects if there are any. Example:\n    // Remove CSS styles from the dom.\n    manager.preset.getLoaders(this.module, manager, this.query).forEach(t => {\n      if (t.transpiler.cleanModule) {\n        t.transpiler.cleanModule(this.getLoaderContext(manager, t.options));\n      }\n    });\n    manager.removeTranspiledModule(this);\n  }\n\n  reset() {\n    // We don't reset the compilation if itself and its parents if HMR is\n    // accepted for this module. We only mark it as changed so we can properly\n    // handle the update in the evaluation.\n\n    this.childModules.forEach(m => {\n      m.reset();\n    });\n    this.childModules = [];\n    this.emittedAssets = [];\n    this.resetTranspilation();\n\n    this.setIsEntry(false);\n    this.setIsTestFile(false);\n  }\n\n  resetTranspilation() {\n    Array.from(this.transpilationInitiators)\n      .filter(t => t.source)\n      .forEach(dep => {\n        dep.resetTranspilation();\n      });\n\n    this.previousSource = this.source;\n    this.source = null;\n\n    this.errors = [];\n    this.warnings = [];\n\n    Array.from(this.dependencies).forEach(t => {\n      t.initiators.delete(this);\n    });\n    // Don't do it for transpilation dependencies, since those cannot be traced back since we also reset transpilation of them.\n\n    this.dependencies.clear();\n    this.transpilationDependencies.clear();\n    this.asyncDependencies = [];\n  }\n\n  resetCompilation() {\n    if (this.hmrConfig && this.hmrConfig.isHot()) {\n      this.hmrConfig.setDirty(true);\n    } else {\n      if (this.compilation) {\n        this.compilation = null;\n      }\n\n      Array.from(this.initiators)\n        .filter(t => t.compilation)\n        .forEach(dep => {\n          dep.resetCompilation();\n        });\n\n      Array.from(this.transpilationInitiators)\n        .filter(t => t.compilation)\n        .forEach(dep => {\n          dep.resetCompilation();\n        });\n\n      // If this is an entry we want all direct entries to be reset as well.\n      // Entries generally have side effects\n      if (this.isEntry) {\n        Array.from(this.dependencies)\n          .filter(t => t.compilation && t.isEntry)\n          .forEach(dep => {\n            dep.resetCompilation();\n          });\n      }\n    }\n  }\n\n  /**\n   * Determines if this is a module that should be transpiled if updated. If this\n   * is a transpilationDependency that's updated then it should not get transpiled, but the parent should.\n   */\n  shouldTranspile(): boolean {\n    return (\n      !this.source &&\n      !this.isTestFile &&\n      !(this.initiators.size === 0 && this.transpilationInitiators.size > 0)\n    );\n  }\n\n  async addDependency(\n    manager: Manager,\n    depPath: string,\n    options: {\n      isAbsolute?: boolean;\n      isEntry?: boolean;\n    } = {},\n    isTranspilationDep: boolean = false\n  ) {\n    if (depPath.startsWith('codesandbox-api')) {\n      return;\n    }\n\n    try {\n      const tModule = await manager.resolveTranspiledModule(\n        depPath,\n        options && options.isAbsolute ? '/' : this.module.path\n      );\n\n      if (isTranspilationDep) {\n        this.transpilationDependencies.add(tModule);\n        tModule.transpilationInitiators.add(this);\n      } else {\n        this.dependencies.add(tModule);\n        tModule.initiators.add(this);\n      }\n\n      if (options.isEntry) {\n        tModule.setIsEntry(true);\n      }\n    } catch (e) {\n      if (e.type === 'module-not-found' && e.isDependency) {\n        const { queryPath } = splitQueryFromPath(depPath);\n        this.asyncDependencies.push(\n          manager.downloadDependency(e.path, this, queryPath)\n        );\n      } else {\n        // When a custom file resolver is given to the manager we will try\n        // to resolve using this file resolver. If that fails we will still\n        // mark the dependency as having missing deps.\n        if (manager.fileResolver) {\n          this.asyncDependencies.push(\n            // eslint-disable-next-line\n            new Promise(async resolve => {\n              try {\n                const tModule = await manager.resolveTranspiledModule(\n                  depPath,\n                  options && options.isAbsolute ? '/' : this.module.path,\n                  undefined,\n                  true\n                );\n\n                if (isTranspilationDep) {\n                  this.transpilationDependencies.add(tModule);\n                  tModule.transpilationInitiators.add(this);\n                } else {\n                  this.dependencies.add(tModule);\n                  tModule.initiators.add(this);\n                }\n\n                if (options.isEntry) {\n                  tModule.setIsEntry(true);\n                }\n                resolve(tModule);\n              } catch (err) {\n                if (process.env.NODE_ENV === 'development') {\n                  console.error(\n                    'Problem while trying to fetch file from custom fileResolver'\n                  );\n                  console.error(err);\n                }\n\n                this.hasMissingDependencies = true;\n              }\n            })\n          );\n          return;\n        }\n\n        // Don't throw the error, we want to throw this error during evaluation\n        // so we get the correct line as error\n        // ... Thank you so much for this younger Ives, you saved me here.\n        if (process.env.NODE_ENV === 'development') {\n          console.error(e);\n        }\n\n        this.hasMissingDependencies = true;\n      }\n    }\n  }\n\n  update(module: Module): TranspiledModule {\n    if (this.module.path !== module.path || this.module.code !== module.code) {\n      this.module = module;\n      this.resetTranspilation();\n    }\n\n    return this;\n  }\n\n  createSourceForAsset = (\n    name: string,\n    content: string,\n    sourceMap: SourceMap\n  ) => new ModuleSource(name, content, sourceMap);\n\n  getLoaderContext(\n    manager: Manager,\n    transpilerOptions: Object = {}\n  ): LoaderContext {\n    return {\n      emitWarning: warning => {\n        this.warnings.push(new ModuleWarning(this, warning));\n      },\n      emitError: error => {\n        this.errors.push(new ModuleError(this, error));\n      },\n      emitModule: (\n        path: string,\n        code: string,\n        directoryPath: string = pathUtils.dirname(this.module.path),\n        overwrite = true,\n        isChild = true\n      ) => {\n        const queryPath = path.split('!');\n        // pop() mutates queryPath, queryPath is now just the loaders\n        const modulePath = queryPath.pop();\n\n        const moduleCopy: ChildModule = {\n          path: pathUtils.join(directoryPath, modulePath),\n          parent: this.module,\n          code,\n        };\n\n        let transpiledModule: TranspiledModule;\n        if (!overwrite) {\n          try {\n            transpiledModule = manager.getTranspiledModule(\n              moduleCopy,\n              queryPath.join('!')\n            );\n\n            transpiledModule.update(moduleCopy);\n          } catch (e) {\n            /* Nothing is here, just continue */\n          }\n        }\n\n        transpiledModule =\n          transpiledModule ||\n          manager.addTranspiledModule(moduleCopy, queryPath.join('!'));\n\n        if (isChild) {\n          this.childModules.push(transpiledModule);\n        }\n        this.dependencies.add(transpiledModule);\n        transpiledModule.initiators.add(this);\n\n        return transpiledModule;\n      },\n      emitFile: (name: string, content: string, sourceMap: SourceMap) => {\n        this.assets[name] = this.createSourceForAsset(name, content, sourceMap);\n      },\n      // Add an explicit transpilation dependency, this is needed for loaders\n      // that include the source of another file by themselves, we need to\n      // force transpilation to rebuild the file\n      addTranspilationDependency: (depPath: string, options) => {\n        this.addDependency(manager, depPath, options, true);\n      },\n      addDependency: async (depPath: string, options = {}) => {\n        this.addDependency(manager, depPath, options);\n      },\n      addDependenciesInDirectory: (folderPath: string, options = {}) => {\n        const tModules = manager.resolveTranspiledModulesInDirectory(\n          folderPath,\n          options && options.isAbsolute ? '/' : this.module.path\n        );\n\n        tModules.forEach(tModule => {\n          this.dependencies.add(tModule);\n          tModule.initiators.add(this);\n\n          if (options.isEntry) {\n            tModule.setIsEntry(true);\n          }\n        });\n      },\n      resolveTranspiledModule: (depPath: string, options = {}) =>\n        manager.resolveTranspiledModule(\n          depPath,\n          options.isAbsolute ? '/' : this.module.path,\n          options.ignoredExtensions\n        ),\n      resolveTranspiledModuleAsync: (depPath: string, options = {}) =>\n        manager.resolveTranspiledModuleAsync(\n          depPath,\n          options.isAbsolute ? null : this,\n          options.ignoredExtensions\n        ),\n      getModules: (): Array<Module> => manager.getModules(),\n      options: {\n        context: pathUtils.dirname(this.module.path),\n        configurations: manager.configurations,\n        ...transpilerOptions,\n      },\n      webpack: true,\n      sourceMap: true,\n      target: 'web',\n      _module: this,\n      path: this.module.path,\n      template: manager.preset.name,\n      remainingRequests: '', // will be filled during transpilation\n    };\n  }\n\n  /**\n   * Mark the transpiled module as entry (or not), this is needed to let the\n   * cleanup know that this module can have no initiators, but is still required.\n   * @param {*} isEntry\n   */\n  setIsEntry(isEntry: boolean) {\n    this.isEntry = isEntry;\n  }\n\n  /**\n   * Mark if this is a test file. If this is a test file we know that we don't\n   * need to do any refresh or fixing when an error is thrown by the module. It's\n   * not a vital module after all.\n   */\n  setIsTestFile(isTestFile: boolean) {\n    this.isTestFile = isTestFile;\n  }\n\n  /**\n   * Transpile the module, it takes in all loaders from the default loaders +\n   * query string and passes the result from loader to loader. During transpilation\n   * dependencies can be added, these dependencies will be transpiled concurrently\n   * after the initial transpilation finished.\n   * @param {*} manager\n   */\n  async doTranspile(manager: Manager) {\n    this.hasMissingDependencies = false;\n\n    // Remove this module from the initiators of old deps, so we can populate a\n    // fresh cache\n    this.dependencies.forEach(tModule => {\n      tModule.initiators.delete(this);\n    });\n    this.transpilationDependencies.forEach(tModule => {\n      tModule.transpilationInitiators.delete(this);\n    });\n    this.childModules.forEach(tModule => {\n      tModule.dispose(manager);\n    });\n    this.dependencies.clear();\n    this.transpilationDependencies.clear();\n    this.childModules.length = 0;\n    this.errors = [];\n    this.warnings = [];\n\n    let code = this.module.code || '';\n    let finalSourceMap = null;\n\n    const { requires } = this.module;\n    if (requires != null && this.query === '') {\n      // We now know that this has been transpiled on the server, so we shortcut\n      const loaderContext = this.getLoaderContext(manager, {});\n      // These are precomputed requires, for npm dependencies\n      requires.forEach(r => {\n        if (r.indexOf('glob:') === 0) {\n          const reGlob = r.replace('glob:', '');\n          loaderContext.addDependenciesInDirectory(reGlob);\n        } else {\n          loaderContext.addDependency(r);\n        }\n      });\n\n      // eslint-disable-next-line\n      code = this.module.code;\n    } else {\n      const transpilers = manager.preset.getLoaders(\n        this.module,\n        manager,\n        this.query\n      );\n\n      for (let i = 0; i < transpilers.length; i += 1) {\n        const transpilerConfig = transpilers[i];\n        const loaderContext = this.getLoaderContext(\n          manager,\n          transpilerConfig.options || {}\n        );\n        loaderContext.remainingRequests = transpilers\n          .slice(i + 1)\n          .map(transpiler => transpiler.transpiler.name)\n          .concat([this.module.path])\n          .join('!');\n\n        const measureKey = `transpile-${\n          transpilerConfig.transpiler.name\n        }-${this.getId()}`;\n        try {\n          measure(measureKey);\n          const {\n            transpiledCode,\n            sourceMap,\n            // eslint-disable-next-line no-await-in-loop\n          } = await transpilerConfig.transpiler.transpile(code, loaderContext);\n          endMeasure(measureKey, { silent: true });\n\n          if (this.errors.length) {\n            throw this.errors[0];\n          }\n\n          code = transpiledCode;\n          finalSourceMap = sourceMap;\n        } catch (e) {\n          e.fileName = loaderContext.path;\n          e.tModule = this;\n          this.resetTranspilation();\n\n          // Compilation should also be reset, since the code will be different now\n          // we don't have a transpilation.\n          this.resetCompilation();\n          manager.clearCache();\n\n          throw e;\n        }\n      }\n\n      this.logWarnings();\n    }\n\n    const sourceEqualsCompiled = code === this.module.code;\n    const sourceURL = `//# sourceURL=${location.origin}${this.module.path}${\n      this.query ? `?${this.hash}` : ''\n    }`;\n\n    // Add the source of the file by default, this is important for source mapping\n    // errors back to their origin\n    code = `${code}\\n${sourceURL}`;\n\n    this.source = new ModuleSource(\n      this.module.path,\n      code,\n      finalSourceMap,\n      sourceEqualsCompiled\n    );\n\n    if (\n      this.previousSource &&\n      this.previousSource.compiledCode !== this.source.compiledCode\n    ) {\n      const hasHMR = manager.preset\n        .getLoaders(this.module, manager, this.query)\n        .some(t =>\n          t.transpiler.HMREnabled == null ? true : t.transpiler.HMREnabled\n        );\n\n      if (!hasHMR) {\n        manager.markHardReload();\n      } else {\n        this.resetCompilation();\n      }\n    }\n\n    await Promise.all(\n      this.asyncDependencies.map(async p => {\n        try {\n          const tModule = await p;\n\n          this.dependencies.add(tModule);\n          tModule.initiators.add(this);\n        } catch (e) {\n          /* let this handle at evaluation */\n        }\n      })\n    );\n\n    this.asyncDependencies = [];\n\n    await Promise.all(\n      flattenDeep([\n        ...Array.from(this.transpilationInitiators).map(t =>\n          t.transpile(manager)\n        ),\n        ...Array.from(this.dependencies).map(t => t.transpile(manager)),\n      ])\n    );\n\n    return this;\n  }\n\n  transpile(manager: Manager): Promise<this> {\n    if (this.source) {\n      return Promise.resolve(this);\n    }\n\n    const id = this.getId();\n    if (manager.transpileJobs[id]) {\n      if (manager.transpileJobs[id] === true) {\n        // Is currently being transpiled, and the promise hasn't been set yet\n        // because it is working on executing the promise. This rare case only\n        // happens when we have a dependency loop, which could result in a\n        // StackTraceOverflow. Dependency loop: A -> B -> C -> A -> B -> C\n        return new Promise(async resolve => {\n          while (!this.source && manager.transpileJobs[id] === true) {\n            // eslint-disable-next-line\n            await delay(10);\n          }\n\n          if (manager.transpileJobs[id] && manager.transpileJobs[id] !== true) {\n            resolve(manager.transpileJobs[id] as Promise<this>);\n          } else {\n            resolve(this);\n          }\n        });\n      }\n      return manager.transpileJobs[id] as Promise<this>;\n    }\n\n    manager.transpileJobs[id] = true;\n    // eslint-disable-next-line\n    return (manager.transpileJobs[id] = this.doTranspile(manager)).finally(\n      () => {\n        delete manager.transpileJobs[id];\n      }\n    );\n  }\n\n  logWarnings = () => {\n    if (this.warnings.length) {\n      this.warnings.forEach(warning => {\n        console.warn(warning.message); // eslint-disable-line no-console\n        dispatch(\n          actions.correction.show(warning.message, {\n            line: warning.lineNumber,\n            column: warning.columnNumber,\n            path: warning.path,\n            source: warning.source,\n            severity: warning.severity || 'warning',\n          })\n        );\n      });\n    }\n  };\n\n  isCompilationCached = (globals?: object) => {\n    if (!this.compilation || !this.compilation.exports) {\n      return false;\n    }\n\n    if (this.compilation.globals === globals) {\n      return true;\n    }\n\n    return false;\n  };\n\n  evaluate(\n    manager: Manager,\n    {\n      asUMD = false,\n      force = false,\n      globals,\n    }: { asUMD?: boolean; force?: boolean; globals?: any } = {},\n    initiator?: TranspiledModule\n  ) {\n    if (this.source == null) {\n      if (this.module.path === '/node_modules/empty/index.js') {\n        return {};\n      }\n\n      if (this.module.path.startsWith('/node_modules')) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\n            `[WARN] Sandpack: loading an untranspiled module: ${this.module.path}`\n          );\n        }\n        // This code is probably required as a dynamic require. Since we can\n        // assume that node_modules dynamic requires are only done for node\n        // utilites we will just set the transpiled code according to how\n        // node handles that.\n\n        let code = this.module.path.endsWith('.json')\n          ? `module.exports = JSON.parse(${JSON.stringify(this.module.code)})`\n          : this.module.code;\n\n        code += `\\n//# sourceURL=${location.origin}${this.module.path}${\n          this.query ? `?${this.hash}` : ''\n        }`;\n\n        this.source = new ModuleSource(this.module.path, code, null);\n\n        if (initiator) {\n          initiator.dependencies.add(this);\n          this.initiators.add(initiator);\n        }\n      } else {\n        // This scenario only happens when we are in an inconsistent state, the quickest way to solve\n        // this state is to just hard reload everything.\n        manager.clearCache();\n\n        throw new Error(`${this.module.path} hasn't been transpiled yet.`);\n      }\n    }\n\n    const localModule = this.module;\n\n    if (manager.webpackHMR) {\n      if (!this.compilation) {\n        const shouldReloadPage = this.hmrConfig\n          ? this.hmrConfig.isDeclined(this.isEntry)\n          : this.isEntry && !this.isTestFile;\n\n        if (shouldReloadPage) {\n          if (manager.isFirstLoad) {\n            // We're in a reload loop! Ignore all caches!\n\n            manager.clearCache();\n            manager.deleteAPICache().then(() => {\n              document.location.reload();\n            });\n          } else {\n            document.location.reload();\n          }\n          return {};\n        }\n      } else if (\n        !this.isTestFile &&\n        (!this.hmrConfig || !this.hmrConfig.isDirty())\n      ) {\n        return this.compilation.exports;\n      }\n    } else if (this.isCompilationCached(globals) && !this.isEntry) {\n      return this.compilation.exports;\n    }\n\n    if (this.hmrConfig) {\n      /* eslint-disable no-param-reassign */\n      manager.setHmrStatus('dispose');\n      // Call module.hot.dispose handler\n      // https://webpack.js.org/api/hot-module-replacement/#dispose-or-adddisposehandler-\n      this.hmrConfig.callDisposeHandler();\n      manager.setHmrStatus('idle');\n      /* eslint-enable */\n    }\n\n    const hotData = this.hmrConfig ? this.hmrConfig.data : undefined;\n\n    this.compilation = this.compilation || {\n      id: this.getId(),\n      exports: {},\n      globals,\n      hot: {\n        accept: (path: string | Array<string>, cb) => {\n          if (\n            typeof path === 'undefined' ||\n            typeof path !== 'string' ||\n            !Array.isArray(path)\n          ) {\n            // Self mark hot\n            this.hmrConfig = this.hmrConfig || new HMR();\n            if (this.hmrConfig) {\n              const { hmrConfig } = this;\n              hmrConfig.setType('accept');\n              hmrConfig.setSelfAccepted(true);\n            }\n          } else {\n            const paths = typeof path === 'string' ? [path] : path;\n\n            paths.forEach(async p => {\n              const tModule = await manager.resolveTranspiledModule(\n                p,\n                this.module.path\n              );\n\n              tModule.hmrConfig = tModule.hmrConfig || new HMR();\n              const { hmrConfig } = tModule;\n              hmrConfig.setType('accept');\n              hmrConfig.setAcceptCallback(cb);\n            });\n          }\n          manager.enableWebpackHMR();\n        },\n        decline: (path: string | Array<string>) => {\n          if (typeof path === 'undefined') {\n            this.hmrConfig = this.hmrConfig || new HMR();\n            this.hmrConfig.setType('decline');\n            this.resetCompilation();\n          } else {\n            const paths = typeof path === 'string' ? [path] : path;\n\n            paths.forEach(async p => {\n              const tModule = await manager.resolveTranspiledModule(\n                p,\n                this.module.path\n              );\n              tModule.hmrConfig = tModule.hmrConfig || new HMR();\n              tModule.hmrConfig.setType('decline');\n              tModule.resetCompilation();\n            });\n          }\n          manager.enableWebpackHMR();\n        },\n        dispose: (cb: () => void) => {\n          this.hmrConfig = this.hmrConfig || new HMR();\n\n          this.hmrConfig.setDisposeHandler(cb);\n        },\n        data: hotData,\n        status: () => manager.hmrStatus,\n        addStatusHandler: manager.addStatusHandler,\n        removeStatusHandler: manager.removeStatusHandler,\n      },\n    };\n    if (this.compilation.hot) {\n      this.compilation.hot.data = hotData;\n    }\n\n    const transpiledModule = this;\n\n    try {\n      // eslint-disable-next-line no-inner-declarations\n      function require(path: string) {\n        if (path === '') {\n          throw new Error('Cannot import an empty path');\n        }\n\n        const usedPath = manager.getPresetAliasedPath(path);\n        const bfsModule = BrowserFS.BFSRequire(usedPath);\n\n        if (path === 'os') {\n          const os = require('os-browserify');\n          os.homedir = () => '/home/sandbox';\n          return os;\n        }\n\n        if (bfsModule) {\n          return bfsModule;\n        }\n\n        if (path === 'module') {\n          return class NodeModule {\n            filename = undefined;\n            id = undefined;\n            loaded = false;\n\n            static _resolveFilename(toPath: string, module) {\n              if (module.filename == null) {\n                throw new Error('Module has no filename');\n              }\n\n              const m = manager.resolveModule(toPath, module.filename);\n              return m.path;\n            }\n\n            static _nodeModulePaths() {\n              return [];\n            }\n          };\n        }\n\n        // So it must be a dependency\n        if (path.startsWith('codesandbox-api')) {\n          return resolveDependency(path);\n        }\n\n        const requiredTranspiledModule = manager.resolveTranspiledModule(\n          path,\n          localModule.path\n        );\n\n        // Check if this module has been evaluated before, if so return the exports\n        // of that compilation\n        const cache = requiredTranspiledModule.compilation;\n\n        return requiredTranspiledModule.isCompilationCached(globals)\n          ? cache.exports\n          : manager.evaluateTranspiledModule(\n              requiredTranspiledModule,\n              transpiledModule,\n              { force, globals }\n            );\n      }\n\n      // @ts-ignore\n      require.resolve = function resolve(path: string) {\n        const foundModule = manager.resolveModule(path, localModule.path);\n\n        return foundModule.path;\n      };\n\n      const usedGlobals = globals || {};\n      usedGlobals.__dirname = pathUtils.dirname(this.module.path);\n      usedGlobals.__filename = this.module.path;\n      usedGlobals.$csbImport = (path: string) =>\n        manager\n          .evaluate(path, this)\n          .then(result => (result.__esModule ? result : { default: result }));\n\n      const exports = evaluate(\n        this.source.compiledCode,\n        require,\n        this.compilation,\n        manager.envVariables,\n        usedGlobals,\n        { asUMD }\n      );\n\n      /* eslint-disable no-param-reassign */\n      manager.setHmrStatus('apply');\n      const { hmrConfig } = this;\n      if (hmrConfig && hmrConfig.isHot()) {\n        hmrConfig.setDirty(false);\n        hmrConfig.callAcceptCallback();\n      }\n      manager.setHmrStatus('idle');\n      /* eslint-enable */\n\n      return exports;\n    } catch (e) {\n      e.tModule = e.tModule || transpiledModule;\n\n      this.resetCompilation();\n\n      throw e;\n    }\n  }\n\n  postTranspile(manager: Manager) {\n    if (\n      this.initiators.size === 0 &&\n      this.transpilationInitiators.size === 0 &&\n      !this.isEntry &&\n      !manager.isFirstLoad &&\n      // Don't delete stubbed modules, they are here for a reason, most probably\n      // because they are aliased with a browser field\n      !this.module.stubbed\n    ) {\n      // Remove the module from the transpiler if it's not used anymore\n      debug(`Removing '${this.getId()}' from manager.`);\n      this.dispose(manager);\n    }\n  }\n\n  postEvaluate(manager: Manager) {\n    // Question: do we need to disable this for HMR projects?\n    // For non cacheable transpilers we remove the cached evaluation\n    if (\n      manager.preset\n        .getLoaders(this.module, manager, this.query)\n        .some(t =>\n          t.transpiler.cacheable == null ? false : !t.transpiler.cacheable\n        )\n    ) {\n      debug(`Removing '${this.getId()}' cache as it's not cacheable.`);\n      this.compilation = null;\n    }\n  }\n\n  async serialize(\n    optimizeForSize: boolean = true\n  ): Promise<SerializedTranspiledModule> {\n    const sourceEqualsCompiled =\n      this.source && this.source.sourceEqualsCompiled;\n    const serializableObject: SerializedTranspiledModule = {\n      query: this.query,\n      assets: this.assets,\n      module: this.module,\n      emittedAssets: this.emittedAssets,\n      isEntry: this.isEntry,\n      isTestFile: this.isTestFile,\n\n      sourceEqualsCompiled,\n      childModules: this.childModules.map(m => m.getId()),\n      dependencies: Array.from(this.dependencies).map(m => m.getId()),\n      initiators: Array.from(this.initiators).map(m => m.getId()),\n      transpilationDependencies: Array.from(\n        this.transpilationDependencies\n      ).map(m => m.getId()),\n      transpilationInitiators: Array.from(this.transpilationInitiators).map(m =>\n        m.getId()\n      ),\n      asyncDependencies: await Promise.all(\n        Array.from(this.asyncDependencies).map(m => m.then(x => x.getId()))\n      ),\n      warnings: this.warnings.map(war => war.serialize()),\n      hasMissingDependencies: this.hasMissingDependencies,\n    };\n\n    const isNpmDependnecy = this.module.path.startsWith('/node_modules/');\n    const canOptimizeSize = sourceEqualsCompiled && optimizeForSize;\n    // Don't cache source if it didn't change, also don't cache changed source from npm\n    // dependencies as we can compile those really quickly.\n    const shouldCacheTranspiledSource = !canOptimizeSize && !isNpmDependnecy;\n\n    if (shouldCacheTranspiledSource) {\n      serializableObject.source = this.source;\n    }\n\n    return serializableObject;\n  }\n\n  async load(\n    data: SerializedTranspiledModule,\n    state: { [id: string]: TranspiledModule },\n    manager: Manager\n  ) {\n    this.query = data.query;\n    this.assets = data.assets;\n    this.module = data.module;\n    this.emittedAssets = data.emittedAssets;\n    this.isEntry = data.isEntry;\n    this.isTestFile = data.isTestFile;\n    this.hasMissingDependencies = data.hasMissingDependencies;\n\n    if (data.sourceEqualsCompiled) {\n      this.source = new ModuleSource(\n        this.module.path,\n        this.module.code,\n        null,\n        true\n      );\n    } else {\n      this.source = data.source;\n    }\n\n    const getModule = (depId: string) => {\n      if (state[depId]) {\n        return state[depId];\n      }\n\n      const [path, ...queryParts] = depId.split(':');\n      const query = queryParts.join(':');\n\n      const { module } = manager.transpiledModules[path];\n      return manager.getTranspiledModule(module, query);\n    };\n\n    const loadModule = (\n      depId: string,\n      initiator = false,\n      transpilation = false\n    ) => {\n      const tModule = getModule(depId);\n\n      if (initiator) {\n        if (transpilation) {\n          tModule.transpilationDependencies.add(this);\n        } else {\n          tModule.dependencies.add(this);\n        }\n      } else if (transpilation) {\n        tModule.transpilationInitiators.add(this);\n      } else {\n        tModule.initiators.add(this);\n      }\n\n      return tModule;\n    };\n\n    data.dependencies.forEach((depId: string) => {\n      this.dependencies.add(loadModule(depId));\n    });\n    data.childModules.forEach((depId: string) => {\n      this.childModules.push(loadModule(depId));\n    });\n    data.initiators.forEach((depId: string) => {\n      this.initiators.add(loadModule(depId, true));\n    });\n    data.transpilationDependencies.forEach((depId: string) => {\n      this.transpilationDependencies.add(loadModule(depId, false, true));\n    });\n    data.transpilationInitiators.forEach((depId: string) => {\n      this.transpilationInitiators.add(loadModule(depId, true, true));\n    });\n    data.asyncDependencies.forEach((depId: string) => {\n      this.asyncDependencies.push(Promise.resolve(loadModule(depId)));\n    });\n\n    this.warnings =\n      data.warnings.map(war => new ModuleWarning(this, war)) || [];\n    this.logWarnings();\n  }\n}\n","export default function getDependencyName(path: string) {\n  const dependencyParts = path.split('/');\n  let dependencyName = dependencyParts.shift();\n\n  if (path.startsWith('@')) {\n    dependencyName += `/${dependencyParts.shift()}`;\n  }\n  if (dependencyParts[0] && /^\\d+\\.\\d+\\.\\d+.*$/.test(dependencyParts[0])) {\n    // Make sure to include the aliased version if it's part of it\n    dependencyName += `/${dependencyParts.shift()}`;\n  }\n\n  return dependencyName;\n}\n","import { PackageJSON } from '@codesandbox/common/lib/types';\n\nexport const packageFilter = (isFile: (p: string) => boolean = () => true) => (\n  p: PackageJSON,\n  pkgLocation: string\n) => {\n  if (p.module) {\n    p.main = p.module;\n  }\n\n  return p;\n};\n","import * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport { CSB_PKG_PROTOCOL } from '@codesandbox/common/lib/utils/ci';\nimport resolve from 'browser-resolve';\nimport DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\n\nimport delay from 'sandbox/utils/delay';\nimport { Module } from '../types/module';\nimport Manager from '../manager';\n\nimport getDependencyName from '../utils/get-dependency-name';\nimport { packageFilter } from '../utils/resolve-utils';\nimport TranspiledModule from '../transpiled-module';\n\ntype Meta = {\n  [path: string]: any;\n};\ntype Metas = {\n  [dependencyAndVersion: string]: Meta;\n};\n\ntype Packages = {\n  [path: string]: Promise<Module>;\n};\n\ntype MetaFiles = Array<{\n  path: string;\n  type: 'file' | 'directory';\n  files?: MetaFiles;\n}>;\n\nconst metas: Metas = {};\nexport let combinedMetas: Meta = {}; // eslint-disable-line\nconst normalizedMetas: { [key: string]: Meta } = {};\nconst packages: Packages = {};\n\nfunction normalize(files: MetaFiles, fileObject: Meta = {}, rootPath: string) {\n  for (let i = 0; i < files.length; i += 1) {\n    if (files[i].type === 'file') {\n      const absolutePath = rootPath + files[i].path;\n      fileObject[absolutePath] = true; // eslint-disable-line no-param-reassign\n    }\n\n    if (files[i].files) {\n      normalize(files[i].files, fileObject, rootPath);\n    }\n  }\n\n  return fileObject;\n}\n\nfunction normalizeJSDelivr(files: any, fileObject: Meta = {}, rootPath) {\n  for (let i = 0; i < files.length; i += 1) {\n    const absolutePath = pathUtils.join(rootPath, files[i].name);\n    fileObject[absolutePath] = true; // eslint-disable-line no-param-reassign\n  }\n\n  return fileObject;\n}\n\n/**\n * Converts urls like \"https://github.com/user/repo.git\" to \"user/repo\".\n */\nconst convertGitHubURLToVersion = (version: string) => {\n  const result = version.match(/https:\\/\\/github\\.com\\/(.*)$/);\n  if (result && result[1]) {\n    const repo = result[1];\n    return repo.replace(/\\.git$/, '');\n  }\n\n  return version;\n};\n\nconst urlProtocols = {\n  csbGH: {\n    file: async (name: string, version: string, path: string) =>\n      `${version.replace(/\\/_pkg.tgz$/, '')}${path}`,\n    meta: async (name: string, version: string) =>\n      `${version.replace(/\\/\\.pkg.tgz$/, '')}/_csb-meta.json`,\n    normalizeMeta: normalize,\n  },\n  unpkg: {\n    file: async (name: string, version: string, path: string) =>\n      `https://unpkg.com/${name}@${version}${path}`,\n    meta: async (name: string, version: string) =>\n      `https://unpkg.com/${name}@${version}/?meta`,\n    normalizeMeta: normalize,\n  },\n  jsDelivrNPM: {\n    file: async (name: string, version: string, path: string) =>\n      `https://cdn.jsdelivr.net/npm/${name}@${version}${path}`,\n    meta: async (name: string, version: string) => {\n      // if it's a tag it won't work, so we fetch latest version otherwise\n      const latestVersion = /^\\d/.test(version)\n        ? version\n        : JSON.parse(\n            (await downloadDependency(name, version, '/package.json')).code\n          ).version;\n\n      return `https://data.jsdelivr.com/v1/package/npm/${name}@${latestVersion}/flat`;\n    },\n    normalizeMeta: normalizeJSDelivr,\n  },\n  jsDelivrGH: {\n    file: async (name: string, version: string, path: string) =>\n      `https://cdn.jsdelivr.net/gh/${convertGitHubURLToVersion(\n        version\n      )}${path}`,\n    meta: async (name: string, version: string) => {\n      // First get latest sha from GitHub API\n      const sha = await fetch(\n        `https://api.github.com/repos/${convertGitHubURLToVersion(\n          version\n        )}/commits/master`\n      )\n        .then(x => x.json())\n        .then(x => x.sha);\n\n      return `https://data.jsdelivr.com/v1/package/gh/${convertGitHubURLToVersion(\n        version\n      )}@${sha}/flat`;\n    },\n    normalizeMeta: normalizeJSDelivr,\n  },\n};\n\nasync function fetchWithRetries(url: string, retries = 6): Promise<Response> {\n  const doFetch = () =>\n    window.fetch(url).then(x => {\n      if (x.ok) {\n        return x;\n      }\n\n      throw new Error(`Could not fetch ${url}`);\n    });\n\n  let lastTryTime = 0;\n  for (let i = 0; i < retries; i++) {\n    if (Date.now() - lastTryTime < 3000) {\n      // Ensure that we at least wait 3s before retrying a request to prevent rate limits\n      // eslint-disable-next-line\n      await delay(3000 - (Date.now() - lastTryTime));\n    }\n    try {\n      lastTryTime = Date.now();\n      // eslint-disable-next-line\n      return await doFetch();\n    } catch (e) {\n      console.error(e);\n      if (i === retries - 1) {\n        throw e;\n      }\n    }\n  }\n\n  throw new Error('Could not fetch');\n}\n\nexport function setCombinedMetas(givenCombinedMetas: Meta) {\n  combinedMetas = givenCombinedMetas;\n}\n\nconst getFetchProtocol = (depVersion: string, useFallback = false) => {\n  const isDraftProtocol = CSB_PKG_PROTOCOL.test(depVersion);\n\n  if (isDraftProtocol) {\n    return urlProtocols.csbGH;\n  }\n\n  const isGitHub = /\\//.test(depVersion);\n\n  if (isGitHub) {\n    return urlProtocols.jsDelivrGH;\n  }\n\n  return useFallback ? urlProtocols.unpkg : urlProtocols.jsDelivrNPM;\n};\n\n// Strips the version of a path, eg. test/1.3.0 -> test\nconst ALIAS_REGEX = /\\/\\d*\\.\\d*\\.\\d*.*?(\\/|$)/;\n\n/*\n * Resolve name and version from npm aliases\n * e.g. \"my-react\": \"npm:react@16.0.0\n */\nconst resolveNPMAlias = (name: string, version: string): string[] => {\n  const IS_ALIAS = /^npm:/;\n\n  if (!version.match(IS_ALIAS)) {\n    return [name, version];\n  }\n\n  const parts = version.match(/^npm:(.+)@(.+)/);\n  return [parts[1], parts[2]];\n};\n\nasync function getMeta(\n  name: string,\n  packageJSONPath: string | null,\n  version: string,\n  useFallback = false\n) {\n  const [depName, depVersion] = resolveNPMAlias(name, version);\n  const nameWithoutAlias = depName.replace(ALIAS_REGEX, '');\n  const id = `${packageJSONPath || depName}@${depVersion}`;\n  if (metas[id]) {\n    return metas[id];\n  }\n\n  const protocol = getFetchProtocol(depVersion, useFallback);\n\n  metas[id] = protocol\n    .meta(nameWithoutAlias, depVersion)\n    .then(fetchWithRetries)\n    .then(x => x.json())\n    .catch(e => {\n      delete metas[id];\n\n      throw e;\n    });\n\n  return metas[id];\n}\n\nexport async function downloadDependency(\n  name: string,\n  version: string,\n  path: string\n): Promise<Module> {\n  const [depName, depVersion] = resolveNPMAlias(name, version);\n  const id = depName + depVersion + path;\n  if (packages[id]) {\n    return packages[id];\n  }\n\n  const relativePath = path\n    .replace(\n      new RegExp(\n        `.*${pathUtils.join('/node_modules', depName)}`.replace('/', '\\\\/')\n      ),\n      ''\n    )\n    .replace(/#/g, '%23');\n\n  const nameWithoutAlias = depName.replace(ALIAS_REGEX, '');\n  const protocol = getFetchProtocol(depVersion);\n\n  packages[id] = protocol\n    .file(nameWithoutAlias, depVersion, relativePath)\n    .then(fetchWithRetries)\n    .then(x => x.text())\n    .catch(async () => {\n      const fallbackProtocol = getFetchProtocol(depVersion, true);\n      const fallbackUrl = await fallbackProtocol.file(\n        nameWithoutAlias,\n        depVersion,\n        relativePath\n      );\n\n      return fetchWithRetries(fallbackUrl).then(x => x.text());\n    })\n    .then(x => ({\n      path,\n      code: x,\n      downloaded: true,\n    }));\n\n  return packages[id];\n}\n\nfunction resolvePath(\n  path: string,\n  currentTModule: TranspiledModule,\n  manager: Manager,\n  defaultExtensions: Array<string> = ['js', 'jsx', 'json', 'mjs'],\n  meta = {}\n): Promise<string> {\n  const currentPath = currentTModule.module.path;\n\n  const isFile = (p: string, c?: any, cb?: any): any => {\n    const callback = cb || c;\n\n    const result = Boolean(manager.transpiledModules[p]) || Boolean(meta[p]);\n    if (!callback) {\n      return result;\n    }\n\n    return callback(null, result);\n  };\n\n  return new Promise((res, reject) => {\n    resolve(\n      path,\n      {\n        filename: currentPath,\n        extensions: defaultExtensions.map(ext => '.' + ext),\n        packageFilter: packageFilter(isFile),\n        moduleDirectory: [\n          'node_modules',\n          manager.envVariables.NODE_PATH,\n        ].filter(Boolean),\n        isFile,\n        readFile: async (p, c, cb) => {\n          const callback = cb || c;\n\n          try {\n            const tModule = manager.resolveTranspiledModule(p, '/');\n            tModule.initiators.add(currentTModule);\n            currentTModule.dependencies.add(tModule);\n            return callback(null, tModule.module.code);\n          } catch (e) {\n            const depPath = p.replace(/.*\\/node_modules\\//, '');\n            const depName = getDependencyName(depPath);\n\n            // To prevent infinite loops we keep track of which dependencies have been requested before.\n            if (!manager.transpiledModules[p] && !meta[p]) {\n              const err = new Error('Could not find ' + p);\n              // @ts-ignore\n              err.code = 'ENOENT';\n\n              return callback(err);\n            }\n\n            // eslint-disable-next-line\n            const subDepVersionVersionInfo = await getDependencyVersion(\n              currentTModule,\n              manager,\n              defaultExtensions,\n              depName\n            );\n\n            if (subDepVersionVersionInfo) {\n              const { version: subDepVersion } = subDepVersionVersionInfo;\n              try {\n                const module = await downloadDependency(\n                  depName,\n                  subDepVersion,\n                  p\n                );\n\n                if (module) {\n                  manager.addModule(module);\n                  const tModule = manager.addTranspiledModule(module, '');\n\n                  tModule.initiators.add(currentTModule);\n                  currentTModule.dependencies.add(tModule);\n\n                  callback(null, module.code);\n                  return null;\n                }\n              } catch (er) {\n                // Let it throw the error\n              }\n            }\n\n            return callback(e);\n          }\n        },\n      },\n      (err, resolvedPath) => {\n        if (err) {\n          return reject(err);\n        }\n\n        return res(resolvedPath);\n      }\n    );\n  });\n}\n\ntype DependencyVersionResult =\n  | {\n      version: string;\n      packageJSONPath: string;\n    }\n  | {\n      version: string;\n      packageJSONPath: null;\n    }\n  | {\n      version: string;\n      name: string | null;\n      packageJSONPath: null;\n    };\n\nasync function getDependencyVersion(\n  currentTModule: TranspiledModule,\n  manager: Manager,\n  defaultExtensions: string[] = ['js', 'jsx', 'json', 'mjs'],\n  dependencyName: string\n): Promise<DependencyVersionResult | null> {\n  const { manifest } = manager;\n\n  try {\n    const foundPackageJSONPath = await resolvePath(\n      pathUtils.join(dependencyName, 'package.json'),\n      currentTModule,\n      manager,\n      defaultExtensions\n    );\n\n    // If the dependency is in the root we get it from the manifest, as the manifest\n    // contains all the versions that we really wanted to resolve in the first place.\n    // An example of this is csb.dev packages, the package.json version doesn't say the\n    // actual version, but the semver it relates to. In this case we really want to have\n    // the actual url\n    if (\n      foundPackageJSONPath ===\n      pathUtils.join('/node_modules', dependencyName, 'package.json')\n    ) {\n      const rootDependency = manifest.dependencies.find(\n        dep => dep.name === dependencyName\n      );\n      if (rootDependency) {\n        return {\n          packageJSONPath: foundPackageJSONPath,\n          version: rootDependency.version,\n        };\n      }\n    }\n\n    const packageJSON =\n      manager.transpiledModules[foundPackageJSONPath] &&\n      manager.transpiledModules[foundPackageJSONPath].module.code;\n    const { version } = JSON.parse(packageJSON);\n\n    const savedDepDep = manifest.dependencyDependencies[dependencyName];\n\n    if (\n      savedDepDep &&\n      savedDepDep.resolved === version &&\n      savedDepDep.semver.startsWith('https://')\n    ) {\n      return {\n        packageJSONPath: foundPackageJSONPath,\n        version: savedDepDep.semver,\n      };\n    }\n\n    if (packageJSON !== '//empty.js') {\n      return { packageJSONPath: foundPackageJSONPath, version };\n    }\n  } catch (e) {\n    /* do nothing */\n  }\n\n  let version = null;\n\n  if (manifest.dependencyDependencies[dependencyName]) {\n    if (\n      manifest.dependencyDependencies[dependencyName].semver.startsWith(\n        'https://'\n      )\n    ) {\n      version = manifest.dependencyDependencies[dependencyName].semver;\n    } else {\n      version = manifest.dependencyDependencies[dependencyName].resolved;\n    }\n  } else {\n    const dep = manifest.dependencies.find(m => m.name === dependencyName);\n\n    if (dep) {\n      // eslint-disable-next-line\n      version = dep.version;\n    }\n  }\n\n  if (version) {\n    return { packageJSONPath: null, version };\n  }\n\n  return null;\n}\n\nexport default async function fetchModule(\n  path: string,\n  currentTModule: TranspiledModule,\n  manager: Manager,\n  defaultExtensions: Array<string> = ['js', 'jsx', 'json', 'mjs']\n): Promise<Module> {\n  const currentPath = currentTModule.module.path;\n  // Get the last part of the path as dependency name for paths like\n  // instantsearch.js/node_modules/lodash/sum.js\n  // In this case we want to get the lodash dependency info\n  const dependencyName = getDependencyName(\n    path.replace(/.*\\/node_modules\\//, '')\n  );\n\n  const versionInfo = await getDependencyVersion(\n    currentTModule,\n    manager,\n    defaultExtensions,\n    dependencyName\n  );\n\n  if (versionInfo === null) {\n    throw new DependencyNotFoundError(path);\n  }\n\n  const { packageJSONPath, version } = versionInfo;\n\n  let meta: Meta;\n  let normalizeFunction: typeof normalize;\n\n  try {\n    if (dependencyName === 'd3-interpolate') {\n      // A folder is missing on d3-interpolate on jsdelivr, this way we force unpkg.com.\n      // Keep track: https://github.com/jsdelivr/jsdelivr/issues/18223\n      throw new Error(\"Doesn't work on jsdelivr yet\");\n    }\n\n    normalizeFunction = getFetchProtocol(version).normalizeMeta;\n    meta = await getMeta(dependencyName, packageJSONPath, version);\n  } catch (e) {\n    // Use fallback\n    meta = await getMeta(dependencyName, packageJSONPath, version, true);\n    normalizeFunction = getFetchProtocol(version, true).normalizeMeta;\n  }\n\n  const rootPath = packageJSONPath\n    ? pathUtils.dirname(packageJSONPath)\n    : pathUtils.join('/node_modules', dependencyName);\n  const normalizedCacheKey = dependencyName + rootPath;\n  const normalizedMeta =\n    normalizedMetas[normalizedCacheKey] ||\n    normalizeFunction(meta.files, {}, rootPath);\n  normalizedMetas[normalizedCacheKey] = normalizedMeta;\n  combinedMetas = { ...combinedMetas, ...normalizedMeta };\n\n  const foundPath = await resolvePath(\n    path,\n    currentTModule,\n    manager,\n    defaultExtensions,\n    normalizedMeta\n  );\n\n  if (foundPath === '//empty.js') {\n    // Mark the path of the module as the real module, because during evaluation\n    // we don't have meta to find which modules are browser modules and we still\n    // need to return an empty module for browser modules.\n    const isDependency = /^(\\w|@\\w|@-)/.test(path);\n\n    return {\n      path: isDependency\n        ? pathUtils.join('/node_modules', path)\n        : pathUtils.join(currentPath, path),\n      code: 'module.exports = {};',\n      requires: [],\n      stubbed: true,\n    };\n  }\n\n  return downloadDependency(dependencyName, version, foundPath);\n}\n","export default {\n  assert: 'assert/assert.js',\n  buffer: 'buffer/index.js',\n  child_process: null,\n  cluster: null,\n  console: 'console-browserify/index.js',\n  constants: 'constants-browserify/constants.json',\n  crypto: 'crypto-browserify/index.js',\n  dgram: null,\n  dns: null,\n  domain: 'domain-browser/index.js',\n  events: 'events/events.js',\n  fs: null,\n  http: 'stream-http/index.js',\n  https: 'https-browserify/index.js',\n  module: null,\n  net: null,\n  os: 'os-browserify/browser.js',\n  path: 'path-browserify/index.js',\n  punycode: 'punycode/punycode.js',\n  process: 'process/browser.js',\n  querystring: 'querystring-es3/index.js',\n  readline: null,\n  repl: null,\n  stream: 'stream-browserify/index.js',\n  _stream_duplex: 'readable-stream/duplex.js',\n  _stream_passthrough: 'readable-stream/passthrough.js',\n  _stream_readable: 'readable-stream/readable.js',\n  _stream_transform: 'readable-stream/transform.js',\n  _stream_writable: 'readable-stream/writable.js',\n  sys: 'util/util.js',\n  timers: 'timers-browserify/main.js',\n  tls: null,\n  tty: 'tty-browserify/index.js',\n  url: 'url/url.js',\n  util: 'util/util.js',\n  vm: 'vm-browserify/index.js',\n  zlib: 'browserify-zlib/src/index.js',\n};\n","export default (dependencies: Object) =>\n  Object.keys(dependencies)\n    .sort()\n    .map(name => encodeURIComponent(`${name}@${dependencies[name]}`))\n    .join('+');\n","import { flattenDeep, uniq, values } from 'lodash-es';\nimport { Protocol } from 'codesandbox-api';\nimport resolve from 'browser-resolve';\n\nimport * as pathUtils from '@codesandbox/common/lib/utils/path';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { getGlobal } from '@codesandbox/common/lib/utils/global';\nimport { ParsedConfigurationFiles } from '@codesandbox/common/lib/templates/template';\nimport DependencyNotFoundError from 'sandbox-hooks/errors/dependency-not-found-error';\nimport ModuleNotFoundError from 'sandbox-hooks/errors/module-not-found-error';\n\nimport { generateBenchmarkInterface } from '../utils/benchmark';\nimport { Module } from './types/module';\nimport TranspiledModule, {\n  ChildModule,\n  SerializedTranspiledModule,\n} from './transpiled-module';\nimport Preset from './presets';\nimport { SCRIPT_VERSION } from '..';\nimport fetchModule, {\n  setCombinedMetas,\n  combinedMetas,\n} from './npm/fetch-npm-module';\nimport coreLibraries from './npm/get-core-libraries';\nimport getDependencyName from './utils/get-dependency-name';\nimport dependenciesToQuery from '../npm/dependencies-to-query';\nimport { packageFilter } from './utils/resolve-utils';\n\nimport { ignoreNextCache, deleteAPICache, clearIndexedDBCache } from './cache';\nimport { shouldTranspile } from './transpilers/babel/check';\nimport { splitQueryFromPath } from './utils/query-path';\nimport { measure, endMeasure } from '../utils/metrics';\nimport { IEvaluator } from './evaluator';\n\ndeclare const BrowserFS: any;\n\ntype Externals = {\n  [name: string]: string;\n};\n\nexport type ModuleObject = {\n  [path: string]: Module;\n};\n\nexport type Manifest = {\n  contents: {\n    [path: string]: { content: string; requires: Array<string> };\n  };\n  dependencies: Array<{ name: string; version: string }>;\n  dependencyDependencies: {\n    [name: string]: {\n      semver: string;\n      resolved: string;\n      parents: string[];\n    };\n  };\n  dependencyAliases: {\n    [name: string]: {\n      [depName: string]: string;\n    };\n  };\n};\n\ninterface IFileResolver {\n  protocol: Protocol;\n  isFile: (path: string) => Promise<boolean>;\n  readFile: (path: string) => Promise<string>;\n}\n\nconst NODE_LIBS = ['dgram', 'net', 'tls', 'fs', 'module', 'child_process'];\n// For these dependencies we don't want to follow along with the `browser` field\nconst SKIPPED_BROWSER_FIELD_DEPENDENCIES = ['babel-core', '@babel/core'].reduce(\n  (result, next) => ({\n    ...result,\n    [`/node_modules/${next}/package.json`]: true,\n  }),\n  {}\n);\nconst SHIMMED_MODULE: Module = {\n  path: pathUtils.join('/node_modules', 'empty', 'index.js'),\n  code: `// empty`,\n  requires: [],\n};\n\nconst getShimmedModuleFromPath = (currentPath: string, path: string) => ({\n  ...SHIMMED_MODULE,\n  path: pathUtils.join(pathUtils.dirname(currentPath), path),\n});\nconst debug = _debug('cs:compiler:manager');\n\nexport type HMRStatus = 'idle' | 'check' | 'apply' | 'fail' | 'dispose';\ntype Stage = 'transpilation' | 'evaluation';\n\ntype TManagerOptions = {\n  /**\n   * Whether the parent window has its own file resolver that can be used by the manager to resolve files\n   */\n  hasFileResolver: boolean;\n};\n\nexport default class Manager implements IEvaluator {\n  id: string;\n  transpiledModules: {\n    [path: string]: {\n      module: Module;\n      tModules: {\n        [query: string]: TranspiledModule;\n      };\n    };\n  };\n\n  envVariables: { [envName: string]: string } = {};\n  preset: Preset;\n  externals: Externals;\n  modules: ModuleObject;\n  manifest: Manifest;\n  dependencies: Object;\n  webpackHMR: boolean;\n  hardReload: boolean;\n  hmrStatus: HMRStatus = 'idle';\n  hmrStatusChangeListeners: Set<(status: HMRStatus) => void>;\n  testRunner: import('./tests/jest-lite').default;\n  isFirstLoad: boolean;\n\n  fileResolver: IFileResolver | undefined;\n\n  // List of modules that are being transpiled, to prevent duplicate jobs.\n  transpileJobs: {\n    [transpiledModuleId: string]: true | Promise<TranspiledModule>;\n  };\n\n  transpiledModulesByHash: { [hash: string]: TranspiledModule };\n\n  // All paths are resolved at least twice: during transpilation and evaluation.\n  // We can improve performance by almost 2x in this scenario if we cache the lookups\n  cachedPaths: { [path: string]: { [path: string]: string } };\n\n  configurations: ParsedConfigurationFiles;\n\n  stage: Stage;\n\n  constructor(\n    id: string,\n    preset: Preset,\n    modules: { [path: string]: Module },\n    options: TManagerOptions,\n    cb?: Function\n  ) {\n    this.id = id;\n    this.preset = preset;\n    this.transpiledModules = {};\n    this.cachedPaths = {};\n    this.transpileJobs = {};\n    this.webpackHMR = false;\n    this.hardReload = false;\n    this.hmrStatus = 'idle';\n    this.hmrStatusChangeListeners = new Set();\n    this.isFirstLoad = true;\n    this.transpiledModulesByHash = {};\n    this.configurations = {};\n    this.stage = 'transpilation';\n\n    this.modules = modules;\n    Object.keys(modules).forEach(k => this.addModule(modules[k]));\n\n    getGlobal().manager = this;\n    if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.log(this);\n\n      // Initialize benchmark logic\n      getGlobal().Benchmark = generateBenchmarkInterface(this);\n    }\n\n    BrowserFS.configure(\n      {\n        fs: 'CodeSandboxFS',\n        options: {\n          manager: this.bfsWrapper,\n        },\n      },\n      () => {\n        if (cb) {\n          cb();\n        }\n      }\n    );\n\n    if (options.hasFileResolver) {\n      this.setupFileResolver();\n    }\n  }\n\n  async evaluate(path: string, baseTModule?: TranspiledModule): Promise<any> {\n    const tModule = await this.resolveTranspiledModuleAsync(\n      path,\n      baseTModule,\n      this.preset.ignoredExtensions\n    );\n    await tModule.transpile(this);\n    return tModule.evaluate(this);\n  }\n\n  async initializeTestRunner() {\n    if (this.testRunner) {\n      return this.testRunner;\n    }\n\n    this.testRunner = await import(\n      /* webpackChunkName: 'jest-lite' */ './tests/jest-lite'\n    ).then(({ default: TestRunner }) => new TestRunner(this));\n\n    return this.testRunner;\n  }\n\n  setupFileResolver() {\n    const protocol = new Protocol('file-resolver', () => true, window.parent);\n    this.fileResolver = {\n      protocol,\n      isFile: (path: string) =>\n        protocol.sendMessage<boolean>({ m: 'isFile', p: path }),\n      readFile: (path: string) =>\n        protocol.sendMessage<string>({ m: 'readFile', p: path }),\n    };\n  }\n\n  bfsWrapper = {\n    getTranspiledModules: () => this.transpiledModules,\n    addModule: (module: Module) => {\n      this.addModule(module);\n    },\n    removeModule: (module: Module) => {\n      this.removeModule(module);\n    },\n    moveModule: (module: Module, newPath: string) => {\n      this.moveModule(module, newPath);\n    },\n    updateModule: (module: Module) => {\n      this.updateModule(module);\n    },\n  };\n\n  resetAllModules() {\n    this.getTranspiledModules().forEach(t => {\n      t.resetTranspilation();\n      t.resetCompilation();\n    });\n  }\n\n  // Hoist these 2 functions to the top, since they get executed A LOT\n  isFile = (p: string, cb?: Function | undefined, c?: Function) => {\n    const callback = c || cb;\n    const hasCallback = typeof callback === 'function';\n\n    let returnValue;\n    if (this.stage === 'transpilation') {\n      // In transpilation phase we can afford to download the file if not found,\n      // because we're async. That's why we also include the meta here.\n      returnValue = this.transpiledModules[p] || combinedMetas[p];\n    } else {\n      returnValue = this.transpiledModules[p];\n    }\n\n    if (returnValue == null && hasCallback && this.fileResolver) {\n      return this.fileResolver.isFile(p).then(bool => {\n        callback(null, Boolean(bool));\n      });\n    }\n\n    return hasCallback\n      ? callback(null, Boolean(returnValue))\n      : Boolean(returnValue);\n  };\n\n  readFileSync = (p: string, cb: Function | undefined, c?: Function) => {\n    const callback = c || cb;\n    const hasCallback = typeof callback === 'function';\n\n    if (this.transpiledModules[p]) {\n      const { code } = this.transpiledModules[p].module;\n\n      return hasCallback ? callback(null, code) : code;\n    }\n    if (hasCallback && this.fileResolver) {\n      return this.fileResolver.readFile(p).then(code => {\n        this.addModule({ code, path: p });\n\n        callback(null, code);\n      });\n    }\n\n    const err = new Error('Could not find ' + p);\n    // @ts-ignore\n    err.code = 'ENOENT';\n\n    if (hasCallback) {\n      return callback(err);\n    }\n    throw err;\n  };\n\n  setStage = (stage: Stage) => {\n    this.stage = stage;\n  };\n\n  setManifest(manifest?: Manifest) {\n    this.manifest = manifest || {\n      contents: {},\n      dependencies: [],\n      dependencyDependencies: {},\n      dependencyAliases: {},\n    };\n\n    Object.keys(this.manifest.contents).forEach(path => {\n      const module: Module = {\n        path,\n        code: this.manifest.contents[path].content,\n      };\n\n      if (SKIPPED_BROWSER_FIELD_DEPENDENCIES[path]) {\n        const pJsonCode = JSON.parse(this.manifest.contents[path].content);\n        // eslint-disable-next-line\n        delete pJsonCode.browser;\n        module.code = JSON.stringify(pJsonCode, null, 2);\n      }\n\n      // Check if module syntax, only transpile when that's NOT the case\n      // TODO move this check to the packager\n      if (!shouldTranspile(module.code, path)) {\n        module.requires = this.manifest.contents[path].requires;\n      }\n\n      this.addModule(module);\n    });\n    debug(`Loaded manifest.`);\n  }\n\n  evaluateModule(\n    module: Module,\n    { force = false, globals }: { force?: boolean; globals?: object } = {}\n  ) {\n    if (this.hardReload && !this.isFirstLoad) {\n      // Do a hard reload\n      document.location.reload();\n      return {};\n    }\n\n    // Evaluate the *changed* HMR modules first\n    this.getTranspiledModules()\n      .filter(t => t.hmrConfig && t.hmrConfig.isDirty())\n      .forEach(t => t.evaluate(this));\n\n    const transpiledModule = this.getTranspiledModule(module);\n\n    if (force && transpiledModule.compilation) {\n      transpiledModule.compilation = null;\n    }\n\n    try {\n      const exports = this.evaluateTranspiledModule(\n        transpiledModule,\n        undefined,\n        { force, globals }\n      );\n\n      this.setHmrStatus('idle');\n\n      return exports;\n    } finally {\n      // Run post evaluate\n      this.getTranspiledModules().forEach(t => t.postEvaluate(this));\n    }\n  }\n\n  evaluateTranspiledModule(\n    transpiledModule: TranspiledModule,\n    initiator?: TranspiledModule,\n    { force = false, globals }: { force?: boolean; globals?: object } = {}\n  ) {\n    if (force && transpiledModule.compilation) {\n      transpiledModule.compilation = null;\n    }\n\n    return transpiledModule.evaluate(this, { force, globals }, initiator);\n  }\n\n  addModule(module: Module) {\n    this.transpiledModules[module.path] = this.transpiledModules[\n      module.path\n    ] || { module, tModules: {} };\n  }\n\n  addTranspiledModule(module: Module, query: string = ''): TranspiledModule {\n    if (!this.transpiledModules[module.path]) {\n      this.addModule(module);\n    }\n    this.transpiledModules[module.path].module = module;\n\n    const transpiledModule = new TranspiledModule(module, query);\n    this.transpiledModules[module.path].tModules[query] = transpiledModule;\n    this.transpiledModulesByHash[transpiledModule.hash] = transpiledModule;\n\n    return transpiledModule;\n  }\n\n  getTranspiledModuleByHash(hash: string) {\n    return this.transpiledModulesByHash[hash];\n  }\n\n  /**\n   * Get Transpiled Module from the registry, if there is no transpiled module\n   * in the registry it will create a new one.\n   *\n   * @param {Module} module\n   * @param {string} query A webpack like syntax (!url-loader)\n   */\n  getTranspiledModule(module: Module, query: string = ''): TranspiledModule {\n    const moduleObject = this.transpiledModules[module.path];\n    if (!moduleObject) {\n      this.addModule(module);\n    }\n\n    let transpiledModule = this.transpiledModules[module.path].tModules[query];\n\n    if (!transpiledModule) {\n      transpiledModule = this.addTranspiledModule(module, query);\n    }\n\n    return transpiledModule;\n  }\n\n  /**\n   * One module can have multiple transpiled modules, because modules can be\n   * required in different ways. For example, require(`babel-loader!./Test.vue`) isn't\n   * the same as require(`./Test.vue`).\n   *\n   * This will return all transpiled modules, with different configurations associated one module.\n   * @param {*} module\n   */\n  getTranspiledModulesByModule(module: Module): Array<TranspiledModule> {\n    return this.transpiledModules[module.path]\n      ? values(this.transpiledModules[module.path].tModules)\n      : [];\n  }\n\n  getTranspiledModules() {\n    return values(this.transpiledModulesByHash);\n  }\n\n  removeTranspiledModule(tModule: TranspiledModule) {\n    delete this.transpiledModulesByHash[tModule.hash];\n    delete this.transpiledModules[tModule.module.path].tModules[tModule.query];\n  }\n\n  removeModule(module: Module) {\n    // Reset all cached paths because file structure changed\n    this.cachedPaths = {};\n\n    const existingModule = this.transpiledModules[module.path];\n\n    values(existingModule.tModules).forEach(m => {\n      m.dispose(this);\n      this.removeTranspiledModule(m);\n    });\n\n    delete this.transpiledModules[module.path];\n  }\n\n  moveModule(module: Module, newPath: string) {\n    this.removeModule(module);\n    this.addModule({ ...module, path: newPath });\n  }\n\n  setEnvironmentVariables() {\n    if (this.transpiledModules['/.env'] && this.preset.hasDotEnv) {\n      const envCode = this.transpiledModules['/.env'].module.code;\n\n      this.envVariables = {};\n      try {\n        envCode.split('\\n').forEach(envLine => {\n          const [name, ...val] = envLine.split('=');\n\n          this.envVariables[name] = val.join('=').replace(/^('|\")|('|\")$/g, '');\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n\n  /**\n   * Will transpile this module and all eventual children (requires) that go with it\n   * @param {*} entry\n   */\n  async transpileModules(entry: Module, isTestFile: boolean = false) {\n    this.setHmrStatus('check');\n    this.setEnvironmentVariables();\n    const transpiledModule = this.getTranspiledModule(entry);\n\n    transpiledModule.setIsEntry(true);\n    transpiledModule.setIsTestFile(isTestFile);\n\n    const result = await transpiledModule.transpile(this);\n    this.getTranspiledModules().forEach(t => t.postTranspile(this));\n\n    return result;\n  }\n\n  verifyTreeTranspiled() {\n    return Promise.all(\n      this.getTranspiledModules()\n        .filter(tModule => tModule.shouldTranspile())\n        .map(tModule => tModule.transpile(this))\n    );\n  }\n\n  clearCompiledCache() {\n    this.getTranspiledModules().map(tModule => tModule.resetCompilation());\n  }\n\n  clearTranspilationCache() {\n    this.getTranspiledModules().map(tModule => tModule.resetTranspilation());\n  }\n\n  getModules(): Array<Module | ChildModule> {\n    return values(this.transpiledModules).map(t => t.module);\n  }\n\n  /**\n   * The packager returns a list of dependencies that require a different path\n   * of their subdependencies.\n   *\n   * An example:\n   * if react requires lodash v3, and react-dom requires lodash v4. We add them\n   * both to the bundle, and rewrite paths for lodash v3 to `lodash/3.0.0/`. Then\n   * we specify that when react resolves `lodash` it should resolve `lodash/3.0.0`.\n   *\n   * @param {string} path\n   * @param {string} currentPath\n   * @returns\n   * @memberof Manager\n   */\n  getAliasedDependencyPath(path: string, currentPath: string) {\n    const isDependency = /^(\\w|@\\w|@-)/.test(path);\n\n    if (!isDependency) {\n      return path;\n    }\n\n    const isCurrentPathDependency = currentPath.startsWith('/node_modules');\n    if (!isCurrentPathDependency) {\n      return path;\n    }\n\n    const dependencyName = getDependencyName(path);\n    const previousDependencyName = getDependencyName(\n      currentPath.replace('/node_modules/', '')\n    );\n\n    if (\n      this.manifest.dependencyAliases[previousDependencyName] &&\n      this.manifest.dependencyAliases[previousDependencyName][dependencyName]\n    ) {\n      const aliasedDependencyName = this.manifest.dependencyAliases[\n        previousDependencyName\n      ][dependencyName];\n\n      return path.replace(dependencyName, aliasedDependencyName);\n    }\n\n    return path;\n  }\n\n  /**\n   * Set the manager to use Webpack HMR, this changes how modules are hot reloaded\n   * and how the manager cleans up the website.\n   *\n   * @memberof Manager\n   */\n  enableWebpackHMR() {\n    this.webpackHMR = true;\n  }\n\n  getPresetAliasedPath(path: string) {\n    return this.preset\n      .getAliasedPath(path)\n      .replace(/.*\\{\\{sandboxRoot\\}\\}/, '');\n  }\n\n  getModuleDirectories() {\n    const baseTSCompilerConfig = [\n      this.configurations.typescript,\n      this.configurations.jsconfig,\n    ].find(config => config && config.generated !== true);\n\n    const baseUrl =\n      baseTSCompilerConfig &&\n      baseTSCompilerConfig.parsed &&\n      baseTSCompilerConfig.parsed.compilerOptions &&\n      baseTSCompilerConfig.parsed.compilerOptions.baseUrl;\n\n    return ['node_modules', baseUrl, this.envVariables.NODE_PATH].filter(\n      Boolean\n    );\n  }\n\n  // ALWAYS KEEP THIS METHOD IN SYNC WITH SYNC VERSION\n  async resolveModuleAsync(\n    path: string,\n    currentPath: string,\n    defaultExtensions = ['js', 'jsx', 'json', 'mjs']\n  ): Promise<Module> {\n    const dirredPath = pathUtils.dirname(currentPath);\n    if (this.cachedPaths[dirredPath] === undefined) {\n      this.cachedPaths[dirredPath] = {};\n    }\n\n    const cachedPath = this.cachedPaths[dirredPath][path];\n\n    if (cachedPath) {\n      return Promise.resolve(this.transpiledModules[cachedPath].module);\n    }\n\n    const measureKey = `resolve-async:${path}:${currentPath}`;\n    return new Promise((promiseResolve, promiseReject) => {\n      measure(measureKey);\n      const presetAliasedPath = this.getPresetAliasedPath(path);\n\n      const aliasedPath = this.getAliasedDependencyPath(\n        presetAliasedPath,\n        currentPath\n      );\n      const shimmedPath = coreLibraries[aliasedPath] || aliasedPath;\n\n      if (NODE_LIBS.indexOf(shimmedPath) > -1) {\n        this.cachedPaths[dirredPath][path] = shimmedPath;\n        promiseResolve(getShimmedModuleFromPath(currentPath, path));\n        return;\n      }\n\n      resolve(\n        shimmedPath,\n        {\n          filename: currentPath,\n          extensions: defaultExtensions.map(ext => '.' + ext),\n          isFile: this.isFile,\n          readFile: this.readFileSync,\n          packageFilter: packageFilter(this.isFile),\n          moduleDirectory: this.getModuleDirectories(),\n        },\n        (err, foundPath) => {\n          endMeasure(measureKey, { silent: true });\n          if (err) {\n            if (\n              this.cachedPaths[dirredPath] &&\n              this.cachedPaths[dirredPath][path]\n            ) {\n              delete this.cachedPaths[dirredPath][path];\n            }\n\n            let connectedPath = shimmedPath;\n            if (connectedPath.indexOf('/node_modules') !== 0) {\n              connectedPath = /^(\\w|@\\w|@-)/.test(shimmedPath)\n                ? pathUtils.join('/node_modules', shimmedPath)\n                : pathUtils.join(pathUtils.dirname(currentPath), shimmedPath);\n            }\n\n            const isDependency = connectedPath.includes('/node_modules/');\n\n            connectedPath = connectedPath.replace('/node_modules/', '');\n\n            if (!isDependency) {\n              promiseReject(\n                new ModuleNotFoundError(shimmedPath, false, currentPath)\n              );\n            }\n\n            const dependencyName = getDependencyName(connectedPath);\n\n            if (\n              this.manifest.dependencies.find(d => d.name === dependencyName) ||\n              this.manifest.dependencyDependencies[dependencyName] ||\n              this.manifest.contents[\n                `/node_modules/${dependencyName}/package.json`\n              ]\n            ) {\n              promiseReject(\n                new ModuleNotFoundError(connectedPath, true, currentPath)\n              );\n            } else {\n              promiseReject(\n                new DependencyNotFoundError(connectedPath, currentPath)\n              );\n            }\n\n            return;\n          }\n\n          this.cachedPaths[dirredPath][path] = foundPath;\n\n          if (foundPath === '//empty.js') {\n            promiseResolve(getShimmedModuleFromPath(currentPath, path));\n            return;\n          }\n\n          if (!this.transpiledModules[foundPath]) {\n            this.readFileSync(foundPath, (error, code) => {\n              if (error) {\n                promiseReject(error);\n                return;\n              }\n\n              this.addModule({ path: foundPath, code });\n              promiseResolve(this.transpiledModules[foundPath].module);\n            });\n          } else {\n            promiseResolve(this.transpiledModules[foundPath].module);\n          }\n        }\n      );\n    });\n  }\n\n  // ALWAYS KEEP THIS METHOD IN SYNC WITH ASYNC VERSION\n  resolveModule(\n    path: string,\n    currentPath: string,\n    defaultExtensions: Array<string> = ['js', 'jsx', 'json', 'mjs']\n  ): Module {\n    const dirredPath = pathUtils.dirname(currentPath);\n    if (this.cachedPaths[dirredPath] === undefined) {\n      this.cachedPaths[dirredPath] = {};\n    }\n\n    const cachedPath = this.cachedPaths[dirredPath][path];\n\n    let resolvedPath;\n\n    if (cachedPath && this.transpiledModules[cachedPath]) {\n      resolvedPath = cachedPath;\n    } else {\n      const measureKey = `resolve-sync:${path}:${currentPath}`;\n      measure(measureKey);\n      const presetAliasedPath = this.getPresetAliasedPath(path);\n\n      const aliasedPath = this.getAliasedDependencyPath(\n        presetAliasedPath,\n        currentPath\n      );\n      const shimmedPath = coreLibraries[aliasedPath] || aliasedPath;\n\n      if (NODE_LIBS.indexOf(shimmedPath) > -1) {\n        this.cachedPaths[dirredPath][path] = shimmedPath;\n        return getShimmedModuleFromPath(currentPath, path);\n      }\n\n      try {\n        resolvedPath = resolve.sync(shimmedPath, {\n          filename: currentPath,\n          extensions: defaultExtensions.map(ext => '.' + ext),\n          isFile: this.isFile,\n          readFileSync: this.readFileSync,\n          packageFilter: packageFilter(this.isFile),\n          moduleDirectory: this.getModuleDirectories(),\n        });\n        endMeasure(measureKey, { silent: true });\n\n        this.cachedPaths[dirredPath][path] = resolvedPath;\n\n        if (resolvedPath === '//empty.js') {\n          return getShimmedModuleFromPath(currentPath, path);\n        }\n\n        if (!this.transpiledModules[resolvedPath]) {\n          throw new Error(`Could not find '${resolvedPath}' in local files.`);\n        }\n      } catch (e) {\n        // MAKE SURE TO SYNC THIS WITH ASYNC VERSION\n        if (\n          this.cachedPaths[dirredPath] &&\n          this.cachedPaths[dirredPath][path]\n        ) {\n          delete this.cachedPaths[dirredPath][path];\n        }\n\n        let connectedPath = shimmedPath;\n        if (connectedPath.indexOf('/node_modules') !== 0) {\n          connectedPath = /^(\\w|@\\w|@-)/.test(shimmedPath)\n            ? pathUtils.join('/node_modules', shimmedPath)\n            : pathUtils.join(pathUtils.dirname(currentPath), shimmedPath);\n        }\n\n        const isDependency = connectedPath.includes('/node_modules/');\n\n        connectedPath = connectedPath.replace('/node_modules/', '');\n\n        if (!isDependency) {\n          throw new ModuleNotFoundError(shimmedPath, false, currentPath);\n        }\n\n        const dependencyName = getDependencyName(connectedPath);\n\n        // TODO: fix the stack hack\n        if (\n          this.manifest.dependencies.find(d => d.name === dependencyName) ||\n          this.manifest.dependencyDependencies[dependencyName] ||\n          this.manifest.contents[`/node_modules/${dependencyName}/package.json`]\n        ) {\n          throw new ModuleNotFoundError(connectedPath, true, currentPath);\n        } else {\n          throw new DependencyNotFoundError(connectedPath, currentPath);\n        }\n      }\n    }\n\n    if (resolvedPath === '//empty.js') {\n      return getShimmedModuleFromPath(currentPath, path);\n    }\n\n    return this.transpiledModules[resolvedPath].module;\n  }\n\n  downloadDependency(\n    path: string,\n    currentTModule: TranspiledModule,\n    query: string = '',\n    ignoredExtensions: Array<string> = this.preset.ignoredExtensions\n  ): Promise<TranspiledModule> {\n    return fetchModule(\n      path,\n      currentTModule,\n      this,\n      ignoredExtensions\n    ).then(module => this.getTranspiledModule(module, query));\n  }\n\n  updateModule(m: Module) {\n    this.transpiledModules[m.path].module = m;\n    return this.getTranspiledModulesByModule(m).map(tModule => {\n      tModule.update(m);\n\n      return tModule;\n    });\n  }\n\n  resolveTranspiledModuleAsync = async (\n    path: string,\n    currentTModule?: TranspiledModule,\n    ignoredExtensions?: string[]\n  ): Promise<TranspiledModule> => {\n    const tModule =\n      currentTModule || this.getTranspiledModule(this.modules['/package.json']); // Get arbitrary file from root\n    try {\n      return this.resolveTranspiledModule(\n        path,\n        tModule.module.path,\n        ignoredExtensions\n      );\n    } catch (e) {\n      if (e.type === 'module-not-found' && e.isDependency) {\n        const { queryPath } = splitQueryFromPath(path);\n        return this.downloadDependency(\n          e.path,\n          tModule,\n          queryPath,\n          ignoredExtensions\n        );\n      }\n\n      throw e;\n    }\n  };\n\n  setHmrStatus = (status: HMRStatus) => {\n    this.hmrStatusChangeListeners.forEach(v => {\n      v(status);\n    });\n    this.hmrStatus = status;\n  };\n\n  addStatusHandler = (cb: (status: HMRStatus) => void) => {\n    this.hmrStatusChangeListeners.add(cb);\n  };\n\n  removeStatusHandler = (cb: (status: HMRStatus) => void) => {\n    this.hmrStatusChangeListeners.delete(cb);\n  };\n\n  /**\n   * Resolve the transpiled module from the path, note that the path can actually\n   * include loaders. That's why we're focussing on first extracting this query\n   * @param {*} path\n   * @param {*} currentPath\n   */\n  resolveTranspiledModule(\n    path: string,\n    currentPath: string,\n    ignoredExtensions: string[],\n    async: true\n  ): Promise<TranspiledModule>;\n\n  resolveTranspiledModule(\n    path: string,\n    currentPath: string,\n    ignoredExtensions?: string[],\n    async?: false\n  ): TranspiledModule;\n\n  resolveTranspiledModule(\n    path: string,\n    currentPath: string,\n    ignoredExtensions?: string[],\n    async?: boolean\n  ): Promise<TranspiledModule> | TranspiledModule {\n    if (path.startsWith('webpack:')) {\n      throw new Error('Cannot resolve webpack path');\n    }\n\n    const { queryPath, modulePath } = splitQueryFromPath(path);\n\n    if (async) {\n      return this.resolveModuleAsync(\n        modulePath,\n        currentPath,\n        ignoredExtensions || this.preset.ignoredExtensions\n      ).then(module => this.getTranspiledModule(module, queryPath));\n    }\n\n    const module = this.resolveModule(\n      modulePath,\n      currentPath,\n      ignoredExtensions || this.preset.ignoredExtensions\n    );\n\n    return this.getTranspiledModule(module, queryPath);\n  }\n\n  resolveTranspiledModulesInDirectory(\n    path: string,\n    currentPath: string\n  ): Array<TranspiledModule> {\n    const { queryPath, modulePath } = splitQueryFromPath(path);\n\n    const joinedPath = pathUtils.join(\n      pathUtils.dirname(currentPath),\n      modulePath\n    );\n\n    return Object.keys(this.transpiledModules)\n      .filter(p => p.startsWith(joinedPath))\n      .map(m =>\n        this.getTranspiledModule(this.transpiledModules[m].module, queryPath)\n      );\n  }\n\n  updateConfigurations(configurations: ParsedConfigurationFiles) {\n    const configsUpdated = this.configurations\n      ? JSON.stringify(configurations) !== JSON.stringify(this.configurations)\n      : false;\n\n    if (configsUpdated) {\n      this.resetAllModules();\n    }\n\n    this.configurations = configurations;\n  }\n\n  /**\n   * Find all changed, added and deleted modules. Update trees and\n   * delete caches accordingly\n   */\n  async updateData(modules: {\n    [path: string]: Module;\n  }): Promise<Array<TranspiledModule>> {\n    this.transpileJobs = {};\n    this.hardReload = false;\n\n    this.modules = modules;\n\n    const addedModules: Array<Module> = [];\n    const updatedModules: Array<Module> = [];\n\n    Object.keys(modules).forEach(k => {\n      const module: Module = modules[k];\n      const mirrorModule = this.transpiledModules[k];\n\n      if (!mirrorModule) {\n        // File structure changed, reset cached paths\n        this.cachedPaths = {};\n        addedModules.push(module);\n      } else if (mirrorModule.module.code !== module.code) {\n        // File structure changed, reset cached paths\n        this.cachedPaths = {};\n        updatedModules.push(module);\n      }\n    });\n\n    this.getModules().forEach(m => {\n      if (\n        !m.path.startsWith('/node_modules') &&\n        m.path !== '/var/task/node_modules/browser-resolve/empty.js' &&\n        !modules[m.path] &&\n        !(m as ChildModule).parent // not an emitted module\n      ) {\n        this.removeModule(m);\n      }\n    });\n\n    addedModules.forEach(m => {\n      this.addTranspiledModule(m);\n    });\n\n    const modulesToUpdate: Array<Module> = uniq([\n      ...addedModules,\n      ...updatedModules,\n    ]);\n\n    // We eagerly transpile changed files,\n    // this way we don't have to traverse the whole\n    // dependency graph each time a file changes\n    const tModulesToUpdate = modulesToUpdate.map(m => this.updateModule(m));\n\n    if (tModulesToUpdate.length > 0 && this.configurations.sandbox) {\n      this.hardReload = this.configurations.sandbox.parsed.hardReloadOnChange;\n    }\n\n    const modulesWithErrors = this.getTranspiledModules().filter(t => {\n      if (t.hasMissingDependencies) {\n        t.resetTranspilation();\n      }\n      return t.errors.length > 0 || t.hasMissingDependencies;\n    });\n    const flattenedTModulesToUpdate = (flattenDeep([\n      tModulesToUpdate,\n      modulesWithErrors,\n    ]) as unknown) as TranspiledModule[];\n\n    const allModulesToUpdate = uniq(flattenedTModulesToUpdate);\n    const transpiledModulesToUpdate = allModulesToUpdate.filter(\n      m => !m.isTestFile\n    );\n\n    // Reset test files, but don't transpile. We want to do that in the test runner\n    // so we can catch any errors\n    allModulesToUpdate\n      .filter(m => m.isTestFile)\n      .forEach(m => {\n        m.resetTranspilation();\n      });\n\n    debug(\n      `Generated update diff, updating ${transpiledModulesToUpdate.length} modules.`,\n      transpiledModulesToUpdate\n    );\n\n    const transpilationResults = await Promise.all(\n      transpiledModulesToUpdate\n        .map(tModule => {\n          if (tModule.shouldTranspile()) {\n            return tModule.transpile(this);\n          }\n\n          return Promise.resolve(false);\n        })\n        .filter(Boolean) as Array<Promise<TranspiledModule>>\n    );\n\n    return transpilationResults;\n  }\n\n  /**\n   * Mark that the next evaluation should first have a location.reload() before\n   * continuing\n   */\n  markHardReload() {\n    this.setHmrStatus('fail');\n    this.hardReload = true;\n  }\n\n  async serialize(\n    {\n      entryPath,\n      optimizeForSize,\n    }: { entryPath?: string; optimizeForSize: boolean } = {\n      optimizeForSize: true,\n    }\n  ) {\n    const serializedTModules: { [id: string]: SerializedTranspiledModule } = {};\n\n    await Promise.all(\n      Object.keys(this.transpiledModules).map(path =>\n        Promise.all(\n          Object.keys(this.transpiledModules[path].tModules).map(\n            async query => {\n              const tModule = this.transpiledModules[path].tModules[query];\n\n              if (\n                !this.manifest.contents[tModule.module.path] ||\n                tModule.module.downloaded\n              ) {\n                // Only save modules that are not precomputed\n                serializedTModules[tModule.getId()] = await tModule.serialize(\n                  optimizeForSize\n                );\n              }\n            }\n          )\n        )\n      )\n    );\n\n    const dependenciesQuery = this.getDependencyQuery();\n\n    const meta = {};\n    Object.keys(combinedMetas || {}).forEach(p => {\n      const dir = pathUtils.dirname(p.replace('/node_modules', ''));\n      meta[dir] = meta[dir] || [];\n      meta[dir].push(pathUtils.basename(p));\n    });\n\n    return {\n      transpiledModules: serializedTModules,\n      cachedPaths: this.cachedPaths,\n      version: SCRIPT_VERSION,\n      timestamp: new Date().getTime(),\n      configurations: this.configurations,\n      entry: entryPath,\n      meta,\n      dependenciesQuery,\n    };\n  }\n\n  getDependencyQuery() {\n    if (!this.manifest || !this.manifest.dependencies) {\n      return '';\n    }\n\n    const normalizedDependencies = {};\n\n    this.manifest.dependencies.forEach(dep => {\n      normalizedDependencies[dep.name] = dep.version;\n    });\n\n    return dependenciesToQuery(normalizedDependencies);\n  }\n\n  async load(data: any) {\n    try {\n      if (data) {\n        this.clearCache();\n        const {\n          transpiledModules: serializedTModules,\n          cachedPaths,\n          version,\n          configurations,\n          dependenciesQuery,\n          meta,\n        }: {\n          transpiledModules: { [id: string]: SerializedTranspiledModule };\n          cachedPaths: { [path: string]: { [path: string]: string } };\n          version: string;\n          timestamp: number;\n          configurations: any;\n          dependenciesQuery: string;\n          meta: any;\n        } = data;\n\n        // Only use the cache if the cached version was cached with the same\n        // version of the compiler and dependencies haven't changed\n        if (\n          version === SCRIPT_VERSION &&\n          dependenciesQuery === this.getDependencyQuery()\n        ) {\n          const newCombinedMetas = {};\n          Object.keys(meta).forEach(dir => {\n            meta[dir].forEach(file => {\n              newCombinedMetas[`/node_modules` + dir + '/' + file] = true;\n            });\n          });\n          setCombinedMetas(newCombinedMetas);\n\n          this.cachedPaths = cachedPaths;\n          this.configurations = configurations;\n\n          const tModules: { [id: string]: TranspiledModule } = {};\n          // First create tModules for all the saved modules, so we have references\n          Object.keys(serializedTModules).forEach(id => {\n            const sTModule = serializedTModules[id];\n\n            const tModule = this.addTranspiledModule(\n              sTModule.module,\n              sTModule.query\n            );\n            tModules[id] = tModule;\n          });\n\n          Object.keys(tModules).forEach(id => {\n            const tModule = tModules[id];\n\n            tModule.load(serializedTModules[id], tModules, this);\n          });\n          debug(`Loaded cache.`);\n        }\n      }\n    } catch (e) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('Problems parsing cache');\n        console.warn(e);\n      }\n    }\n    this.clearCache();\n  }\n\n  dispose() {\n    if (this.preset) {\n      this.preset.transpilers.forEach(t => {\n        if (t.dispose) {\n          t.dispose();\n        }\n      });\n\n      if (this.fileResolver) {\n        this.fileResolver.protocol.dispose();\n      }\n    }\n  }\n\n  deleteAPICache() {\n    ignoreNextCache();\n    return deleteAPICache(this.id);\n  }\n\n  async clearCache() {\n    try {\n      await clearIndexedDBCache();\n    } catch (ex) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error(ex);\n      }\n    }\n  }\n\n  /**\n   * Get information about all transpilers currently registered for this manager\n   */\n  async getTranspilerContext() {\n    const info = {};\n\n    const data = await Promise.all(\n      Array.from(this.preset.transpilers).map(t =>\n        t\n          .getTranspilerContext(this)\n          .then(context => ({ name: t.name, data: context }))\n      )\n    );\n\n    data.forEach(t => {\n      info[t.name] = t.data;\n    });\n\n    return info;\n  }\n}\n","function getExternalResourcesConcatenation(resources: Array<string>) {\n  return resources.join('');\n}\n/* eslint-disable no-cond-assign */\nfunction clearExternalResources() {\n  let el = null;\n  // eslint-disable-next-line no-cond-assign\n  while ((el = document.getElementById('external-css'))) {\n    el.remove();\n  }\n\n  // eslint-disable-next-line no-cond-assign\n  while ((el = document.getElementById('external-js'))) {\n    el.remove();\n  }\n}\n/* eslint-enable */\n\nfunction addCSS(resource: string) {\n  const head = document.getElementsByTagName('head')[0];\n  const link = document.createElement('link');\n  link.id = 'external-css';\n  link.rel = 'stylesheet';\n  link.type = 'text/css';\n  link.href = resource;\n  link.media = 'all';\n  head.appendChild(link);\n\n  return link;\n}\n\nfunction addJS(resource: string) {\n  const script = document.createElement('script');\n  script.setAttribute('src', resource);\n  script.async = false;\n  script.setAttribute('id', 'external-js');\n  document.head.appendChild(script);\n\n  return script;\n}\n\nfunction addResource(resource: string) {\n  const match = resource.match(/\\.([^.]*)$/);\n\n  const el =\n    (match && match[1] === 'css') || resource.includes('fonts.googleapis')\n      ? addCSS(resource)\n      : addJS(resource);\n\n  return new Promise(r => {\n    el.onload = r;\n    el.onerror = r;\n  });\n}\n\nfunction waitForLoaded() {\n  return new Promise(resolve => {\n    if (document.readyState !== 'complete') {\n      window.addEventListener('load', resolve);\n    } else {\n      resolve();\n    }\n  });\n}\n\nlet cachedExternalResources = '';\n\nexport default async function handleExternalResources(externalResources) {\n  const extResString = getExternalResourcesConcatenation(externalResources);\n  if (extResString !== cachedExternalResources) {\n    clearExternalResources();\n    await Promise.all(externalResources.map(addResource));\n    cachedExternalResources = extResString;\n\n    return waitForLoaded();\n  }\n\n  return Promise.resolve();\n}\n","let iframeReference: HTMLIFrameElement = null;\nlet iframeRenderedAt = 0;\n\nexport function resetOverlay() {\n  try {\n    // We add a delay to unmounting the iframe if the iframe has only just\n    // appeared. We want to do this, because we want to prevent a flicker for\n    // the user, which is a bad perceivement.\n    const delay = Date.now() - iframeRenderedAt > 1000 ? 0 : 1000;\n\n    setTimeout(() => {\n      if (iframeReference) {\n        iframeReference.style.opacity = '0';\n        setTimeout(() => {\n          if (iframeReference.parentNode) {\n            document.body.removeChild(iframeReference);\n          }\n        }, 500);\n      }\n    }, delay);\n  } catch (e) {\n    /* nothing */\n  }\n}\n\nconst setIframeStyle = (iframe: HTMLIFrameElement, showFullScreen: boolean) => {\n  iframe.setAttribute(\n    'style',\n    showFullScreen\n      ? `position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 214748366;opacity: 1;transition: opacity 0.15s ease-in;`\n      : `position: fixed; top: 10px; left: 10px; height: 45px; width: 45px; border-radius: 2px; border: none; z-index: 214748366; opacity: 0;transition: opacity 0.15s ease-in;`\n  );\n};\n\nfunction createIframe(showFullScreen: boolean): Promise<HTMLIFrameElement> {\n  return new Promise(resolve => {\n    iframeRenderedAt = Date.now();\n    if (iframeReference) {\n      document.body.appendChild(iframeReference);\n      requestAnimationFrame(() => {\n        iframeReference.style.opacity = '1';\n      });\n      setIframeStyle(iframeReference, showFullScreen);\n      resolve(iframeReference);\n      return;\n    }\n\n    const iframe = document.createElement('iframe');\n    setIframeStyle(iframe, showFullScreen);\n\n    iframe.setAttribute('id', 'frame');\n\n    iframeReference = iframe;\n\n    document.body.appendChild(iframe);\n\n    requestAnimationFrame(() => {\n      iframe.style.opacity = '1';\n    });\n\n    if (iframe.contentDocument) {\n      resolve(iframe);\n    } else if (document.getElementById('frame')) {\n      document.getElementById('frame').onload = () => {\n        resolve(iframe);\n      };\n    } else {\n      resolve(iframe);\n    }\n  });\n}\n\nexport async function createOverlay(html: string, showFullScreen: boolean) {\n  const iframe: HTMLIFrameElement = await createIframe(showFullScreen);\n\n  const isMounted = !!document.getElementById('frame');\n  if (!isMounted) {\n    document.body.appendChild(iframe);\n  }\n\n  iframe.contentDocument.body.innerHTML = html;\n\n  return iframe;\n}\n","// @ts-ignore\nimport indicatorHtml from '!raw-loader!./indicator-screen.html';\n// This is the loading screen\n// @ts-ignore\nimport loadingHtml from '!raw-loader!./loading-screen.html';\n\nimport { createOverlay, resetOverlay } from './overlay-manager';\n\ntype LoadingScreen = {\n  type: 'loading';\n  text: string;\n  showFullScreen?: boolean;\n};\n\ntype Screen = LoadingScreen;\n\nlet currentScreen: Screen = null;\nlet loadTimeoutID: number = null;\nlet iframeReference = null;\n\nfunction changeText(text: string) {\n  if (iframeReference) {\n    if (\n      iframeReference.contentDocument &&\n      iframeReference.contentDocument.getElementsByClassName('text') &&\n      iframeReference.contentDocument.getElementsByClassName('text').item(0)\n    ) {\n      iframeReference.contentDocument\n        .getElementsByClassName('text')\n        .item(0).textContent = text;\n    }\n  }\n}\n\nexport function resetScreen() {\n  currentScreen = null;\n  iframeReference = null;\n  resetOverlay();\n\n  clearTimeout(loadTimeoutID);\n  loadTimeoutID = null;\n}\n\nexport default function setScreen(screen: Screen) {\n  const showFullScreen =\n    typeof screen.showFullScreen === 'undefined' ? true : screen.showFullScreen;\n\n  if (!iframeReference) {\n    if (!loadTimeoutID) {\n      // Give the illusion of faster loading by showing the loader screen later\n      loadTimeoutID = window.setTimeout(\n        async () => {\n          if (!iframeReference && currentScreen) {\n            iframeReference = await createOverlay(\n              showFullScreen ? loadingHtml : indicatorHtml,\n              showFullScreen\n            );\n          }\n\n          if (currentScreen) {\n            changeText(currentScreen.text);\n          }\n\n          loadTimeoutID = null;\n        },\n        showFullScreen ? 1000 : 0\n      );\n    }\n  } else if (currentScreen) {\n    changeText(currentScreen.text);\n  }\n\n  currentScreen = screen;\n}\n","import { uniq } from 'lodash-es';\nimport * as semver from 'semver';\n\nexport interface ILambdaResponse {\n  contents: {\n    [path: string]: { content: string };\n  };\n  dependency: {\n    name: string;\n    version: string;\n  };\n  peerDependencies: {\n    [dep: string]: string;\n  };\n  dependencyDependencies: {\n    [dep: string]: {\n      semver: string;\n      resolved: string;\n      parents: string[];\n      entries: string[];\n    };\n  };\n  dependencyAliases: {\n    [dep: string]: {\n      [dep: string]: string;\n    };\n  };\n}\n\ninterface IDepDepInfo {\n  semver: string;\n  resolved: string;\n  parents: string[];\n  entries: string[];\n}\n\ninterface IResponse {\n  contents: { [path: string]: { content: string } };\n  dependencies: Array<{ name: string; version: string }>;\n  dependencyAliases: { [dep: string]: { [dep: string]: string } };\n  dependencyDependencies: {\n    [dep: string]: IDepDepInfo;\n  };\n}\n\n/**\n * Compare two sorted string arrays\n *\n * @param {string[]} s1\n * @param {string[]} s2\n * @returns\n */\nfunction isEqual(s1: string[], s2: string[]) {\n  if (s1.length !== s2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < s1.length; i++) {\n    if (s1[i] !== s2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Replaces the start of a key with a new string\n *\n * @param {{ [key: string]: string }} paths\n * @param {string} oldName\n * @param {string} newName\n */\nfunction replacePaths(\n  paths: { [key: string]: any },\n  oldName: string,\n  newName: string\n) {\n  Object.keys(paths).forEach(al => {\n    if (al.startsWith(`${oldName}/`) || al === oldName) {\n      paths[al.replace(oldName, newName)] =\n        typeof paths[al] === 'string'\n          ? paths[al].replace(oldName, newName)\n          : paths[al];\n\n      delete paths[al];\n    }\n  });\n}\n\nfunction replaceDependencyInfo(\n  r: ILambdaResponse,\n  depDepName: string,\n  newDepDep: IDepDepInfo\n) {\n  if (process.env.NODE_ENV === 'development') {\n    // eslint-disable-next-line\n    console.log(\n      'Resolving conflict for ' +\n        depDepName +\n        ' new version: ' +\n        newDepDep.resolved\n    );\n  }\n\n  const newPath = `${depDepName}/${newDepDep.resolved}`;\n\n  replacePaths(\n    r.contents,\n    `/node_modules/${depDepName}`,\n    `/node_modules/${newPath}`\n  );\n\n  r.dependencyDependencies[newPath] = r.dependencyDependencies[depDepName];\n  delete r.dependencyDependencies[depDepName];\n\n  // eslint-disable-next-line\n  for (const n of Object.keys(r.dependencyDependencies)) {\n    r.dependencyDependencies[n].parents = r.dependencyDependencies[\n      n\n    ].parents.map(p => (p === depDepName ? newPath : p));\n  }\n\n  r.dependencyAliases = r.dependencyAliases || {};\n  newDepDep.parents.forEach(p => {\n    r.dependencyAliases[p] = r.dependencyAliases[p] || {};\n    r.dependencyAliases[p][depDepName] = newPath;\n  });\n  replacePaths(r.dependencyAliases, depDepName, newPath);\n}\n\nconst intersects = (v1: string, v2: string) => {\n  try {\n    return semver.intersects(v1, v2);\n  } catch (e) {\n    return false;\n  }\n};\n\nexport function mergeDependencies(responses: ILambdaResponse[]) {\n  // For consistency between requests\n  const sortedResponses = responses.sort((a, b) =>\n    a.dependency.name.localeCompare(b.dependency.name)\n  );\n\n  const response: IResponse = {\n    contents: {},\n    dependencies: sortedResponses.map(r => r.dependency),\n    dependencyAliases: {},\n    dependencyDependencies: {},\n  };\n\n  // eslint-disable-next-line\n  for (const r of sortedResponses) {\n    for (let i = 0; i < Object.keys(r.dependencyDependencies).length; i++) {\n      const depDepName = Object.keys(r.dependencyDependencies)[i];\n\n      const newDepDep = r.dependencyDependencies[depDepName];\n      const rootDependency = response.dependencies.find(\n        d => d.name === depDepName\n      );\n\n      if (\n        rootDependency &&\n        !intersects(rootDependency.version, newDepDep.semver) &&\n        // If the resolved or semver is the same we don't have to actually replace dependency info\n        rootDependency.version !== newDepDep.resolved &&\n        rootDependency.version !== newDepDep.semver &&\n        rootDependency.name !== r.dependency.name // and this dependency doesn't require an older version of itself\n      ) {\n        // If a root dependency is in conflict with a child dependency, we always\n        // go for the root dependency\n        replaceDependencyInfo(r, depDepName, newDepDep);\n\n        // Start from the beginning, to make sure everything is correct\n        i = -1;\n      } else if (response.dependencyDependencies[depDepName]) {\n        const exDepDep = response.dependencyDependencies[depDepName];\n\n        if (exDepDep.resolved === newDepDep.resolved) {\n          exDepDep.parents = uniq([...exDepDep.parents, ...newDepDep.parents]);\n          exDepDep.entries = uniq([...exDepDep.entries, ...newDepDep.entries]);\n        } else if (\n          intersects(exDepDep.semver, newDepDep.semver) &&\n          isEqual(exDepDep.entries, newDepDep.entries)\n        ) {\n          const replacingDepDep = semver.gt(\n            newDepDep.resolved,\n            exDepDep.resolved\n          )\n            ? newDepDep\n            : exDepDep;\n\n          response.dependencyDependencies[depDepName] = replacingDepDep;\n          response.dependencyDependencies[depDepName].parents = uniq([\n            ...exDepDep.parents,\n            ...newDepDep.parents,\n          ]);\n        } else {\n          replaceDependencyInfo(r, depDepName, newDepDep);\n          // Start from the beginning, to make sure everything is correct\n          i = -1;\n        }\n      } else {\n        response.dependencyDependencies[depDepName] =\n          r.dependencyDependencies[depDepName];\n      }\n    }\n\n    response.dependencyAliases = {\n      ...response.dependencyAliases,\n      ...r.dependencyAliases,\n    };\n    response.contents = { ...response.contents, ...r.contents };\n  }\n\n  return response;\n}\n","/**\n * Parse input strings like `package-1/package-2` to an array of packages\n */\nfunction parsePackagePath(input: string) {\n  return input.match(/(@[^/]+\\/)?([^/]+)/g) || [];\n}\n\nconst WRONG_PATTERNS = /\\/$|\\/{2,}|\\*+$/;\nconst GLOBAL_NESTED_DEP_PATTERN = '**/';\n\nfunction isValidPackagePath(input: string) {\n  return !WRONG_PATTERNS.test(input);\n}\n\nexport interface IParsedResolution {\n  name: string;\n  range: string;\n  globPattern: string;\n  pattern: string;\n}\n\nexport function parsePatternInfo(\n  globPattern: string,\n  range: string\n): IParsedResolution {\n  if (!isValidPackagePath(globPattern)) {\n    console.warn('invalidResolutionName');\n    return null;\n  }\n\n  const directories = parsePackagePath(globPattern);\n  const name = directories.pop();\n\n  // For legacy support of resolutions, replace `name` with `**/name`\n  if (name === globPattern) {\n    // eslint-disable-next-line\n    globPattern = `${GLOBAL_NESTED_DEP_PATTERN}${name}`;\n  }\n\n  return {\n    name,\n    range,\n    globPattern,\n    pattern: `${name}@${range}`,\n  };\n}\n\nexport function parseResolutions(resolutions?: {\n  [name: string]: string;\n}): IParsedResolution[] {\n  if (!resolutions) {\n    return [];\n  }\n\n  const keys = Object.keys(resolutions);\n  return keys.map(key => parsePatternInfo(key, resolutions[key]));\n}\n","import minimatch from 'minimatch';\nimport * as semver from 'semver';\n\nimport { ILambdaResponse } from './merge-dependency';\nimport { downloadDependency } from '../eval/npm/fetch-npm-module';\nimport { IParsedResolution } from './resolutions';\n\nasync function getPackageJSON(dep: string, version: string) {\n  const m = await downloadDependency(dep, version, '/package.json');\n  return m.code;\n}\n\nasync function getLatestVersionForSemver(dep: string, version: string) {\n  const p = await getPackageJSON(dep, version);\n  return JSON.parse(p).version;\n}\n\ninterface IPeerDependencyResult {\n  [dep: string]: {\n    semver: string;\n    resolved: string;\n    parents: string[];\n    entries: string[];\n  };\n}\n\nfunction getAbsoluteVersion(\n  originalDep: string,\n  depName: string,\n  depVersion: string,\n  parsedResolutions: { [name: string]: IParsedResolution[] }\n) {\n  // Try getting it from the resolutions field first, if that doesn't work\n  // we try to get the latest version from the semver.\n  const applicableResolutions = parsedResolutions[depName];\n  if (applicableResolutions) {\n    const modulePath = [originalDep, depName].join('/');\n\n    const { range } =\n      applicableResolutions.find(({ globPattern }) =>\n        minimatch(modulePath, globPattern)\n      ) || {};\n\n    if (range) {\n      if (semver.valid(range)) {\n        return getLatestVersionForSemver(depName, range);\n      }\n\n      return range;\n    }\n  }\n\n  return getLatestVersionForSemver(depName, depVersion);\n}\n\nasync function getDependencyDependencies(\n  dep: string,\n  version: string,\n  parsedResolutions: { [name: string]: IParsedResolution[] },\n  peerDependencyResult: IPeerDependencyResult = {}\n): Promise<IPeerDependencyResult> {\n  const packageJSONCode = await getPackageJSON(dep, version);\n  const packageJSON = JSON.parse(packageJSONCode);\n\n  await Promise.all(\n    Object.keys(packageJSON.dependencies || {}).map(async (depName: string) => {\n      const depVersion = packageJSON.dependencies[depName];\n\n      if (peerDependencyResult[depName]) {\n        peerDependencyResult[depName].parents.push(dep);\n        return;\n      }\n\n      const absoluteVersion = await getAbsoluteVersion(\n        dep,\n        depName,\n        depVersion,\n        parsedResolutions\n      );\n\n      // eslint-disable-next-line\n      peerDependencyResult[depName] = {\n        semver: depVersion,\n        resolved: absoluteVersion,\n        parents: [dep],\n        entries: [],\n      };\n\n      await getDependencyDependencies(\n        depName,\n        depVersion,\n        parsedResolutions,\n        peerDependencyResult\n      );\n    })\n  );\n\n  return peerDependencyResult;\n}\n\nexport async function resolveDependencyInfo(\n  dep: string,\n  version: string,\n  parsedResolutions: IParsedResolution[]\n) {\n  const packageJSONCode = await getPackageJSON(dep, version);\n  const packageJSON = JSON.parse(packageJSONCode);\n  const response: ILambdaResponse = {\n    contents: {},\n    dependency: {\n      name: dep,\n      version,\n    },\n    peerDependencies: {},\n    dependencyDependencies: {},\n    dependencyAliases: {},\n  };\n\n  const resolutionsByPackage = {};\n  parsedResolutions.forEach(res => {\n    resolutionsByPackage[res.name] = resolutionsByPackage[res.name] || [];\n    resolutionsByPackage[res.name].push(res);\n  });\n\n  response.peerDependencies = packageJSON.peerDependencies || {};\n  response.dependencyDependencies = await getDependencyDependencies(\n    dep,\n    version,\n    resolutionsByPackage\n  );\n\n  response.contents = {\n    [`/node_modules/${dep}/package.json`]: {\n      content: packageJSONCode,\n    },\n  };\n\n  return response;\n}\n","import { mergeDependencies } from './merge-dependency';\nimport { parseResolutions } from './resolutions';\nimport { resolveDependencyInfo } from './resolve-dependency';\n\nexport async function getDependencyVersions(\n  dependencies: {\n    [depName: string]: string;\n  },\n  resolutions: { [startGlob: string]: string },\n  _: boolean\n) {\n  const parsedResolutions = parseResolutions(resolutions);\n\n  const depsWithNodeLibs = { 'node-libs-browser': '2.2.0', ...dependencies };\n  const depInfos = await Promise.all(\n    Object.keys(depsWithNodeLibs).map(depName =>\n      resolveDependencyInfo(\n        depName,\n        depsWithNodeLibs[depName],\n        parsedResolutions\n      )\n    )\n  );\n\n  return mergeDependencies(depInfos);\n}\n","import _debug from '@codesandbox/common/lib/utils/debug';\nimport { getAbsoluteDependencies } from '@codesandbox/common/lib/utils/dependencies';\nimport { actions, dispatch } from 'codesandbox-api';\nimport { mergeDependencies } from 'sandbox/version-resolving/merge-dependency';\n\nimport setScreen from '../status-screen';\nimport delay from '../utils/delay';\nimport dependenciesToQuery from './dependencies-to-query';\n\ntype Dependencies = {\n  [dependency: string]: string;\n};\n\nconst RETRY_COUNT = 60;\nconst debug = _debug('cs:sandbox:packager');\n\nconst VERSION = 2;\n\n// eslint-disable-next-line\nconst DEV_URLS = {\n  packager:\n    'https://xi5p9f7czk.execute-api.eu-west-1.amazonaws.com/dev/packages',\n  bucket: 'https://dev-packager-packages.codesandbox.io',\n};\n// eslint-disable-next-line\nconst PROD_URLS = {\n  packager:\n    'https://aiwi8rnkp5.execute-api.eu-west-1.amazonaws.com/prod/packages',\n  bucket: 'https://prod-packager-packages.codesandbox.io',\n};\n\nconst URLS = PROD_URLS;\nconst BUCKET_URL = URLS.bucket;\nconst PACKAGER_URL = URLS.packager;\n\nfunction callApi(url: string, method = 'GET') {\n  return fetch(url, {\n    method,\n  })\n    .then(async response => {\n      if (!response.ok) {\n        const error = new Error(response.statusText || '' + response.status);\n\n        const message = await response.json();\n\n        // @ts-ignore\n        error.response = message;\n        // @ts-ignore\n        error.statusCode = response.status;\n        throw error;\n      }\n\n      return response;\n    })\n    .then(response => response.json());\n}\n\n/**\n * Request the packager, if retries > RETRY_COUNT it will throw if something goes wrong\n * otherwise it will retry again with an incremented retry\n *\n * @param {string} query The dependencies to call\n */\nasync function requestPackager(url: string, method = 'GET') {\n  let retries = 0;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    debug(`Trying to call packager for ${retries} time`);\n    try {\n      const manifest = await callApi(url, method); // eslint-disable-line no-await-in-loop\n\n      return manifest;\n    } catch (e) {\n      if (e.response && e.statusCode !== 504) {\n        throw new Error(e.response.error);\n      }\n      // 403 status code means the bundler is still bundling\n      if (retries < RETRY_COUNT) {\n        retries += 1;\n        await delay(1000 * 2); // eslint-disable-line no-await-in-loop\n      } else {\n        throw e;\n      }\n    }\n  }\n}\n\nfunction dependencyToPackagePath(name: string, version: string) {\n  return `v${VERSION}/packages/${name}/${version}.json`;\n}\n\n/**\n * Some dependencies have a space in their version for some reason, this is invalid and we\n * ignore them. This is what yarn does as well.\n */\nfunction removeSpacesFromDependencies(dependencies: Object) {\n  const newDeps = {};\n  Object.keys(dependencies).forEach(depName => {\n    const [version] = dependencies[depName].split(' ');\n    newDeps[depName] = version;\n  });\n  return newDeps;\n}\n\nasync function getDependencies(\n  dependencies: Object,\n  showLoadingFullScreen: boolean\n) {\n  setScreen({\n    type: 'loading',\n    text: 'Downloading Dependencies...',\n    showFullScreen: showLoadingFullScreen,\n  });\n\n  const absoluteDependencies = await getAbsoluteDependencies(\n    removeSpacesFromDependencies(dependencies)\n  );\n\n  const deps = await Promise.all(\n    Object.keys(absoluteDependencies).map(async name => {\n      const version = absoluteDependencies[name];\n      const dep = { [name]: version };\n\n      const dependencyUrl = dependenciesToQuery(dep);\n      const bucketDependencyUrl = dependencyToPackagePath(name, version);\n      const fullUrl = `${BUCKET_URL}/${bucketDependencyUrl}`;\n\n      try {\n        const bucketManifest = await callApi(fullUrl);\n        return bucketManifest;\n      } catch (e) {\n        setScreen({\n          type: 'loading',\n          text: 'Resolving Dependencies...',\n          showFullScreen: showLoadingFullScreen,\n        });\n\n        // The dep has not been generated yet...\n        await requestPackager(`${PACKAGER_URL}/${dependencyUrl}`, 'POST');\n\n        setScreen({\n          type: 'loading',\n          text: 'Downloading Dependencies...',\n          showFullScreen: showLoadingFullScreen,\n        });\n\n        return requestPackager(fullUrl);\n      }\n    })\n  );\n\n  return mergeDependencies(deps);\n}\n\nexport async function fetchDependencies(\n  npmDependencies: Dependencies,\n  _: any,\n  showLoaderFullScreen: boolean\n) {\n  if (Object.keys(npmDependencies).length !== 0) {\n    // New Packager flow\n\n    try {\n      const result = await getDependencies(\n        npmDependencies,\n        showLoaderFullScreen\n      );\n\n      if (showLoaderFullScreen) {\n        setScreen({\n          type: 'loading',\n          text: 'Transpiling Modules...',\n          showFullScreen: showLoaderFullScreen,\n        });\n      }\n\n      return result;\n    } catch (e) {\n      e.message = `Could not fetch dependencies, please try again in a couple seconds: ${e.message}`;\n      dispatch(actions.notifications.show(e.message, 'error'));\n\n      throw e;\n    }\n  }\n  return false;\n}\n","import { pickBy } from 'lodash-es';\n\nimport setScreen from '../status-screen';\nimport { getDependencyVersions } from '../version-resolving';\nimport dependenciesToQuery from './dependencies-to-query';\nimport { fetchDependencies } from './fetch-dependencies';\n\nlet loadedDependencyCombination: string | null = null;\nlet manifest = null;\n\nexport type NPMDependencies = {\n  [dependency: string]: string;\n};\n\n/**\n * If there is a URL to a file we need to fetch the dependencies dynamically, at least\n * for the first version. In the future we might want to consider a hybrid version where\n * we only fetch the dynamic files for dependencies with a url as version. But this is a good\n * start.\n */\nfunction shouldFetchDynamically(dependencies: NPMDependencies) {\n  return Object.keys(dependencies).some(depName =>\n    dependencies[depName].includes('http')\n  );\n}\n\n/**\n * This fetches the manifest and dependencies from the\n * @param {*} dependencies\n */\nexport async function loadDependencies(\n  dependencies: NPMDependencies,\n  {\n    disableExternalConnection = false,\n    resolutions = undefined,\n    showFullScreen = false,\n  } = {}\n) {\n  let isNewCombination = false;\n  if (Object.keys(dependencies).length !== 0) {\n    // We filter out all @types, as they are not of any worth to the bundler\n    const dependenciesWithoutTypings = pickBy(\n      dependencies,\n      (val, key) => !(key.includes && key.includes('@types'))\n    );\n\n    const depQuery = dependenciesToQuery(dependenciesWithoutTypings);\n\n    if (loadedDependencyCombination !== depQuery) {\n      isNewCombination = true;\n\n      const fetchDynamically =\n        disableExternalConnection ||\n        shouldFetchDynamically(dependenciesWithoutTypings);\n\n      const fetchFunction = fetchDynamically\n        ? getDependencyVersions\n        : fetchDependencies;\n\n      const data = await fetchFunction(\n        dependenciesWithoutTypings,\n        resolutions,\n        showFullScreen\n      );\n\n      // Mark that the last requested url is this\n      loadedDependencyCombination = depQuery;\n      manifest = data;\n\n      setScreen({\n        type: 'loading',\n        text: 'Transpiling Modules...',\n        showFullScreen,\n      });\n    }\n  } else {\n    manifest = null;\n  }\n\n  return { manifest, isNewCombination };\n}\n","import html from '!raw-loader!./run-on-click-screen.html';\nimport { createOverlay } from './overlay-manager';\n\nexport function showRunOnClick() {\n  // eslint-disable-next-line\n  return new Promise(async () => {\n    const iframe = await createOverlay(html);\n\n    iframe.contentDocument.body.addEventListener('click', () => {\n      document.location.reload();\n    });\n  });\n}\n","import parseConfigurations from '@codesandbox/common/lib/templates/configuration/parse';\nimport getDefinition, {\n  TemplateType,\n} from '@codesandbox/common/lib/templates/index';\nimport { ParsedConfigurationFiles } from '@codesandbox/common/lib/templates/template';\nimport _debug from '@codesandbox/common/lib/utils/debug';\nimport { isBabel7 } from '@codesandbox/common/lib/utils/is-babel-7';\nimport { absolute } from '@codesandbox/common/lib/utils/path';\nimport VERSION from '@codesandbox/common/lib/version';\nimport { clearErrorTransformers, dispatch, reattach } from 'codesandbox-api';\nimport { flatten } from 'lodash';\nimport initializeErrorTransformers from 'sandbox-hooks/errors/transformers';\nimport { inject, unmount } from 'sandbox-hooks/react-error-overlay/overlay';\n\nimport {\n  evalBoilerplates,\n  findBoilerplate,\n  getBoilerplates,\n} from './boilerplates';\nimport defaultBoilerplates from './boilerplates/default-boilerplates';\nimport createCodeSandboxOverlay from './codesandbox-overlay';\nimport getPreset from './eval';\nimport { consumeCache, deleteAPICache, saveCache } from './eval/cache';\nimport { Module } from './eval/types/module';\nimport Manager from './eval/manager';\nimport TranspiledModule from './eval/transpiled-module';\nimport handleExternalResources from './external-resources';\nimport { loadDependencies, NPMDependencies } from './npm';\nimport { resetScreen } from './status-screen';\nimport { showRunOnClick } from './status-screen/run-on-click';\nimport * as metrics from './utils/metrics';\n\nlet initializedResizeListener = false;\nlet manager: Manager | null = null;\nlet actionsEnabled = false;\n\nconst debug = _debug('cs:compiler');\n\nexport function areActionsEnabled() {\n  return actionsEnabled;\n}\n\nexport function getCurrentManager(): Manager | null {\n  return manager;\n}\n\nexport function getHTMLParts(html: string) {\n  if (html.includes('<body>')) {\n    const bodyMatcher = /<body.*>([\\s\\S]*)<\\/body>/m;\n    const headMatcher = /<head>([\\s\\S]*)<\\/head>/m;\n\n    const headMatch = html.match(headMatcher);\n    const bodyMatch = html.match(bodyMatcher);\n    const head = headMatch && headMatch[1] ? headMatch[1] : '';\n    const body = bodyMatch && bodyMatch[1] ? bodyMatch[1] : html;\n\n    return { body, head };\n  }\n\n  return { head: '', body: html };\n}\n\nfunction sendTestCount(\n  givenManager: Manager,\n  modules: { [path: string]: Module }\n) {\n  const { testRunner } = givenManager;\n  const tests = testRunner.findTests(modules);\n\n  dispatch({\n    type: 'test',\n    event: 'test_count',\n    count: tests.length,\n  });\n}\n\nlet firstLoad = true;\nlet hadError = false;\nlet lastHeadHTML = null;\nlet lastBodyHTML = null;\nlet lastHeight = 0;\nlet changedModuleCount = 0;\nlet usedCache = false;\n\nconst DEPENDENCY_ALIASES = {\n  '@vue/cli-plugin-babel': '@vue/babel-preset-app',\n};\n\n// TODO make devDependencies lazy loaded by the packager\nconst WHITELISTED_DEV_DEPENDENCIES = [\n  'redux-devtools',\n  'redux-devtools-dock-monitor',\n  'redux-devtools-log-monitor',\n  'redux-logger',\n  'enzyme',\n  'react-addons-test-utils',\n  'react-test-renderer',\n  'identity-obj-proxy',\n  'react-refresh',\n];\n\nconst BABEL_DEPENDENCIES = [\n  'babel-preset-env',\n  'babel-preset-latest',\n  'babel-preset-es2015',\n  'babel-preset-es2015-loose',\n  'babel-preset-es2016',\n  'babel-preset-es2017',\n  'babel-preset-react',\n  'babel-preset-stage-0',\n  'babel-preset-stage-1',\n  'babel-preset-stage-2',\n  'babel-preset-stage-3',\n];\n\n// Dependencies that we actually don't need, we will replace this by a dynamic\n// system in the future\nconst PREINSTALLED_DEPENDENCIES = [\n  'react-scripts',\n  'react-scripts-ts',\n  'parcel-bundler',\n  'babel-plugin-check-es2015-constants',\n  'babel-plugin-external-helpers',\n  'babel-plugin-inline-replace-variables',\n  'babel-plugin-syntax-async-functions',\n  'babel-plugin-syntax-async-generators',\n  'babel-plugin-syntax-class-constructor-call',\n  'babel-plugin-syntax-class-properties',\n  'babel-plugin-syntax-decorators',\n  'babel-plugin-syntax-do-expressions',\n  'babel-plugin-syntax-exponentiation-operator',\n  'babel-plugin-syntax-export-extensions',\n  'babel-plugin-syntax-flow',\n  'babel-plugin-syntax-function-bind',\n  'babel-plugin-syntax-function-sent',\n  'babel-plugin-syntax-jsx',\n  'babel-plugin-syntax-object-rest-spread',\n  'babel-plugin-syntax-trailing-function-commas',\n  'babel-plugin-transform-async-functions',\n  'babel-plugin-transform-async-to-generator',\n  'babel-plugin-transform-async-to-module-method',\n  'babel-plugin-transform-class-constructor-call',\n  'babel-plugin-transform-class-properties',\n  'babel-plugin-transform-decorators',\n  'babel-plugin-transform-decorators-legacy',\n  'babel-plugin-transform-do-expressions',\n  'babel-plugin-transform-es2015-arrow-functions',\n  'babel-plugin-transform-es2015-block-scoped-functions',\n  'babel-plugin-transform-es2015-block-scoping',\n  'babel-plugin-transform-es2015-classes',\n  'babel-plugin-transform-es2015-computed-properties',\n  'babel-plugin-transform-es2015-destructuring',\n  'babel-plugin-transform-es2015-duplicate-keys',\n  'babel-plugin-transform-es2015-for-of',\n  'babel-plugin-transform-es2015-function-name',\n  'babel-plugin-transform-es2015-instanceof',\n  'babel-plugin-transform-es2015-literals',\n  'babel-plugin-transform-es2015-modules-amd',\n  'babel-plugin-transform-es2015-modules-commonjs',\n  'babel-plugin-transform-es2015-modules-systemjs',\n  'babel-plugin-transform-es2015-modules-umd',\n  'babel-plugin-transform-es2015-object-super',\n  'babel-plugin-transform-es2015-parameters',\n  'babel-plugin-transform-es2015-shorthand-properties',\n  'babel-plugin-transform-es2015-spread',\n  'babel-plugin-transform-es2015-sticky-regex',\n  'babel-plugin-transform-es2015-template-literals',\n  'babel-plugin-transform-es2015-typeof-symbol',\n  'babel-plugin-transform-es2015-unicode-regex',\n  'babel-plugin-transform-es3-member-expression-literals',\n  'babel-plugin-transform-es3-property-literals',\n  'babel-plugin-transform-es5-property-mutators',\n  'babel-plugin-transform-eval',\n  'babel-plugin-transform-exponentiation-operator',\n  'babel-plugin-transform-export-extensions',\n  'babel-plugin-transform-flow-comments',\n  'babel-plugin-transform-flow-strip-types',\n  'babel-plugin-transform-function-bind',\n  'babel-plugin-transform-jscript',\n  'babel-plugin-transform-object-assign',\n  'babel-plugin-transform-object-rest-spread',\n  'babel-plugin-transform-object-set-prototype-of-to-assign',\n  'babel-plugin-transform-proto-to-assign',\n  'babel-plugin-transform-react-constant-elements',\n  'babel-plugin-transform-react-display-name',\n  'babel-plugin-transform-react-inline-elements',\n  'babel-plugin-transform-react-jsx',\n  'babel-plugin-transform-react-jsx-compat',\n  'babel-plugin-transform-react-jsx-self',\n  'babel-plugin-transform-react-jsx-source',\n  'babel-plugin-transform-regenerator',\n  'babel-plugin-transform-runtime',\n  'babel-plugin-transform-strict-mode',\n  'babel-plugin-undeclared-variables-check',\n  'babel-plugin-dynamic-import-node',\n  'babel-plugin-detective',\n  'babel-plugin-transform-prevent-infinite-loops',\n  'babel-plugin-transform-vue-jsx',\n  'flow-bin',\n  ...BABEL_DEPENDENCIES,\n];\n\nfunction getDependencies(\n  parsedPackage,\n  templateDefinition,\n  configurations\n): NPMDependencies {\n  const {\n    dependencies: d = {},\n    peerDependencies = {},\n    devDependencies = {},\n  } = parsedPackage;\n\n  let returnedDependencies = { ...peerDependencies };\n\n  const foundWhitelistedDevDependencies = [...WHITELISTED_DEV_DEPENDENCIES];\n\n  // Add all babel plugins/presets to whitelisted dependencies\n  if (configurations && configurations.babel && configurations.babel.parsed) {\n    flatten(configurations.babel.parsed.presets || [])\n      .filter(p => typeof p === 'string')\n      .forEach((p: string) => {\n        const [first, ...parts] = p.split('/');\n        const prefixedName = p.startsWith('@')\n          ? first + '/babel-preset-' + parts.join('/')\n          : `babel-preset-${p}`;\n\n        foundWhitelistedDevDependencies.push(p);\n        foundWhitelistedDevDependencies.push(prefixedName);\n      });\n\n    flatten(configurations.babel.parsed.plugins || [])\n      .filter(p => typeof p === 'string')\n      .forEach((p: string) => {\n        const [first, ...parts] = p.split('/');\n        const prefixedName = p.startsWith('@')\n          ? first + '/babel-plugin-' + parts.join('/')\n          : `babel-plugin-${p}`;\n\n        foundWhitelistedDevDependencies.push(p);\n        foundWhitelistedDevDependencies.push(prefixedName);\n      });\n  }\n\n  Object.keys(d).forEach(dep => {\n    const usedDep = DEPENDENCY_ALIASES[dep] || dep;\n\n    if (dep === 'reason-react') {\n      return; // is replaced\n    }\n\n    returnedDependencies[usedDep] = d[dep];\n  });\n\n  Object.keys(devDependencies).forEach(dep => {\n    const usedDep = DEPENDENCY_ALIASES[dep] || dep;\n\n    if (foundWhitelistedDevDependencies.indexOf(usedDep) > -1) {\n      if (\n        usedDep === '@vue/babel-preset-app' &&\n        devDependencies[dep].startsWith('^3')\n      ) {\n        // Native modules got added in 3.7.0, we need to hardcode to latest\n        // working version of the babel plugin as a fix. https://twitter.com/notphanan/status/1122475053633941509\n        returnedDependencies[usedDep] = '3.6.0';\n        return;\n      }\n\n      returnedDependencies[usedDep] = devDependencies[dep];\n    }\n  });\n\n  const sandpackConfig =\n    (configurations.customTemplate &&\n      configurations.customTemplate.parsed &&\n      configurations.customTemplate.parsed.sandpack) ||\n    {};\n\n  const preinstalledDependencies =\n    sandpackConfig.preInstalledDependencies == null\n      ? PREINSTALLED_DEPENDENCIES\n      : sandpackConfig.preInstalledDependencies;\n\n  if (templateDefinition.name === 'reason') {\n    returnedDependencies = {\n      ...returnedDependencies,\n      '@jaredly/bs-core': '3.0.0-alpha.2',\n      '@jaredly/reason-react': '0.3.4',\n    };\n  }\n\n  // Always include this, because most sandboxes need this with babel6 and the\n  // packager will only include the package.json for it.\n  if (isBabel7(d, devDependencies)) {\n    returnedDependencies['@babel/runtime'] =\n      returnedDependencies['@babel/runtime'] || '7.3.1';\n  } else {\n    returnedDependencies['babel-runtime'] =\n      returnedDependencies['babel-runtime'] || '6.26.0';\n  }\n\n  // This is used for cache busting\n  returnedDependencies.csbbust = '1.0.0';\n  returnedDependencies['node-libs-browser'] = '2.2.0';\n\n  preinstalledDependencies.forEach(dep => {\n    if (returnedDependencies[dep]) {\n      delete returnedDependencies[dep];\n    }\n  });\n\n  return returnedDependencies;\n}\n\nfunction initializeManager(\n  sandboxId: string,\n  template: TemplateType,\n  modules: { [path: string]: Module },\n  configurations: ParsedConfigurationFiles,\n  { hasFileResolver = false }: { hasFileResolver?: boolean } = {}\n) {\n  return new Manager(\n    sandboxId,\n    getPreset(template, configurations.package.parsed),\n    modules,\n    {\n      hasFileResolver,\n    }\n  );\n}\n\nasync function updateManager(\n  managerModules: { [path: string]: Module },\n  configurations: ParsedConfigurationFiles\n): Promise<TranspiledModule[]> {\n  manager.updateConfigurations(configurations);\n  await manager.preset.setup(manager);\n  return manager.updateData(managerModules).then(x => {\n    changedModuleCount = x.length;\n    return x;\n  });\n}\n\nfunction getDocumentHeight() {\n  const { body } = document;\n  const html = document.documentElement;\n\n  return Math.max(\n    body.scrollHeight,\n    body.offsetHeight,\n    html.clientHeight,\n    html.scrollHeight,\n    html.offsetHeight\n  );\n}\n\nfunction sendResize() {\n  const height = getDocumentHeight();\n\n  if (lastHeight !== height) {\n    if (document.body) {\n      dispatch({\n        type: 'resize',\n        height,\n      });\n    }\n  }\n\n  lastHeight = height;\n}\n\nfunction initializeResizeListener() {\n  setInterval(sendResize, 5000);\n\n  initializedResizeListener = true;\n}\n\nfunction overrideDocumentClose() {\n  const oldClose = window.document.close;\n\n  window.document.close = function close(...args) {\n    try {\n      oldClose.call(document, args);\n    } finally {\n      inject();\n      reattach();\n    }\n  };\n}\n\noverrideDocumentClose();\n\ninject();\n\ninterface CompileOptions {\n  sandboxId: string;\n  modules: { [path: string]: Module };\n  externalResources: string[];\n  hasActions?: boolean;\n  isModuleView?: boolean;\n  template: TemplateType;\n  entry: string;\n  showOpenInCodeSandbox?: boolean;\n  skipEval?: boolean;\n  hasFileResolver?: boolean;\n  disableDependencyPreprocessing?: boolean;\n}\n\nasync function compile({\n  sandboxId,\n  modules,\n  externalResources,\n  hasActions,\n  isModuleView = false,\n  template,\n  entry,\n  showOpenInCodeSandbox = false,\n  skipEval = false,\n  hasFileResolver = false,\n  disableDependencyPreprocessing = false,\n}: CompileOptions) {\n  dispatch({\n    type: 'start',\n  });\n  metrics.measure('compilation');\n\n  const startTime = Date.now();\n  try {\n    inject();\n    clearErrorTransformers();\n    initializeErrorTransformers();\n    unmount(manager && manager.webpackHMR ? true : hadError);\n  } catch (e) {\n    console.error(e);\n  }\n\n  hadError = false;\n\n  actionsEnabled = hasActions;\n\n  let managerModuleToTranspile = null;\n  try {\n    const templateDefinition = getDefinition(template);\n    const configurations = parseConfigurations(\n      template,\n      templateDefinition.configurationFiles,\n      path => modules[path]\n    );\n\n    const errors = Object.keys(configurations)\n      .map(c => configurations[c])\n      .filter(x => x.error);\n\n    if (errors.length) {\n      const e = new Error(\n        `We weren't able to parse: '${errors[0].path}': ${errors[0].error.message}`\n      );\n\n      // @ts-ignore\n      e.fileName = errors[0].path;\n\n      throw e;\n    }\n\n    const packageJSON = modules['/package.json'];\n\n    if (!packageJSON) {\n      throw new Error('Could not find package.json');\n    }\n\n    const parsedPackageJSON = configurations.package.parsed;\n\n    dispatch({ type: 'status', status: 'installing-dependencies' });\n\n    manager =\n      manager ||\n      initializeManager(sandboxId, template, modules, configurations, {\n        hasFileResolver,\n      });\n\n    let dependencies: NPMDependencies = getDependencies(\n      parsedPackageJSON,\n      templateDefinition,\n      configurations\n    );\n\n    dependencies = await manager.preset.processDependencies(dependencies);\n\n    metrics.measure('dependencies');\n    const { manifest, isNewCombination } = await loadDependencies(\n      dependencies,\n      {\n        disableExternalConnection: disableDependencyPreprocessing,\n        resolutions: parsedPackageJSON.resolutions,\n        showFullScreen: firstLoad,\n      }\n    );\n    metrics.endMeasure('dependencies', { displayName: 'Dependencies' });\n\n    const shouldReloadManager =\n      (isNewCombination && !firstLoad) || manager.id !== sandboxId;\n\n    if (shouldReloadManager) {\n      // Just reset the whole manager if it's a new combination\n      manager.dispose();\n\n      manager = initializeManager(\n        sandboxId,\n        template,\n        modules,\n        configurations,\n        { hasFileResolver }\n      );\n    }\n\n    if (shouldReloadManager || firstLoad) {\n      // Now initialize the data the manager can only use once dependencies are loaded\n\n      manager.setManifest(manifest);\n      // We save the state of transpiled modules, and load it here again. Gives\n      // faster initial loads.\n      usedCache = await consumeCache(manager);\n    }\n\n    metrics.measure('transpilation');\n\n    const updatedModules = (await updateManager(modules, configurations)) || [];\n\n    const possibleEntries = templateDefinition.getEntries(configurations);\n\n    const foundMain = isModuleView\n      ? entry\n      : possibleEntries.find(p => Boolean(modules[p]));\n\n    if (!foundMain) {\n      throw new Error(\n        `Could not find entry file: ${possibleEntries[0]}. You can specify one in package.json by defining a \\`main\\` property.`\n      );\n    }\n\n    const main = absolute(foundMain);\n    managerModuleToTranspile = modules[main];\n\n    dispatch({ type: 'status', status: 'transpiling' });\n    manager.setStage('transpilation');\n\n    await manager.verifyTreeTranspiled();\n    await manager.transpileModules(managerModuleToTranspile);\n\n    metrics.endMeasure('transpilation', { displayName: 'Transpilation' });\n\n    dispatch({ type: 'status', status: 'evaluating' });\n    manager.setStage('evaluation');\n\n    if (!skipEval) {\n      resetScreen();\n\n      try {\n        // We set it as a time value for people that run two sandboxes on one computer\n        // they execute at the same time and we don't want them to conflict, so we check\n        // if the message was set a second ago\n        if (\n          firstLoad &&\n          localStorage.getItem('running') &&\n          Date.now() - +localStorage.getItem('running') > 8000\n        ) {\n          localStorage.removeItem('running');\n          showRunOnClick();\n          return;\n        }\n\n        localStorage.setItem('running', '' + Date.now());\n      } catch (e) {\n        /* no */\n      }\n\n      await manager.preset.preEvaluate(manager, updatedModules);\n\n      if (!manager.webpackHMR) {\n        const htmlModulePath = templateDefinition\n          .getHTMLEntries(configurations)\n          .find(p => Boolean(modules[p]));\n        const htmlModule = modules[htmlModulePath];\n\n        const { head, body } = getHTMLParts(\n          htmlModule && htmlModule.code\n            ? htmlModule.code\n            : template === 'vue-cli'\n            ? '<div id=\"app\"></div>'\n            : '<div id=\"root\"></div>'\n        );\n\n        if (lastHeadHTML && lastHeadHTML !== head) {\n          document.location.reload();\n        }\n        if (manager && lastBodyHTML && lastBodyHTML !== body) {\n          manager.clearCompiledCache();\n        }\n\n        if (\n          !manager.preset.htmlDisabled ||\n          !firstLoad ||\n          process.env.LOCAL_SERVER\n        ) {\n          // The HTML is loaded from the server as a static file, no need to set the innerHTML of the body\n          // on the first run.\n          document.body.innerHTML = body;\n        }\n        lastBodyHTML = body;\n        lastHeadHTML = head;\n      }\n\n      metrics.measure('external-resources');\n      await handleExternalResources(externalResources);\n      metrics.endMeasure('external-resources', {\n        displayName: 'External Resources',\n      });\n\n      const oldHTML = document.body.innerHTML;\n      metrics.measure('evaluation');\n      const evalled = manager.evaluateModule(managerModuleToTranspile, {\n        force: isModuleView,\n      });\n      metrics.endMeasure('evaluation', { displayName: 'Evaluation' });\n\n      const domChanged =\n        !manager.preset.htmlDisabled && oldHTML !== document.body.innerHTML;\n\n      if (\n        isModuleView &&\n        !domChanged &&\n        !managerModuleToTranspile.path.endsWith('.html')\n      ) {\n        const isReact =\n          managerModuleToTranspile.code &&\n          managerModuleToTranspile.code.includes('React');\n\n        if (isReact && evalled) {\n          // initiate boilerplates\n          if (getBoilerplates().length === 0) {\n            try {\n              await evalBoilerplates(defaultBoilerplates);\n            } catch (e) {\n              // eslint-disable-next-line no-console\n              console.log(\"Couldn't load all boilerplates: \" + e.message);\n            }\n          }\n\n          const boilerplate = findBoilerplate(managerModuleToTranspile);\n\n          if (boilerplate) {\n            try {\n              boilerplate.module.default(evalled);\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        }\n      }\n    }\n\n    await manager.preset.teardown(manager, updatedModules);\n\n    if (!initializedResizeListener && !manager.preset.htmlDisabled) {\n      initializeResizeListener();\n    }\n\n    if (showOpenInCodeSandbox) {\n      createCodeSandboxOverlay(modules);\n    }\n\n    debug(`Total time: ${Date.now() - startTime}ms`);\n\n    metrics.endMeasure('compilation', { displayName: 'Compilation' });\n    metrics.endMeasure('total', { displayName: 'Total', lastTime: 0 });\n    dispatch({\n      type: 'success',\n    });\n\n    saveCache(\n      sandboxId,\n      managerModuleToTranspile,\n      manager,\n      changedModuleCount,\n      firstLoad\n    );\n\n    setTimeout(async () => {\n      try {\n        await manager.initializeTestRunner();\n        sendTestCount(manager, modules);\n      } catch (e) {\n        if (process.env.NODE_ENV === 'development') {\n          console.error('Test error', e);\n        }\n      }\n    }, 600);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log('Error in sandbox:');\n    console.error(e);\n\n    if (manager) {\n      manager.clearCache();\n\n      if (firstLoad && changedModuleCount === 0) {\n        await deleteAPICache(manager.id);\n      }\n    }\n\n    if (firstLoad) {\n      inject();\n    }\n\n    const event = new Event('error');\n    // @ts-ignore\n    event.error = e;\n\n    window.dispatchEvent(event);\n\n    hadError = true;\n  } finally {\n    setTimeout(() => {\n      try {\n        // Set a timeout so there's a chance that we also catch runtime errors\n        localStorage.removeItem('running');\n      } catch (e) {\n        /* no */\n      }\n    }, 600);\n\n    if (manager) {\n      const managerState = {\n        ...(await manager.serialize({ optimizeForSize: false })),\n      };\n      delete managerState.cachedPaths;\n      managerState.entry = managerModuleToTranspile\n        ? managerModuleToTranspile.path\n        : null;\n\n      dispatch({\n        type: 'state',\n        state: managerState,\n      });\n\n      manager.isFirstLoad = false;\n    }\n\n    if (firstLoad) {\n      metrics\n        .persistMeasurements({\n          sandboxId,\n          cacheUsed: usedCache,\n          browser: navigator.userAgent,\n          version: VERSION,\n        })\n        .catch(() => {\n          /* Do nothing with the error */\n        });\n    }\n  }\n  firstLoad = false;\n\n  dispatch({ type: 'status', status: 'idle' });\n  dispatch({ type: 'done', compilatonError: hadError });\n\n  if (typeof (window as any).__puppeteer__ === 'function') {\n    setTimeout(() => {\n      // Give everything some time to evaluate\n      (window as any).__puppeteer__('done');\n    }, 100);\n  }\n}\n\nconst tasks: CompileOptions[] = [];\nlet runningTask = null;\n\nasync function executeTaskIfAvailable() {\n  if (tasks.length) {\n    runningTask = tasks.pop();\n    await compile(runningTask);\n    runningTask = null;\n\n    executeTaskIfAvailable();\n  }\n}\n\n/**\n * We want to ensure that no tasks (commands from the editor) are run in parallel,\n * this could result in state inconsistency. That's why we execute tasks after eachother,\n * and if there are 3 tasks we will remove the second task, this one is unnecessary as it is not the\n * latest version.\n */\nexport default function queueTask(data: CompileOptions) {\n  // If same task is running, ignore it.\n  if (runningTask && JSON.stringify(runningTask) === JSON.stringify(data)) {\n    return;\n  }\n\n  tasks[0] = data;\n\n  if (!runningTask) {\n    executeTaskIfAvailable();\n  }\n}\n","module.exports = {\n  'stdlib/reasonReact': '@jaredly/reason-react/lib/js/src/ReasonReact.js',\n  'stdlib/reasonReactOptimizedCreateClass':\n    '@jaredly/reason-react/lib/js/src/ReasonReactOptimizedCreateClass.js',\n  'stdlib/reactEventRe': '@jaredly/reason-react/lib/js/src/ReactEventRe.js',\n  'stdlib/reactDOMServerRe':\n    '@jaredly/reason-react/lib/js/src/ReactDOMServerRe.js',\n  'stdlib/reactDOMRe': '@jaredly/reason-react/lib/js/src/ReactDOMRe.js',\n  'stdlib/belt_MutableSet': '@jaredly/bs-core/lib/js/belt_MutableSet.js',\n  'stdlib/belt_MutableStack': '@jaredly/bs-core/lib/js/belt_MutableStack.js',\n  'stdlib/js_unsafe': '@jaredly/bs-core/lib/js/js_unsafe.js',\n  'stdlib/caml_string': '@jaredly/bs-core/lib/js/caml_string.js',\n  'stdlib/belt_internalMapString':\n    '@jaredly/bs-core/lib/js/belt_internalMapString.js',\n  'stdlib/belt_Id': '@jaredly/bs-core/lib/js/belt_Id.js',\n  'stdlib/caml_module': '@jaredly/bs-core/lib/js/caml_module.js',\n  'stdlib/js_internal': '@jaredly/bs-core/lib/js/js_internal.js',\n  'stdlib/char': '@jaredly/bs-core/lib/js/char.js',\n  'stdlib/js': '@jaredly/bs-core/lib/js/js.js',\n  'stdlib/caml_gc': '@jaredly/bs-core/lib/js/caml_gc.js',\n  'stdlib/js_null': '@jaredly/bs-core/lib/js/js_null.js',\n  'stdlib/belt_HashMapString': '@jaredly/bs-core/lib/js/belt_HashMapString.js',\n  'stdlib/int64': '@jaredly/bs-core/lib/js/int64.js',\n  'stdlib/sort': '@jaredly/bs-core/lib/js/sort.js',\n  'stdlib/belt_SortArrayInt': '@jaredly/bs-core/lib/js/belt_SortArrayInt.js',\n  'stdlib/caml_basic': '@jaredly/bs-core/lib/js/caml_basic.js',\n  'stdlib/js_result': '@jaredly/bs-core/lib/js/js_result.js',\n  'stdlib/caml_utils': '@jaredly/bs-core/lib/js/caml_utils.js',\n  'stdlib/js_promise': '@jaredly/bs-core/lib/js/js_promise.js',\n  'stdlib/js_obj': '@jaredly/bs-core/lib/js/js_obj.js',\n  'stdlib/belt_Map': '@jaredly/bs-core/lib/js/belt_Map.js',\n  'stdlib/js_console': '@jaredly/bs-core/lib/js/js_console.js',\n  'stdlib/caml_backtrace': '@jaredly/bs-core/lib/js/caml_backtrace.js',\n  'stdlib/oo': '@jaredly/bs-core/lib/js/oo.js',\n  'stdlib/caml_hash': '@jaredly/bs-core/lib/js/caml_hash.js',\n  'stdlib/belt_SortArray': '@jaredly/bs-core/lib/js/belt_SortArray.js',\n  'stdlib/random': '@jaredly/bs-core/lib/js/random.js',\n  'stdlib/stream': '@jaredly/bs-core/lib/js/stream.js',\n  'stdlib/belt_SetDict': '@jaredly/bs-core/lib/js/belt_SetDict.js',\n  'stdlib/caml_int32': '@jaredly/bs-core/lib/js/caml_int32.js',\n  'stdlib/format': '@jaredly/bs-core/lib/js/format.js',\n  'stdlib/stringLabels': '@jaredly/bs-core/lib/js/stringLabels.js',\n  'stdlib/belt_MutableSetString':\n    '@jaredly/bs-core/lib/js/belt_MutableSetString.js',\n  'stdlib/stdLabels': '@jaredly/bs-core/lib/js/stdLabels.js',\n  'stdlib/caml_lexer': '@jaredly/bs-core/lib/js/caml_lexer.js',\n  'stdlib/printf': '@jaredly/bs-core/lib/js/printf.js',\n  'stdlib/unixLabels': '@jaredly/bs-core/lib/js/unixLabels.js',\n  'stdlib/bs_obj': '@jaredly/bs-core/lib/js/bs_obj.js',\n  'stdlib/moreLabels': '@jaredly/bs-core/lib/js/moreLabels.js',\n  'stdlib/js_mapperRt': '@jaredly/bs-core/lib/js/js_mapperRt.js',\n  'stdlib/belt_Set': '@jaredly/bs-core/lib/js/belt_Set.js',\n  'stdlib/js_types': '@jaredly/bs-core/lib/js/js_types.js',\n  'stdlib/caml_oo': '@jaredly/bs-core/lib/js/caml_oo.js',\n  'stdlib/belt_internalMapInt':\n    '@jaredly/bs-core/lib/js/belt_internalMapInt.js',\n  'stdlib/pervasives': '@jaredly/bs-core/lib/js/pervasives.js',\n  'stdlib/scanf': '@jaredly/bs-core/lib/js/scanf.js',\n  'stdlib/std_exit': '@jaredly/bs-core/lib/js/std_exit.js',\n  'stdlib/belt': '@jaredly/bs-core/lib/js/belt.js',\n  'stdlib/caml_parser': '@jaredly/bs-core/lib/js/caml_parser.js',\n  'stdlib/js_cast': '@jaredly/bs-core/lib/js/js_cast.js',\n  'stdlib/belt_internalAVLset':\n    '@jaredly/bs-core/lib/js/belt_internalAVLset.js',\n  'stdlib/belt_HashSetInt': '@jaredly/bs-core/lib/js/belt_HashSetInt.js',\n  'stdlib/belt_MutableMapString':\n    '@jaredly/bs-core/lib/js/belt_MutableMapString.js',\n  'stdlib/caml_array': '@jaredly/bs-core/lib/js/caml_array.js',\n  'stdlib/belt_MutableSetInt': '@jaredly/bs-core/lib/js/belt_MutableSetInt.js',\n  'stdlib/digest': '@jaredly/bs-core/lib/js/digest.js',\n  'stdlib/marshal': '@jaredly/bs-core/lib/js/marshal.js',\n  'stdlib/belt_List': '@jaredly/bs-core/lib/js/belt_List.js',\n  'stdlib/caml_weak': '@jaredly/bs-core/lib/js/caml_weak.js',\n  'stdlib/js_string': '@jaredly/bs-core/lib/js/js_string.js',\n  'stdlib/callback': '@jaredly/bs-core/lib/js/callback.js',\n  'stdlib/queue': '@jaredly/bs-core/lib/js/queue.js',\n  'stdlib/camlinternalMod': '@jaredly/bs-core/lib/js/camlinternalMod.js',\n  'stdlib/caml_bytes': '@jaredly/bs-core/lib/js/caml_bytes.js',\n  'stdlib/camlinternalFormatBasics':\n    '@jaredly/bs-core/lib/js/camlinternalFormatBasics.js',\n  'stdlib/belt_MutableMap': '@jaredly/bs-core/lib/js/belt_MutableMap.js',\n  'stdlib/belt_internalSetInt':\n    '@jaredly/bs-core/lib/js/belt_internalSetInt.js',\n  'stdlib/belt_Array': '@jaredly/bs-core/lib/js/belt_Array.js',\n  'stdlib/caml_io': '@jaredly/bs-core/lib/js/caml_io.js',\n  'stdlib/camlinternalLazy': '@jaredly/bs-core/lib/js/camlinternalLazy.js',\n  'stdlib/gc': '@jaredly/bs-core/lib/js/gc.js',\n  'stdlib/belt_HashSetString': '@jaredly/bs-core/lib/js/belt_HashSetString.js',\n  'stdlib/belt_internalBuckets':\n    '@jaredly/bs-core/lib/js/belt_internalBuckets.js',\n  'stdlib/belt_HashMapInt': '@jaredly/bs-core/lib/js/belt_HashMapInt.js',\n  'stdlib/parsing': '@jaredly/bs-core/lib/js/parsing.js',\n  'stdlib/js_list': '@jaredly/bs-core/lib/js/js_list.js',\n  'stdlib/belt_MutableMapInt': '@jaredly/bs-core/lib/js/belt_MutableMapInt.js',\n  'stdlib/bs_string': '@jaredly/bs-core/lib/js/bs_string.js',\n  'stdlib/caml_primitive': '@jaredly/bs-core/lib/js/caml_primitive.js',\n  'stdlib/belt_internalSetString':\n    '@jaredly/bs-core/lib/js/belt_internalSetString.js',\n  'stdlib/js_boolean': '@jaredly/bs-core/lib/js/js_boolean.js',\n  'stdlib/list': '@jaredly/bs-core/lib/js/list.js',\n  'stdlib/js_float': '@jaredly/bs-core/lib/js/js_float.js',\n  'stdlib/js_int': '@jaredly/bs-core/lib/js/js_int.js',\n  'stdlib/unix': '@jaredly/bs-core/lib/js/unix.js',\n  'stdlib/js_int64': '@jaredly/bs-core/lib/js/js_int64.js',\n  'stdlib/set': '@jaredly/bs-core/lib/js/set.js',\n  'stdlib/array': '@jaredly/bs-core/lib/js/array.js',\n  'stdlib/arrayLabels': '@jaredly/bs-core/lib/js/arrayLabels.js',\n  'stdlib/bytes': '@jaredly/bs-core/lib/js/bytes.js',\n  'stdlib/caml_queue': '@jaredly/bs-core/lib/js/caml_queue.js',\n  'stdlib/caml_missing_polyfill':\n    '@jaredly/bs-core/lib/js/caml_missing_polyfill.js',\n  'stdlib/lazy': '@jaredly/bs-core/lib/js/lazy.js',\n  'stdlib/node': '@jaredly/bs-core/lib/js/node.js',\n  'stdlib/string': '@jaredly/bs-core/lib/js/string.js',\n  'stdlib/block': '@jaredly/bs-core/lib/js/block.js',\n  'stdlib/js_math': '@jaredly/bs-core/lib/js/js_math.js',\n  'stdlib/js_dict': '@jaredly/bs-core/lib/js/js_dict.js',\n  'stdlib/arg': '@jaredly/bs-core/lib/js/arg.js',\n  'stdlib/belt_MapInt': '@jaredly/bs-core/lib/js/belt_MapInt.js',\n  'stdlib/belt_internalAVLtree':\n    '@jaredly/bs-core/lib/js/belt_internalAVLtree.js',\n  'stdlib/belt_HashMap': '@jaredly/bs-core/lib/js/belt_HashMap.js',\n  'stdlib/js_global': '@jaredly/bs-core/lib/js/js_global.js',\n  'stdlib/belt_MutableQueue': '@jaredly/bs-core/lib/js/belt_MutableQueue.js',\n  'stdlib/js_null_undefined': '@jaredly/bs-core/lib/js/js_null_undefined.js',\n  'stdlib/js_option': '@jaredly/bs-core/lib/js/js_option.js',\n  'stdlib/caml_format': '@jaredly/bs-core/lib/js/caml_format.js',\n  'stdlib/printexc': '@jaredly/bs-core/lib/js/printexc.js',\n  'stdlib/genlex': '@jaredly/bs-core/lib/js/genlex.js',\n  'stdlib/caml_exceptions': '@jaredly/bs-core/lib/js/caml_exceptions.js',\n  'stdlib/weak': '@jaredly/bs-core/lib/js/weak.js',\n  'stdlib/sys': '@jaredly/bs-core/lib/js/sys.js',\n  'stdlib/filename': '@jaredly/bs-core/lib/js/filename.js',\n  'stdlib/caml_obj': '@jaredly/bs-core/lib/js/caml_obj.js',\n  'stdlib/belt_MapDict': '@jaredly/bs-core/lib/js/belt_MapDict.js',\n  'stdlib/complex': '@jaredly/bs-core/lib/js/complex.js',\n  'stdlib/js_exn': '@jaredly/bs-core/lib/js/js_exn.js',\n  'stdlib/hashtbl': '@jaredly/bs-core/lib/js/hashtbl.js',\n  'stdlib/belt_MapString': '@jaredly/bs-core/lib/js/belt_MapString.js',\n  'stdlib/js_json': '@jaredly/bs-core/lib/js/js_json.js',\n  'stdlib/js_vector': '@jaredly/bs-core/lib/js/js_vector.js',\n  'stdlib/js_date': '@jaredly/bs-core/lib/js/js_date.js',\n  'stdlib/belt_SetInt': '@jaredly/bs-core/lib/js/belt_SetInt.js',\n  'stdlib/caml_sys': '@jaredly/bs-core/lib/js/caml_sys.js',\n  'stdlib/js_nativeint': '@jaredly/bs-core/lib/js/js_nativeint.js',\n  'stdlib/js_undefined': '@jaredly/bs-core/lib/js/js_undefined.js',\n  'stdlib/caml_int64': '@jaredly/bs-core/lib/js/caml_int64.js',\n  'stdlib/caml_md5': '@jaredly/bs-core/lib/js/caml_md5.js',\n  'stdlib/caml_oo_curry': '@jaredly/bs-core/lib/js/caml_oo_curry.js',\n  'stdlib/belt_SetString': '@jaredly/bs-core/lib/js/belt_SetString.js',\n  'stdlib/caml_float': '@jaredly/bs-core/lib/js/caml_float.js',\n  'stdlib/bigarray': '@jaredly/bs-core/lib/js/bigarray.js',\n  'stdlib/caml_builtin_exceptions':\n    '@jaredly/bs-core/lib/js/caml_builtin_exceptions.js',\n  'stdlib/obj': '@jaredly/bs-core/lib/js/obj.js',\n  'stdlib/js_typed_array': '@jaredly/bs-core/lib/js/js_typed_array.js',\n  'stdlib/map': '@jaredly/bs-core/lib/js/map.js',\n  'stdlib/int32': '@jaredly/bs-core/lib/js/int32.js',\n  'stdlib/listLabels': '@jaredly/bs-core/lib/js/listLabels.js',\n  'stdlib/belt_Range': '@jaredly/bs-core/lib/js/belt_Range.js',\n  'stdlib/belt_Option': '@jaredly/bs-core/lib/js/belt_Option.js',\n  'stdlib/js_array': '@jaredly/bs-core/lib/js/js_array.js',\n  'stdlib/camlinternalFormat': '@jaredly/bs-core/lib/js/camlinternalFormat.js',\n  'stdlib/nativeint': '@jaredly/bs-core/lib/js/nativeint.js',\n  'stdlib/lexing': '@jaredly/bs-core/lib/js/lexing.js',\n  'stdlib/js_primitive': '@jaredly/bs-core/lib/js/js_primitive.js',\n  'stdlib/camlinternalOO': '@jaredly/bs-core/lib/js/camlinternalOO.js',\n  'stdlib/belt_SortArrayString':\n    '@jaredly/bs-core/lib/js/belt_SortArrayString.js',\n  'stdlib/buffer': '@jaredly/bs-core/lib/js/buffer.js',\n  'stdlib/bytesLabels': '@jaredly/bs-core/lib/js/bytesLabels.js',\n  'stdlib/belt_internalBucketsType':\n    '@jaredly/bs-core/lib/js/belt_internalBucketsType.js',\n  'stdlib/curry': '@jaredly/bs-core/lib/js/curry.js',\n  'stdlib/belt_internalSetBuckets':\n    '@jaredly/bs-core/lib/js/belt_internalSetBuckets.js',\n  'stdlib/belt_HashSet': '@jaredly/bs-core/lib/js/belt_HashSet.js',\n  'stdlib/stack': '@jaredly/bs-core/lib/js/stack.js',\n  'bs-platform': '@jaredly/bs-core',\n};\n","/* eslint-disable */\nconst specialValues = {\n  null: null,\n  true: true,\n  false: false,\n};\n\nexport default function parseQuery(query) {\n  if (query.substr(0, 1) !== '?') {\n    throw new Error(\n      \"A valid query string passed to parseQuery should begin with '?'\"\n    );\n  }\n  query = query.substr(1);\n  if (!query) {\n    return {};\n  }\n  if (query.substr(0, 1) === '{' && query.substr(-1) === '}') {\n    return JSON.parse(query);\n  }\n  const queryArgs = query.split(/[,&]/g);\n  const result = {};\n  queryArgs.forEach(arg => {\n    const idx = arg.indexOf('=');\n    if (idx >= 0) {\n      let name = arg.substr(0, idx);\n      let value = decodeURIComponent(arg.substr(idx + 1));\n      if (specialValues.hasOwnProperty(value)) {\n        value = specialValues[value];\n      }\n      if (name.substr(-2) === '[]') {\n        name = decodeURIComponent(name.substr(0, name.length - 2));\n        if (!Array.isArray(result[name])) result[name] = [];\n        result[name].push(value);\n      } else {\n        name = decodeURIComponent(name);\n        result[name] = value;\n      }\n    } else {\n      if (arg.substr(0, 1) === '-') {\n        result[decodeURIComponent(arg.substr(1))] = false;\n      } else if (arg.substr(0, 1) === '+') {\n        result[decodeURIComponent(arg.substr(1))] = true;\n      } else {\n        result[decodeURIComponent(arg)] = true;\n      }\n    }\n  });\n  return result;\n}\n","import path from 'path';\n\nconst matchRelativePath = /^\\.\\.?[/\\\\]/;\n\nfunction isAbsolutePath(str) {\n  return str.startsWith('/');\n}\n\nfunction isRelativePath(str) {\n  return matchRelativePath.test(str);\n}\n\nexport default function stringifyRequest(loaderContext, request) {\n  const splitted = request.split('!');\n  const context =\n    loaderContext.context ||\n    (loaderContext.options && loaderContext.options.context);\n  return JSON.stringify(\n    splitted\n      .map(part => {\n        // First, separate singlePath from query, because the query might contain paths again\n        const splittedPart = part.match(/^(.*?)(\\?.*)/);\n        let singlePath = splittedPart ? splittedPart[1] : part;\n        const query = splittedPart ? splittedPart[2] : '';\n        if (isAbsolutePath(singlePath) && context) {\n          singlePath = path.relative(context, singlePath);\n          if (isAbsolutePath(singlePath)) {\n            // If singlePath still matches an absolute path, singlePath was on a different drive than context.\n            // In this case, we leave the path platform-specific without replacing any separators.\n            // @see https://github.com/webpack/loader-utils/pull/14\n            return singlePath + query;\n          }\n          if (isRelativePath(singlePath) === false) {\n            // Ensure that the relative path starts at least with ./ otherwise it would be a request into the modules directory (like node_modules).\n            singlePath = './' + singlePath;\n          }\n        }\n        return singlePath.replace(/\\\\/g, '/') + query;\n      })\n      .join('!')\n  );\n}\n","import parseQuery from './parse-query';\nimport stringifyRequest from './stringify-request';\nimport getRemainingRequest from './get-remaining-request';\n\nexport default {\n  getRemainingRequest,\n  parseQuery,\n  stringifyRequest,\n};\n","export default function getRemainingRequest(loaderContext) {\n  if (loaderContext.remainingRequests) return loaderContext.remainingRequests;\n  const request = loaderContext.loaders\n    .slice(loaderContext.loaderIndex + 1)\n    .map(obj => obj.request)\n    .concat([loaderContext.resource]);\n  return request.join('!');\n}\n","import { camelizeKeys } from 'humps';\nimport { isStandalone, listen, dispatch } from 'codesandbox-api';\nimport _debug from '@codesandbox/common/lib/utils/debug';\n\nimport registerServiceWorker from '@codesandbox/common/lib/registerServiceWorker';\nimport requirePolyfills from '@codesandbox/common/lib/load-dynamic-polyfills';\nimport { getModulePath } from '@codesandbox/common/lib/sandbox/modules';\nimport { generateFileFromSandbox } from '@codesandbox/common/lib/templates/configuration/package-json';\nimport { getSandboxId } from '@codesandbox/common/lib/utils/url-generator';\nimport { getPreviewSecret } from 'sandbox-hooks/preview-secret';\nimport { show404 } from 'sandbox-hooks/not-found-screen';\n\nimport compile, { getCurrentManager } from './compile';\nimport { endMeasure } from './utils/metrics';\n\nconst host = process.env.CODESANDBOX_HOST;\nconst debug = _debug('cs:sandbox');\n\nexport const SCRIPT_VERSION =\n  document.currentScript && document.currentScript.src;\n\ndebug('Booting sandbox v2');\n\nendMeasure('boot', { lastTime: 0, displayName: 'Boot' });\n\nrequirePolyfills().then(() => {\n  registerServiceWorker('/sandbox-service-worker.js', {});\n\n  function sendReady() {\n    dispatch({ type: 'initialized' });\n  }\n\n  async function handleMessage(data, source) {\n    if (source) {\n      if (data.type === 'compile') {\n        compile(data);\n      } else if (data.type === 'get-transpiler-context') {\n        const manager = getCurrentManager();\n\n        if (manager) {\n          const context = await manager.getTranspilerContext();\n          dispatch({\n            type: 'transpiler-context',\n            data: context,\n          });\n        } else {\n          dispatch({\n            type: 'transpiler-context',\n            data: {},\n          });\n        }\n      }\n    }\n  }\n\n  if (!isStandalone) {\n    listen(handleMessage);\n\n    sendReady();\n  }\n\n  if (process.env.NODE_ENV === 'test' || isStandalone) {\n    // We need to fetch the sandbox ourselves...\n    const id = getSandboxId();\n    window\n      .fetch(host + `/api/v1/sandboxes/${id}`, {\n        headers: {\n          Accept: 'application/json',\n          Authorization: `Basic ${getPreviewSecret()}`,\n        },\n        credentials: 'include',\n        mode: 'cors',\n      })\n      .then(res => {\n        if (res.status === 404) {\n          show404(id);\n        }\n        return res.json();\n      })\n      .then(res => {\n        const camelized = camelizeKeys(res);\n        camelized.data.npmDependencies = res.data.npm_dependencies;\n\n        return camelized;\n      })\n      .then(x => {\n        const moduleObject = {};\n\n        // We convert the modules to a format the manager understands\n        x.data.modules.forEach(m => {\n          const path = getModulePath(x.data.modules, x.data.directories, m.id);\n          moduleObject[path] = {\n            path,\n            code: m.code,\n          };\n        });\n\n        if (!moduleObject['/package.json']) {\n          moduleObject['/package.json'] = {\n            code: generateFileFromSandbox(x.data),\n            path: '/package.json',\n          };\n        }\n\n        const data = {\n          sandboxId: id,\n          modules: moduleObject,\n          entry: '/' + x.data.entry,\n          externalResources: x.data.externalResources,\n          dependencies: x.data.npmDependencies,\n          hasActions: false,\n          template: x.data.template,\n          version: 3,\n          disableDependencyPreprocessing: document.location.search.includes(\n            'csb-dynamic-download'\n          ),\n        };\n\n        compile(data);\n      });\n  }\n});\n","import _debug from '@codesandbox/common/lib/utils/debug';\nimport { getGlobal } from '@codesandbox/common/lib/utils/global';\n\nconst debug = _debug('cs:compiler:measurements');\n\ntype MeasurementKey = string;\n\nconst runningMeasurements = new Map<string, number>();\nlet measurements: { [measurement: string]: number } = {};\n\nconst global = getGlobal();\nif (typeof global.performance === 'undefined') {\n  global.performance = {\n    mark: () => {},\n    now: () => Date.now(),\n    measure: () => {},\n  };\n}\n\nexport function measure(key: MeasurementKey) {\n  try {\n    performance.mark(`${key}_start`);\n    runningMeasurements.set(key, performance.now());\n  } catch (e) {\n    console.warn(`Something went wrong while adding measure: ${e.message}`);\n  }\n}\n\nexport function endMeasure(\n  key: MeasurementKey,\n  options: {\n    displayName?: string;\n    lastTime?: number;\n    silent?: boolean;\n  } = {}\n) {\n  try {\n    const { lastTime } = options;\n    performance.mark(`${key}_end`);\n\n    const lastMeasurement =\n      typeof lastTime === 'undefined' ? runningMeasurements.get(key) : lastTime;\n\n    if (typeof lastMeasurement === 'undefined') {\n      console.warn(\n        `Measurement for '${key}' was requested, but never was started`\n      );\n      return 0;\n    }\n\n    const nowMeasurement = performance.now();\n\n    measurements[key] = nowMeasurement - lastMeasurement;\n    if (!options.silent) {\n      debug(\n        `${options.displayName || key} Time: ${measurements[key].toFixed(2)}ms`\n      );\n    }\n    const hadKey = runningMeasurements.delete(key);\n\n    performance.measure(key, hadKey ? `${key}_start` : undefined, `${key}_end`);\n\n    return measurements[key];\n  } catch (e) {\n    console.warn(`Something went wrong while adding measure: ${e.message}`);\n    return 0;\n  }\n}\n\n/**\n * Get the cumulative of a specific measurement by prefix. If you had for example these measurements:\n * - transpile-index.js\n * - transpile-test.js\n *\n * You can get the sum of these measurements with getCumulativeMeasure('transpile', 'Transpilation')\n */\nexport function getCumulativeMeasure(\n  prefix: string,\n  options: { displayName?: string; silent?: boolean } = {}\n) {\n  const keys = Object.keys(measurements).filter(p =>\n    p.startsWith(prefix + '-')\n  );\n\n  const totalTime = keys.reduce((prev, key) => prev + measurements[key], 0);\n\n  if (!options.silent) {\n    debug(\n      `${options.displayName || prefix} Total Time: ${totalTime.toFixed(2)}ms`\n    );\n    debug(`  Average Time: ${(totalTime / keys.length).toFixed(2)}ms`);\n  }\n\n  return totalTime;\n}\n\nexport function clearMeasurements() {\n  measurements = {};\n  runningMeasurements.clear();\n}\n\nexport function getMeasurements() {\n  return measurements;\n}\n\ngetGlobal().measurements = {\n  getCumulativeMeasure,\n  getMeasurements,\n};\n\nconst MEASUREMENT_API = `https://col.csbops.io/data/sandpack`;\n\nexport function persistMeasurements(data: {\n  sandboxId: string;\n  cacheUsed: boolean;\n  browser: string;\n  version: string;\n}): Promise<Response | void> {\n  const body = [\n    {\n      measurement: 'load_times',\n      tags: {\n        browser: data.browser,\n        cache_used: data.cacheUsed,\n        version: data.version,\n      },\n      fields: {\n        transpilation: measurements.transpilation,\n        evaluation: measurements.evaluation,\n        external_resources: measurements['external-resources'],\n        compilation: measurements.compilation,\n        boot: measurements.boot,\n        total: measurements.total,\n        dependencies: measurements.dependencies,\n      },\n    },\n  ];\n\n  if (process.env.NODE_ENV === 'development' || process.env.STAGING) {\n    // eslint-disable-next-line\n    console.log(body);\n    return Promise.resolve();\n  }\n\n  return fetch(MEASUREMENT_API, {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  });\n}\n","module.exports = jsdom;"],"sourceRoot":""}