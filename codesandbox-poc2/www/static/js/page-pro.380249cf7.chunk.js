(this.csbJsonP=this.csbJsonP||[]).push([[38],{"./src/app/pages/Pro/index.tsx":function(e,t,n){"use strict";n.r(t);var r=n("../../node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(r),o=n("./node_modules/date-fns/esm/format/index.js"),i=n("../../node_modules/react-helmet/lib/Helmet.js"),l=n("../../node_modules/react/index.js"),s=n.n(l),c=n("../common/lib/components/flex/MaxWidth.js"),u=n.n(c),d=n("../common/lib/components/spacing/Margin.js"),m=n.n(d),p=n("../common/lib/components/flex/Centered.js"),b=n.n(p),h=n("../common/lib/themes/codesandbox-black.js"),g=n.n(h),f=n("../components/lib/index.js"),y=n("./src/app/overmind/index.ts"),C=n("./src/app/pages/common/Navigation/index.tsx"),E=n("../../node_modules/react-stripe-elements/es/index.js"),x=n("../common/lib/utils/config.js"),v=n("./src/app/hooks/index.ts"),w=n("../../node_modules/@babel/runtime/regenerator/index.js"),S=n.n(w),_=n("../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),k=n.n(_),j=n("../../node_modules/@babel/runtime/helpers/classCallCheck.js"),P=n.n(j),I=n("../../node_modules/@babel/runtime/helpers/createClass.js"),N=n.n(I),D=n("../../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),T=n.n(D),z=n("../../node_modules/@babel/runtime/helpers/inherits.js"),O=n.n(z),A=n("../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),R=n.n(A),B=n("../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),Y=n.n(B),F=n("../../node_modules/@babel/runtime/helpers/defineProperty.js"),H=n.n(F),M=n("../common/lib/utils/analytics/index.js"),L=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),U=n("../@styled-system/css/dist/index.js"),W=n.n(U),J=n("./src/app/components/LinkButton.tsx"),X=L.default.div.withConfig({displayName:"elements__Page",componentId:"sc-1h59exi-0"})(W()({backgroundColor:"grays.900",color:"white",width:"100vw",minHeight:"100vh"})),$=L.default.div.withConfig({displayName:"elements__Content",componentId:"sc-1h59exi-1"})(W()({marginTop:"100px"})),G=L.default.h1.withConfig({displayName:"elements__Heading",componentId:"sc-1h59exi-2"})(W()({margin:0,textAlign:"center",fontSize:"32px"})),K=L.default.span.withConfig({displayName:"elements__SubHeading",componentId:"sc-1h59exi-3"})(W()({color:"grays.300",fontSize:4,display:"block",textAlign:"center",marginBottom:10})),q=L.default.span.withConfig({displayName:"elements__BillText",componentId:"sc-1h59exi-4"})((function(e){return W()({color:e.on?"white":"grays.300",margin:"0 1rem"})})),Q=L.default.div.withConfig({displayName:"elements__DurationChoice",componentId:"sc-1h59exi-5"})((function(){return W()({display:"flex",textAlign:"center",justifyContent:"center",marginBottom:8,"[data-component=SwitchBackground]":{backgroundColor:"grays.700"}})})),V=L.default.form.withConfig({displayName:"elements__Form",componentId:"sc-1h59exi-6"})((function(e){return W()({fontSize:3,width:300,margin:"auto",input:{fontSize:3,height:32,width:"100%"},transition:"opacity",transitionDuration:function(e){return e.speeds[2]},opacity:e.disabled?.5:1})})),Z=L.default.div.withConfig({displayName:"elements__FormField",componentId:"sc-1h59exi-7"})(W()({minHeight:"88px",marginBottom:2})),ee=L.default.label.withConfig({displayName:"elements__Label",componentId:"sc-1h59exi-8"})(W()({display:"block",lineHeight:1.6,marginBottom:2})),te=L.default.input.withConfig({displayName:"elements__Input",componentId:"sc-1h59exi-9"})(W()({backgroundColor:"grays.700",border:"1px solid",borderColor:"grays.500",boxSizing:"border-box",color:"white",paddingX:4,borderRadius:"medium",transition:"border",transitionDuration:function(e){return e.speeds[2]},":hover":{backgroundColor:"grays.700",borderColor:"grays.500"},":focus":{outline:"none",backgroundColor:"grays.900",borderColor:"grays.300"}})),ne=L.default.button.withConfig({displayName:"elements__Button",componentId:"sc-1h59exi-10"})(W()({display:"block",fontSize:4,lineHeight:"32px",width:"100%",minWidth:200,marginBottom:10,backgroundColor:"blues.600",color:"white",textDecoration:"none",textAlign:"center",border:"none",borderRadius:"medium",boxSizing:"border-box",cursor:"pointer",transition:"backgroundColor",transitionDuration:function(e){return e.speeds[2]},":hover":{backgroundColor:"blues.500"},":disabled":{backgroundColor:"blues.600",opacity:.5}})),re=ne.withComponent("a"),ae=L.default.p.withConfig({displayName:"elements__HelpText",componentId:"sc-1h59exi-11"})(W()({color:"grays.400",textAlign:"center",b:{color:"white"},a:{color:"grays.300"}})),oe=Object(L.default)(J.a).withConfig({displayName:"elements__LinkButton",componentId:"sc-1h59exi-12"})(W()({color:"grays.200"})),ie=L.default.div.withConfig({displayName:"elements__CardContainer",componentId:"sc-1h59exi-13"})(W()({".StripeElement":{backgroundColor:"grays.700",border:"1px solid",borderColor:"grays.500",padding:2,boxSizing:"border-box",borderRadius:"medium",minHeight:32,":hover":{backgroundColor:"grays.700",borderColor:"grays.500"},"&.StripeElement--focus":{backgroundColor:"grays.900",borderColor:"grays.300"}}})),le=L.default.div.withConfig({displayName:"elements__ErrorText",componentId:"sc-1h59exi-14"})(W()({color:"reds.500",marginTop:2})),se=L.default.img.withConfig({displayName:"elements__Avatar",componentId:"sc-1h59exi-15"})(W()({width:100,height:100,border:"1px solid",borderColor:"grays.500",borderRadius:"medium"})),ce={pro:"blues.700",patron:"green"},ue=L.default.span.withConfig({displayName:"elements__Badge",componentId:"sc-1h59exi-16"})((function(e){return W()({backgroundColor:ce[e.type],color:"pro"===e.type?"white":"grays.900",paddingY:1,paddingX:2,fontWeight:"bold",fontSize:3,textTransform:"capitalize",position:"relative",top:-20,right:"pro"===e.type?-40:-30,border:"1px solid",borderColor:"grays.500",borderRadius:"medium"})}));function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y()(e);if(t){var a=Y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}var me=function(e){O()(n,e);var t=de(n);function n(){var e;P()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),H()(T()(e),"state",{errors:{},name:e.props.name||"",coupon:"",loading:!1}),H()(T()(e),"setName",(function(t){t&&e.setState({errors:{},name:t.target.value})})),H()(T()(e),"setCoupon",(function(t){t&&e.setState({errors:{},coupon:t.target.value})})),H()(T()(e),"handleSubmit",function(){var t=k()(S.a.mark((function t(n){var r,a,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.state.name){t.next=3;break}return t.abrupt("return",e.setState({errors:{name:"Please provide a name "}}));case 3:return e.setState({loading:!0,errors:{}}),t.next=6,e.props.stripe.createToken({name:e.state.name});case 6:if(r=t.sent,a=r.token,!(o=r.error)){t.next=11;break}return t.abrupt("return",e.setState({loading:!1,errors:{stripe:o.message}}));case 11:return t.prev=11,t.next=14,e.props.subscribe({token:a.id,coupon:e.state.coupon});case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(11),Object(M.logError)(t.t0),t.abrupt("return",e.setState({loading:!1,errors:{stripe:t.t0.message}}));case 20:return t.abrupt("return",e.setState({loading:!1}));case 21:case"end":return t.stop()}}),t,null,[[11,16]])})));return function(e){return t.apply(this,arguments)}}()),e}return N()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.name!==this.props.name&&this.setState({errors:{},name:e.name})}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.error,r=e.hasCoupon,a=void 0!==r&&r,i=e.disabled,l=this.state,c=l.errors,u=l.loading,d=t||u,m=c.stripe||n;return s.a.createElement(V,{onSubmit:this.handleSubmit,disabled:i},s.a.createElement(Z,null,s.a.createElement(ee,{htmlFor:"cardholder-name"},"Cardholder Name"),s.a.createElement(te,{id:"cardholder-name",value:this.state.name,onChange:this.setName,placeholder:"Please enter your name",disabled:i}),null!=c.name&&s.a.createElement(le,null,c.name)),s.a.createElement(Z,null,s.a.createElement(ee,{htmlFor:"card-number"},"Card"),s.a.createElement(ie,null,s.a.createElement(E.CardElement,{id:"card-number",style:{base:{color:"white",fontWeight:"500"}},disabled:i})),null!=m&&s.a.createElement(le,null,m)),a&&s.a.createElement(Z,null,s.a.createElement(ee,{htmlFor:"coupon"},"Coupon"),s.a.createElement("div",null,s.a.createElement(te,{id:"coupon",value:this.state.coupon,onChange:this.setCoupon,placeholder:"Coupon or Discount Code",disabled:i}))),s.a.createElement(ne,{type:"submit",disabled:d||i,style:{marginTop:"1rem",width:300}},d?"Creating Subscription...":"Subscribe to Pro"),s.a.createElement(ae,null,"You will be billed now and on the ",s.a.createElement("b",null,Object(o.a)(new Date,"do"))," of each month thereafter. You can cancel or change your subscription at any time."))}}]),n}(s.a.PureComponent),pe=Object(E.injectStripe)(me),be=window,he=function(e){var t=e.name,n=e.subscribe,r=e.isLoading,o=void 0!==r&&r,i=e.error,l=e.hasCoupon,c=e.disabled,u=void 0!==c&&c,d=s.a.useState(null),m=a()(d,2),p=m[0],b=m[1],h=Object(v.a)("https://js.stripe.com/v3/"),g=a()(h,1)[0];return s.a.useEffect((function(){be.Stripe&&b(be.Stripe(x.STRIPE_API_KEY))}),[g]),s.a.createElement(E.StripeProvider,{stripe:p},s.a.createElement(E.Elements,null,s.a.createElement(pe,{subscribe:n,name:t,isLoading:o,error:i,hasCoupon:l,disabled:u})))},ge=n("./src/app/pages/SignIn/Modal.tsx"),fe=function(e){var t=e.user,n=e.modalOpened,r=e.cancelSubscriptionClicked,a=new Date(t.subscription.since);return s.a.createElement(u.a,{width:400},s.a.createElement(b.a,{horizontal:!0},s.a.createElement(se,{src:t.avatarUrl}),s.a.createElement(ue,{type:"pro"},"Pro"),s.a.createElement(G,null,"You're a Pro!"),s.a.createElement(re,{href:"/s/",style:{marginTop:30}},"Create a sandbox"),s.a.createElement(ae,null,"You will be billed"," ","yearly"===t.subscription.duration?s.a.createElement(s.a.Fragment,null,"and charged"," ",s.a.createElement("b",null,"annually on ",Object(o.a)(a,"MMM dd"))):s.a.createElement(s.a.Fragment,null,"on the ",s.a.createElement("b",null,Object(o.a)(a,"do")," of each month")),". You can"," ",s.a.createElement(oe,{onClick:function(e){e.preventDefault(),n({modal:"preferences",itemId:"paymentInfo"})}},"update your payment details")," ","or"," ",s.a.createElement(oe,{onClick:function(e){e.preventDefault(),r()}},"cancel your subscription")," ","at any time.")))},ye=function(e){var t=e.user;return s.a.createElement(u.a,{width:400},s.a.createElement(b.a,{horizontal:!0},s.a.createElement(se,{src:t.avatarUrl}),s.a.createElement(ue,{type:"patron"},"Patron"),s.a.createElement(G,null,"You're a Pro!"),s.a.createElement(K,null,"Thank you for being an early supporter of CodeSandbox. As a patron, you can access all Pro features."),s.a.createElement(re,{href:"/s/"},"Create a sandbox"),s.a.createElement(ae,null,"You will be billed on the"," ",s.a.createElement("b",null,Object(o.a)(new Date(t.subscription.since),"do"))," of each month. You can ",s.a.createElement("a",{href:"/patron"},"modify your contribution")," at any time.")))},Ce=function(e){var t=e.createSubscriptionClicked,n=e.user,r=e.patron,o=e.checkoutDisabled,i=s.a.useState("yearly"),l=a()(i,2),c=l[0],u=l[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(G,null,"CodeSandbox Pro"),s.a.createElement(K,null,"yearly"===c?"$9/month billed annually":"12$/month"),s.a.createElement(Q,null,s.a.createElement(q,{on:"monthly"===c},"Bill monthly"),s.a.createElement(f.Switch,{onChange:function(){return u((function(e){return"yearly"===e?"monthly":"yearly"}))},on:"yearly"===c}),s.a.createElement(q,{on:"yearly"===c},"Bill annually")),s.a.createElement(b.a,{horizontal:!0},s.a.createElement(he,{subscribe:function(e){var n=e.token,r=e.coupon;return t({token:n,coupon:r,duration:c})},isLoading:r.isUpdatingSubscription,hasCoupon:!0,name:n&&n.name,error:r.error,disabled:o})))},Ee=function(e){var t=e.user,n=e.updateSubscriptionClicked,r=e.isUpdatingSubscription;return s.a.createElement(u.a,{width:500},s.a.createElement(b.a,{horizontal:!0},s.a.createElement(se,{src:t.avatarUrl}),s.a.createElement(ue,{type:"pro",style:{opacity:.8}},"Pro"),s.a.createElement(G,null,"Your subscription is expiring"),s.a.createElement(ae,null,"Your subscription will be automatically cancelled on your next billing date (",Object(o.a)(new Date(t.subscription.since),"do MMM"),"). All your private sandboxes will remain available and private."),r?s.a.createElement(ne,{disabled:!0,style:{marginTop:30}},"Creating subscription..."):s.a.createElement(ne,{onClick:function(){return n({coupon:""})},style:{marginTop:30}},"Reactivate subscription")))};t.default=function(){var e=Object(y.c)(),t=e.state,n=t.hasLoadedApp,r=t.isLoggedIn,a=t.user,o=t.patron,c=e.actions,d=c.modalOpened,p=c.patron,b=p.priceChanged,h=p.createSubscriptionClicked,E=p.cancelSubscriptionClicked,x=p.updateSubscriptionClicked,v=p.patronMounted,w=!n||!r;b({price:12}),Object(l.useEffect)((function(){v()}),[v]);return s.a.createElement(f.ThemeProvider,{theme:g.a},s.a.createElement(X,null,s.a.createElement(C.a,{title:"CodeSandbox Pro"}),s.a.createElement(i.Helmet,null,s.a.createElement("title",null,"Pro - CodeSandbox")),s.a.createElement(m.a,{vertical:1.5,horizontal:1.5},s.a.createElement(u.a,{width:1024},s.a.createElement($,null,n?r?a.subscription?"patron"===a.subscription.plan?s.a.createElement(ye,{user:a}):a.subscription.cancelAtPeriodEnd?s.a.createElement(Ee,{user:a,updateSubscriptionClicked:x,isUpdatingSubscription:o.isUpdatingSubscription}):"pro"===a.subscription.plan?s.a.createElement(fe,{user:a,modalOpened:d,cancelSubscriptionClicked:E}):null:s.a.createElement(Ce,{createSubscriptionClicked:h,user:a,patron:o,checkoutDisabled:w}):s.a.createElement(ge.a,null):null)))))}}}]);
//# sourceMappingURL=page-pro.380249cf7.chunk.js.map